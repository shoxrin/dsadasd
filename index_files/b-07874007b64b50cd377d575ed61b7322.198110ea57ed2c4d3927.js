(self.webpackChunkvk=self.webpackChunkvk||[]).push([[4144],{9869:function(e,t,r){"use strict";r.d(t,{Like:function(){return c}});var n=r(9046),i=r(39931),o=r(90968),s=r(35645),a=r(65207),c={onDone:function(e,t,r,c,u){var l=(0,n.ge)(e)||(0,n.geByClass1)("like_box","z")||(0,n.geByClass1)("like_box")||(0,n.geByClass1)("wall_item_for_like_"+e);if(l&&e){var d,m,f=(0,n.geByClass1)("item_repost",l);if((0,n.hasClass)("wall_item",l)||l.parentNode.classList.contains("MarketItem")||l.parentNode.classList.contains("PhotoviewPage")||l.parentNode.classList.contains("VideoPage")?m=(0,n.geByClass1)("wi_like_wrap",l)||(null==l.querySelector?void 0:l.querySelector("._wi_likes_bar_wrap")):(0,n.hasClass)("ReplyItem",l)?d=(0,n.geByClass1)("ReplyItem__likeWrap",l):m=(0,n.geByClass1)("item_like",l),d||(d=null==l.querySelector?void 0:l.querySelector(".like_wrap, ._post_bottom_like_wrap")),m&&(m.innerHTML=t||"",(0,n.toggleClass)("is_empty",m,!t),(0,n.toggle)(m,t)),f&&(f.innerHTML=r||"",(0,n.toggle)(f,r)),d){var p=(0,n.ceFromString)(c);if(p.classList.contains("like_wrap")||p.classList.contains("_post_bottom_like_wrap")){var _=l.querySelector(".PostRowBottomButtons__views");void 0!==u&&l.querySelector(".PostRowBottomButtons--oneLine")&&_&&(_.innerHTML=u||""),(0,n.replace)(p,d)}else(0,n.val)(d,c||"");var v=(0,i.marketItemIdToObject)(e);if(v){var h=d.querySelector(".item_like");h&&(0,o.trackMarketEvent)({event:h.classList.contains("item_sel")?a.ECommGoodsEvent.LIKE_ITEM:a.ECommGoodsEvent.UNLIKE_ITEM,ownerId:v.ownerId,itemId:v.itemId,instant:!0,platform:s.PLATFORM_MVK})}}}},onFail:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();switch(t){case 2:nav.hard_go(e[0])}}}},80610:function(e,t,r){"use strict";r.d(t,{getKeyboardState:function(){return c},getKeyboardType:function(){return u},setKeyboardType:function(){return l},clearCallbackButtons:function(){return m},stopCallbackButtonWaiting:function(){return f},registerCallbackButtonEvent:function(){return p},loadDrafts:function(){return _},getPeerDraft:function(){return v},setPeerDraft:function(){return h},pushPeerAttachments:function(){return g},popPeerAttachments:function(){return E},setPeerTyping:function(){return I},removePeerTypingUser:function(){return T},filterPeerTypingUser:function(){return b},replacePeer:function(){return O},removePeer:function(){return k},addPeer:function(){return S},addPendingMsg:function(){return w},getPendingMsg:function(){return R},removePendingMsg:function(){return A},removeFailedMsg:function(){return M},failAllPendingMsgs:function(){return N},queueToPresendMsgs:function(){return C},saveFolderScroll:function(){return D},restoreFolderScroll:function(){return L}});var n=r(46769),i=(r(27635),r(24945)),o=r(49751),s=r(17999),a=r(9046);function c(e){var t=store.mail.cur.keyboards,r=t[e];return r||(r=t[e]={}),r}function u(){return store.mail.cur&&store.mail.cur.keyboardType||""}function l(e){store.mail.cur&&(store.mail.cur.keyboardType=e)}var d={};function m(e,t){void 0===t&&(t=!1),store.mail.cur.pressedButtons&&(t?delete store.mail.cur.pressedButtons.msgs[t]:delete store.mail.cur.pressedButtons.peers[e])}function f(e){var t=d[e];if(t){var r,n=t.peerId,i=t.msgId,s=t.position,a=t.button,c=t.inline;if(c?store.mail.cur.pressedButtons.msgs[i]&&delete store.mail.cur.pressedButtons.msgs[i][s.join(",")]:store.mail.cur.pressedButtons.peers[n]&&delete store.mail.cur.pressedButtons.peers[n][s.join(",")],delete d[e],!bodyNode.contains(a))(r=c?$(".msg_id_"+i+" .BotsKeyboard__main"):$(".uMailWrite__keyboard .BotsKeyboard__main"))&&(a=$('.BotsKeyboard__button[data-position="'+s.join(",")+'"]',r));a&&o.default.setLoading(a,!1)}}function p(e,t,r,n,i){var c=((0,a.domData)(t,"position")||"").split(",");if(!c)return o.default.setLoading(t,!1),clog("Can't find button position for callback event"),!1;if(d[r]={time:(0,s.vkNow)(),peerId:e,msgId:n,button:t,position:c,inline:!!n},store.mail.cur.pressedButtons||(store.mail.cur.pressedButtons={peers:{},msgs:{}}),c[0]&&c[1])if(n){var u="";i&&(u=i+"|"),store.mail.cur.pressedButtons.msgs[n]||(store.mail.cur.pressedButtons.msgs[n]={}),store.mail.cur.pressedButtons.msgs[n][u+c.join(",")]=r}else store.mail.cur.pressedButtons.peers[e]||(store.mail.cur.pressedButtons.peers[e]={}),store.mail.cur.pressedButtons.peers[e][c.join(",")]=r;setTimeout((function(){f(r)}),6e4)}function _(e){var t=store.mail.cur.drafts;return t||(t=lsGet("mail_drafts_"+e),t=store.mail.cur.drafts=t||{}),t}function v(e,t){var r=_(e);return r[t]||(r[t]={})}function h(e,t,r,i){var o=store.mail.cur.drafts;if(o||(o=store.mail.cur.drafts=o||{}),i){var s=o[t],a=s&&s.editing&&s.editing.id===i?s.editing:void 0;o[t]=(0,n.default)({},s,{editing:(0,n.default)({},a,{},r,{id:i})})}else o[t]=(0,n.default)({},o[t],{},r,{editing:void 0});lsSet("mail_drafts_"+e,o)}function g(e,t){var r=store.mail.peers[e];r.attachmentsStack.push(r.attachmentsHTML),r.attachmentsHTML=t}function E(e){var t=store.mail.peers[e],r=t.attachmentsStack.pop();r||(r=Brick({mix:"cp_attached_wrap",attrs:'id="attached_wrap"'})),t.attachmentsHTML=r}function I(e,t){var r=store.mail.cur.typings[e];if(r||(r=store.mail.cur.typings[e]={}),"text"!==t.type&&"audio"!==t.type||(t.count?r[t.type]=t:r[t.type]=null),r.text&&r.audio){var n=y(r.text,r.audio);r.mixed=n.count>1?n:null}else r.mixed=null}function T(e,t){var r=store.mail.cur.typings[e];if(r){var n=r.audio,i=r.text;if(n&&((n=b(n,t)).count?r.audio=n:r.audio=null),i&&((i=b(i,t)).count?r.text=i:r.text=null),r.text&&r.audio){var o=y(r.text,r.audio);r.mixed=o.count>1?o:null}else r.mixed=null}}function b(e,t){var r=e.users.filter((function(e){return e!==t}));return r.length!==e.users.length&&(e.count=e.count-(e.users.length-r.length),e.users=r),e}function y(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return e.count+=t.count,t.users.reduce((function(e,t){return-1===e.users.indexOf(t)?e.users.push(t):e.count--,e}),e)}),{users:[],count:0,type:"mixed"})}function O(e,t){var r=store.mail,n=r.scraps.folder,i=n.indexOf(e);-1!==i&&(t?n.splice(i,1,t):n.splice(i,1)),Object.keys(r.rolls.folder).forEach((function(n){var i=r.rolls.folder[n],o=i.indexOf(e);-1!==o&&(t?i.splice(o,1,t):i.splice(o,1))})),t&&(r.rolls.peer[t]=r.rolls.peer[e],r.reached.peer.before[t]=r.reached.peer.before[e],r.reached.peer.after[t]=r.reached.peer.after[e]),e!==t&&(r.rolls.peer[e]&&r.rolls.peer[e].forEach((function(n){var i=r.msgs[n];i&&(t?(i.peerId=t,i.authorId===e&&(i.authorId=t)):delete r.msgs[n])})),delete r.rolls.peer[e],delete r.reached.peer.before[e],delete r.reached.peer.after[e],delete r.members[e],delete r.peers[e])}function k(e,t){void 0===t&&(t={});var r=store.mail;if(!1!==t.lists){var n=r.scraps.folder,i=n.indexOf(e);-1!==i&&n.splice(i,1),Object.keys(r.rolls.folder).forEach((function(t){var n=r.rolls.folder[t],i=n.indexOf(e);-1!==i&&n.splice(i,1)}))}!1!==t.msgs&&r.rolls.peer[e]&&r.rolls.peer[e].forEach((function(e){r.msgs[e]&&delete r.msgs[e]})),!1!==t.lists&&(delete r.rolls.peer[e],delete r.reached.peer.before[e],delete r.reached.peer.after[e]),!1!==t.data&&(delete r.members[e],delete r.peers[e])}function S(e,t){void 0===t&&(t={});var r=store.mail;if(t.msgs){var n=t.msgs;r.rolls.peer[e]=n,r.reached.peer.before[e]=!1,r.reached.peer.after[e]=!1}else r.rolls.peer[e]||(r.rolls.peer[e]=[],r.reached.peer.before[e]=!1,r.reached.peer.after[e]=!1);var i=r.msgs[r.rolls.peer[e][0]];r.rolls.folder.all.unshift(e),r.cur.folder&&r.scraps.folder.unshift(e),i&&(i.isUnread&&r.rolls.folder.unread.unshift(e),i.isImportant&&r.rolls.folder.important.unshift(e))}function w(e){var t=store.mail.presend;t.pending[e.peerId]||(t.pending[e.peerId]=[]),t.msgs[e.sendId]=e,t.pending[e.peerId].push(e.sendId)}function R(e,t){var r=store.mail.presend;return r.pending[t]?r.msgs[e]:null}function A(e){var t=store.mail.presend;if(t.pending[e.peerId]){var r=e.sendId;delete t.msgs[r],t.pending[e.peerId]=t.pending[e.peerId].filter((function(e){return e!==r}))}}function M(e){var t=store.mail.presend;if(t.failed[e.peerId]){var r=e.sendId;delete t.msgs[r],t.failed[e.peerId]=t.failed[e.peerId].filter((function(e){return e!==r}))}}function N(){var e=store.mail.presend,t={};Object.keys(e.msgs).forEach((function(r){var n=e.msgs[r];n.pending=!1,n.failed=!0,t[n.peerId]||(t[n.peerId]=[]),t[n.peerId].push(r)}),{}),e.pending={},e.failed=t}function C(e){var t={};Object.keys(e.items).forEach((function(r){var n=e.items[r];t[r]=(0,i.sendDataToMessage)(n.data.data,-1!==e.failed.indexOf(r))}));var r={};e.pending.forEach((function(e){var n=t[e];r[n.peerId]||(r[n.peerId]=[]),r[n.peerId].push(e)}),{});var n={};e.failed.forEach((function(e){var r=t[e];n[r.peerId]||(n[r.peerId]=[]),n[r.peerId].push(e)}),{}),store.mail.presend={msgs:t,pending:r,failed:n}}function D(e,t){var r=store.mail.cur;r&&(r.folderScroll||(r.folderScroll={}),r.folderScroll[e]=t)}function L(e){var t=store.mail.cur;if(t){t.folderScroll||(t.folderScroll={});var r=t.folderScroll[e]||0;return t.folderScroll[e]=0,r}}},61311:function(e,t,r){"use strict";var n=r(80610),i=Array.isArray,o={mail:{},helpHints:{all:{},shown:{},locked:{}}},s={injectStore:function(e){o.mail={};var t=e.mail,r=t.cur,s=t.rolls,a=t.reached;t.msgs,t.queue;i(e.mail.msgs)&&(e.mail.msgs={}),i(e.mail.replies)&&(e.mail.replies={}),s&&i(s.peer)&&(s.peer={}),s&&i(s.search.peers)&&(s.search.peers={}),s&&i(s.search.msgs)&&(s.search.msgs={}),a&&i(a.search.peers)&&(a.search.peers={}),a&&i(a.search.msgs)&&(a.search.msgs={}),a&&i(a.peer.before)&&(a.peer.before={}),a&&i(a.peer.after)&&(a.peer.after={}),o.mail=e.mail,o.mail.pendingReplies={},o.mail.presend={},r&&(r.msgSelected={},r.msgRemoved={},r.msgAttached={},r.msgReply={},r.keyboards={},r.typings={},r.peerMembers={}),"notificationsCount"in o||(o.notificationsCount=e.notificationsCount),"menuNotifications"in o||(o.menuNotifications=e.menuNotifications),Array.isArray(r.drafts)?r.drafts={}:r.drafts&&((0,n.loadDrafts)(r.viewerId),Object.keys(r.drafts).forEach((function(e){var t=r.drafts[e];(0,n.setPeerDraft)(r.viewerId,e,t)})))},injectMail:function(e){var t=o.mail,r=e,n=isObject(t.peers)&&isObject(r.peers)&&Object.assign({},t.peers);isObject(r.msgs)&&Object.assign(t.msgs,r.msgs),isObject(r.peers)&&Object.assign(t.peers,r.peers),isObject(r.members)&&Object.assign(t.members,r.members),isObject(r.replies)&&Object.assign(t.replies,r.replies),isObject(r.forwards)&&Object.assign(t.forwards,r.forwards),t.page=r.page,r.mrs&&(t.cur.countMR=r.mrs.count,t.rolls.mrs=r.mrs.rolls,t.reached.mrs=r.mrs.reached,t.scraps.mrs=r.mrs.rolls,Object.keys(r.msgs).forEach((function(e){var n=r.msgs[e],i=n.peerId;t.rolls.peer[i]=[n.id],t.reached.peer.after[i]=!0})),t.mrs=r.mrs),n&&Object.keys(n).forEach((function(e){var i=t.peers[e],o=r.peers[e],s=n[e];i&&(i.peerProfileData=s.peerProfileData),s&&s.actionUrls&&o&&!o.actionUrls&&(i.actionUrls=s.actionUrls)}))},injectMsg:function(e){var t;s.injectMail({msgs:(t={},t[e.id]=e,t)})},resetMail:function(){o.mail={}}};window.storeMethods=s,window.store=o},94713:function(e,t,r){"use strict";r.d(t,{onLongpress:function(){return a},onLongpressOrClick:function(){return u}});var n=r(46769),i=r(9046),o="touchstart mousedown",s="touchmove";function a(e,t,r,n){void 0===t&&(t=350);var a,u=void 0===n?{}:n,l=u.cancelLongPressOnMove,d=void 0!==l&&l,m=u.eventsRelease,f=void 0===m?"touchcancel touchend touchmove mouseout mouseup mousemove scroll":m,p=u.initialTouchStartEvent,_=u.onRelease,v=u.onStart,h=u.shouldPreventDefault,g=u.ignoreMouseLongpress,E=u.canStart,I=function(r){if(!isFunction(E)||E({event:r,type:"start"})){var n=r.target;h&&c(r),(0,i.addEvent)(e,f,b,{passive:!0}),null==v||v(r),(0===r.button||(0,i.isUndefined)(r.button))&&(a=setTimeout(y.bind(n,r),t))}},T=function(){clearTimeout(a),p&&(0,i.removeEvent)(e,f,b,{passive:!0})},b=function t(r){clearTimeout(a),(0,i.removeEvent)(e,f,t,{passive:!0}),null==_||_(r)};function y(t){var n,o;t.touches?(n=t.touches[0].pageX,o=t.touches[0].pageY):(n=t.pageX,o=t.pageY),(0,i.removeEvent)(e,f,b,{passive:!0}),clearTimeout(a),!t.touches&&g||r({event:t,pageX:n,pageY:o})}return(0,i.addEvent)(e,o,I,{capture:!0,passive:!h}),d&&(0,i.addEvent)(e,s,T,{passive:!1}),p&&p instanceof Event&&I(p),function(){clearTimeout(a),(0,i.removeEvent)(e,o,I,{capture:!0,passive:!0}),d&&(0,i.removeEvent)(e,s,T,{passive:!1})}}var c=function(e){(function(e){return"touches"in e})(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()};function u(e,t,r,i,o){void 0===o&&(o={});var s=!1,u=o,l=u.shouldPreventDefault,d=void 0!==l&&l,m=u.canStart;return a(e,t,(function(){d&&e.removeEventListener("touchend",c,{passive:!1}),isFunction(m)&&!m()||s||(r.apply(void 0,arguments),s=!0)}),(0,n.default)({},o,{eventsRelease:o.ignoreMoveEvent?"touchend mouseleave mouseup scroll":"touchend touchmove mouseleave mouseup scroll",onRelease:function(t){(d&&e.removeEventListener("touchend",c,{passive:!1}),!isFunction(m)||m())&&(["mouseup","touchend"].includes(t.type)&&!s&&(i(t),s=!0))},onStart:function(t){s=!1,d&&e.addEventListener("touchend",c,{passive:!1}),null==o.onStart||o.onStart(t)}}))}},26237:function(e,t,r){"use strict";var n=r(85489);t.default=function(e){return{class:[e.class,n.default.class("Tooltip",{pos:e.pos,onboarding:e.onboarding,theme:e.theme||"",closeOnOverlayClick:e.closeOnOverlayClick},"_")],"tooltip-id":e["tooltip-id"],inner:{class:n.default.class("Tooltip__inner",{pos:e.pos,textAlignCenter:"center"===e.textAlign,theme:e.theme||""},"_"),inner:e.inner},style:e.style,onclick:e.onclick}}},38383:function(e,t,r){"use strict";r.d(t,{setHelpHintShown:function(){return i.setHelpHintShown},getTooltipElementByHintId:function(){return i.getTooltipElementByHintId}});var n=r(26237),i=r(36980);t.default=n.default,window.Tooltip={close:i.close,setHelpHintShown:i.setHelpHintShown}},3369:function(e,t,r){"use strict";function n(e,t,r){var n;return function(){var i=this,o=arguments,s=function(){n=null,r||e.apply(i,o)},a=r&&!n;clearTimeout(n),n=setTimeout(s,t),a&&e.apply(this,o)}}r.d(t,{debounce:function(){return n}})},97398:function(e,t,r){"use strict";var n;r.d(t,{AvailableHelpHints:function(){return n}}),function(e){e.ACCOUNT_HINT_MVK_VIDEO_FILTERS="mvk:video_filters",e.ACCOUNT_HINT_TEXTLIVE_HIDE="feed:textlive_hide",e.ACCOUNT_HINT_COMMUNITY_TEXTLIVES_COUNTER="community:textlives_counter",e.ACCOUNT_HINT_NARRATIVES_ADD_TOOLTIP="narratives:add_tooltip",e.ACCOUNT_HINT_FEED_POST_REACTION="feed:post_reaction",e.ACCOUNT_HINT_FEED_POST_POPUP_REACTIONS="feed:post_popup_reactions",e.ACCOUNT_HINT_FEED_POST_POPUP_SELECT_INACTIVE="feed:post_popup_select_inactive",e.ACCOUNT_HINT_FEED_POST_PREVIEW_REACTIONS="feed:post_preview_reactions",e.ACCOUNT_HINT_MVK_STORIES_ARCHIVE_PRIVACY_HINT="mvk:stories_archive:privacy_hint",e.ACCOUNT_HINT_MVK_STORIES_ARCHIVE_ACTIONS_HINT="mvk:stories_archive:actions_hint",e.ACCOUNT_HINT_FRIENDS_BEST_FRIENDS_POSTING="friends:best_friends_posting"}(n||(n={}))},19610:function(e,t,r){"use strict";r.d(t,{isDebugEnabled:function(){return i.isDebugEnabled},isReactionMenuHoverSupported:function(){return o}});var n=r(62691),i=r(9723),o=function(){return!n.isTouch}},26628:function(e,t,r){"use strict";r.d(t,{addListenerSetReactionSuccess:function(){return s},emitSetReactionSuccess:function(){return a}});var n=r(70793),i="reaction_set_reaction:success",o=function(){var e,t,r=null===(e=window)||void 0===e?void 0:e.Reactions,i=null!==(t=null==r?void 0:r.dataEventsEmitter)&&void 0!==t?t:new n.default;return r&&!r.dataEventsEmitter&&(r.dataEventsEmitter=i),i},s=function(e){var t,r=o(),n=((t={})[i]=e,t);return r.addListeners(n),function(){r.removeListeners(n)}},a=function(e){o().emit(i,e)}},19102:function(e,t,r){"use strict";r.d(t,{hideButtonHint:function(){return u},initReactionsOnboarding:function(){return l}});var n=r(9046),i=r(11393),o=r(19610),s=r(26628),a=r(38383),c=r(97398),u=function(){(0,a.setHelpHintShown)(c.AvailableHelpHints.ACCOUNT_HINT_FEED_POST_REACTION)},l=function(){!function(e){var t=e.buttonHintResult,r=c.AvailableHelpHints.ACCOUNT_HINT_FEED_POST_PREVIEW_REACTIONS;if(window.helpHints.canShow(r))if(null==t?void 0:t.hasBeenShown)var o=(0,s.addListenerSetReactionSuccess)((function(e){o();var t=document.getElementById(e.objectRaw);t&&u(t)}));else u();function u(e){void 0===e&&(e=document.body);var t=e.querySelector(".ReactionsPreview"),o=null==t?void 0:t.closest(".PostRowBottomButtons--oneLine"),s=o?t:null==t?void 0:t.querySelector(".ReactionsPreview__label");if(t&&s){var c=(0,a.default)({onboarding:!0,theme:"accent",inner:(0,n.getLang)("intro_hint_description_feed_post_preview_reactions"),pos:o?"left":"center-right","tooltip-id":r,style:o?"top: -8px;":"right: -16px"}),u=i.default.elem(c);u&&(s.style.position="relative",s.appendChild(u),t.addEventListener("click",(function(){(0,a.setHelpHintShown)(r)}),{once:!0}))}}}({buttonHintResult:function(){var e=c.AvailableHelpHints.ACCOUNT_HINT_FEED_POST_REACTION;if(!(0,o.isReactionMenuHoverSupported)()&&window.helpHints.canShow(e)){var t=document.querySelector('[data-section-ref="reactions-button-container"]');if(t){var r=(0,a.default)({onboarding:!0,theme:"accent",inner:(0,n.getLang)("intro_hint_title_mvk_post_reaction"),pos:"top_left","tooltip-id":e,style:"top: -12px; width: 250px"}),s=i.default.elem(r);return s?(t.appendChild(s),{hasBeenShown:!0}):void 0}}}()})}},36980:function(e,t,r){"use strict";r.d(t,{getTooltipElementByHintId:function(){return o},setHelpHintShown:function(){return s},close:function(){return c}});var n=r(1730),i=(r(61311),r(9046));function o(e){return e?(0,n.$)('.Tooltip[tooltip-id="'+e+'"]'):null}function s(e){return!!e&&(!!window.helpHints.canShow(e)&&void(c(e)&&window.helpHints.hide(e)))}function a(e){return!!e&&((0,i.re)(e),!0)}function c(e){return a(o(e))}["click","touchend","touchcancel"].forEach((function(e){return window.addEventListener(e,(function(e){var t=e.target&&e.target.classList.contains("Tooltip")?e.target:e.target.closest(".Tooltip");if(t&&(e.preventDefault(),e.stopPropagation(),t.classList.contains("Tooltip_onboarding"))){var r=t.getAttribute("tooltip-id");s(r),c(r)}}),{capture:!0})})),["touchstart","mousedown","click"].forEach((function(e){return window.addEventListener(e,(function(){var e=(0,n.$$)(".Tooltip_closeOnOverlayClick[tooltip-id]");null==e||e.forEach(a)}),{passive:!0,capture:!0})}))},35645:function(e,t,r){"use strict";r.d(t,{PLATFORM_MVK:function(){return n}});var n="mvk"},12459:function(e,t,r){"use strict";function n(e){var t=e.getBoundingClientRect();return{left:t.left,top:t.top}}function i(){var e=document.documentElement;return{width:e.clientWidth,height:e.clientHeight}}function o(e){var t=e.getBoundingClientRect(),r=t.width,n=t.height;return r&&n?{width:r,height:n}:{width:e.offsetWidth,height:e.offsetHeight}}r.d(t,{getElementOffset:function(){return n},getViewportSize:function(){return i},getElementSize:function(){return o}})},90968:function(e,t,r){"use strict";r.d(t,{trackMarketEvent:function(){return p},trackMarketArea:function(){return _}});var n=r(21795),i=r(30790),o=r(59326),s=r(35645),a=r(39931),c=r(65207),u=[],l=!1;function d(e,t){void 0===t&&(t=0);var r=m(t);return!!r&&e.includes(r.event)}function m(e){return void 0===e&&(e=0),u.length>e?u[u.length-(1+e)]:null}function f(e){l||(window.addEventListener("beforeunload",(function(){(0,o.observersStop)(),(0,n.flushMarketEvents)(e)})),l=!0)}function p(e){if(function(e){var t=m();if(t){if(e===c.ECommGoodsEvent.CLOSE_ITEM&&t.event===c.ECommGoodsEvent.CLOSE_ITEM)return!1;if(e===c.ECommGoodsEvent.TRANSITION_TO_ITEM){if(d([c.ECommGoodsEvent.TRANSITION_TO_ITEM_LEFT,c.ECommGoodsEvent.TRANSITION_TO_ITEM_RIGHT]))return!1;if(d([c.ECommGoodsEvent.SWITCH_ITEM_VARIANT_1,c.ECommGoodsEvent.SWITCH_ITEM_VARIANT_2]))return!1}}return!0}(e.event))if(e.event||e.table){e.table||(Object.values(c.ECommGoodsEvent).includes(e.event)?e.table=c.AnalyticsEventTable.GOODS:Object.values(c.ECommOrdersEvent).includes(e.event)?e.table=c.AnalyticsEventTable.ORDERS:(0,a.marketDebug)("error","table not specified")),e.screen=e.screen?e.screen:window.MarketAnalyticsManager&&window.MarketAnalyticsManager.getScreen(),e.platform=e.platform?e.platform:"web",e.itemType=e.itemType?e.itemType:"",f(e.platform);var t=String(e.event),r=e.table+":"+t;e.instant?(0,n.logMarketEventNow)(e.platform,r,e.ownerId,e.itemId,e.screen,e.albumId,e.time,e.duration,e.itemType):(0,n.logMarketEvent)(e.platform,r,e.ownerId,e.itemId,e.screen,e.albumId,e.time,e.duration,e.itemType),u.push(e),u.length>3&&u.shift()}else(0,a.marketDebug)("error","event and table not specified",e)}function _(e,t){var r;switch(void 0===t&&(t=""),f(t),(0,n.flushMarketEvents)(t),(0,o.observersStop)(),(0,a.marketDebug)("warn","analytics: start tracking area",e),e){case c.AnalyticsArea.MARKET:r=function(e){var t=0;void 0!==window.cur.aid&&(t=window.cur.aid),p({event:"market_item"===e.type?c.ECommGoodsEvent.VIEW_ITEM:c.ECommGoodsEvent.VIEW_ALBUM,ownerId:e.ownerId,itemId:"market_item"===e.type?e.itemId:0,albumId:"market_item"===e.type?t:e.itemId,duration:e.duration,time:e.viewStart,platform:e.platform})};var u=i.MarketAnalyticsObserver.create({observerId:"market_products",itemSelector:{types:"market_item"},isUnifyNodes:!0,isDynamicContent:!0,platform:t});u.itemReachedCallback=r;var l=i.MarketAnalyticsObserver.create({observerId:"market_albums",itemSelector:{types:"market_album"},isUnifyNodes:!0,isDynamicContent:!1,platform:t});l.itemReachedCallback=r,t!==s.PLATFORM_MVK&&(l.preCheckReachedCallback=function(e){var t,r=e.offsetTop,n=null===(t=e.parentNode)||void 0===t?void 0:t.parentNode;return n&&r<n.offsetHeight}),u.watch(),l.watch();break;case c.AnalyticsArea.GROUP:r=function(e){p({event:"market_item"===e.type?c.ECommGoodsEvent.VIEW_ITEM:c.ECommGoodsEvent.VIEW_ALBUM,ownerId:e.ownerId,itemId:"market_item"===e.type?e.itemId:0,albumId:"market_item"===e.type?0:e.itemId,duration:e.duration,time:e.viewStart,platform:e.platform})};var d=i.MarketAnalyticsObserver.create({observerId:"market_module",itemSelector:{types:"market_item"},isUnifyNodes:!0,platform:t});d.itemReachedCallback=r;var m=i.MarketAnalyticsObserver.create({observerId:"group_wall",itemSelector:{types:"market_item,market_album"},isUnifyNodes:!0,isDynamicContent:!0,platform:t});m.itemReachedCallback=r,d.watch(),m.watch();break;case c.AnalyticsArea.USER_PROFILE:var _=i.MarketAnalyticsObserver.create({observerId:"user_wall",itemSelector:{types:"market_item,market_album"},isUnifyNodes:!0,isDynamicContent:!0,platform:t});_.itemReachedCallback=function(e){p({event:"market_item"===e.type?c.ECommGoodsEvent.VIEW_ITEM:c.ECommGoodsEvent.VIEW_ALBUM,ownerId:e.ownerId,itemId:"market_item"===e.type?e.itemId:0,duration:e.duration,time:e.viewStart,albumId:"market_item"===e.type?0:e.itemId,platform:e.platform})},_.watch();break;case c.AnalyticsArea.BOOKMARKS:var v=i.MarketAnalyticsObserver.create({observerId:"bookmarks",itemSelector:{types:"market_item"},isUnifyNodes:!0,isDynamicContent:!0,platform:t});v.itemReachedCallback=function(e){p({table:c.AnalyticsEventTable.GOODS,event:c.ECommGoodsEvent.VIEW_ITEM,ownerId:e.ownerId,itemId:e.itemId,duration:e.duration,time:e.viewStart,albumId:0,platform:e.platform})},v.watch();break;case c.AnalyticsArea.FEED:var h=i.MarketAnalyticsObserver.create({observerId:"feed",itemSelector:{types:"market_item"},isUnifyNodes:!0,isDynamicContent:!0,container:".feed_wrap",platform:t});h.itemReachedCallback=function(e){p({event:"market_item"===e.type?c.ECommGoodsEvent.VIEW_ITEM:c.ECommGoodsEvent.VIEW_ALBUM,ownerId:e.ownerId,itemId:"market_item"===e.type?e.itemId:0,duration:e.duration,time:e.viewStart,albumId:"market_item"===e.type?0:e.itemId,platform:e.platform})},h.watch()}}},30790:function(e,t,r){"use strict";r.d(t,{MarketAnalyticsObserver:function(){return u}});var n=r(97316),i=r(39931),o=r(33614),s=r(51583),a=r(12459),c=r(35645),u=function(e){function t(r,n,i,s,a,c,u){void 0===i&&(i=""),void 0===s&&(s=!1),void 0===a&&(a=!1),void 0===c&&(c="");var l=e.call(this,r,n,i,s,c,u)||this;return l.observerId=r,l.itemSelector=n,l.container=i,l.isUnifyNodes=s,l.isDynamicNodes=a,l.gap=null,a&&l.addMutators([new o.NodeMutationObserver]),l.gap=t.getViewportGap(l.getPlatform()),l}return(0,n.__extends)(t,e),t.prototype.isReached=function(e){if(!(0,i.isElementVisible)(e))return!1;var t,r=this.gap,n=e.closest("[data-stat-viewport]");if(n){var o=n.getBoundingClientRect();r={top:o.top,left:o.left},t={width:o.left+o.width,height:o.top+o.height}}return(0,i.isElementInViewport)(e,45,r,t)},t.create=function(e){return new t(e.observerId,e.itemSelector,null==e?void 0:e.container,null==e?void 0:e.isUnifyNodes,null==e?void 0:e.isDynamicContent,null==e?void 0:e.platform,null==e?void 0:e.getExtraItemParams)},t.getViewportGap=function(e){void 0===e&&(e="");var t={left:0,top:0},r="";return r=e===c.PLATFORM_MVK?"#vk_head":"#page_header_wrap,#market_search_input",document.querySelectorAll(r).forEach((function(e){var r=(0,a.getElementSize)(e);t.top=t.top+r.height})),t},t}(s.NodeViewObserver)},65207:function(e,t,r){"use strict";var n,i,o,s;r.d(t,{AnalyticsArea:function(){return n},AnalyticsEventTable:function(){return i},ECommGoodsEvent:function(){return o},ECommOrdersEvent:function(){return s}}),function(e){e.MARKET="market",e.GROUP="group",e.USER_PROFILE="user_profile",e.BOOKMARKS="bookmarks",e.FEED="feed"}(n||(n={})),function(e){e.GOODS="ecomm_goods",e.ORDERS="ecomm_orders"}(i||(i={})),function(e){e.TRANSITION_TO_ITEM="transition_to_item",e.TRANSITION_TO_ALBUM="transition_to_album",e.SWITCH_ITEM_VARIANT_1="switch_item_variant_1",e.SWITCH_ITEM_VARIANT_2="switch_item_variant_2",e.TRANSITION_TO_ITEM_LEFT="transition_to_item_left",e.TRANSITION_TO_ITEM_RIGHT="transition_to_item_right",e.VIEW_ITEM="view_item",e.VIEW_ALBUM="view_album",e.CLOSE_ITEM="close_item",e.TRANSITION_TO_OWNER="transition_to_owner",e.VIEW_ITEM_MEDIA="view_item_media",e.ADD_ITEM_TO_CART="add_item_to_cart",e.EXPAND_ITEM_DESCRIPTION="expand_item_description",e.ADD_ITEM_TO_BOOKMARKS="add_item_to_bookmarks",e.REMOVE_ITEM_FROM_BOOKMARKS="remove_item_from_bookmarks",e.EXPAND_COMMENTS="expand_comments",e.COMMENT="comment",e.ADD_TO_CART_HS="add_to_cart_hs",e.OPEN_WIKI="open_wiki",e.SEND_MESSAGE_TO_OWNER="send_message_to_owner",e.OPEN_CHAT_WITH_OWNER="open_chat_with_owner",e.LIKE_ITEM="like_item",e.UNLIKE_ITEM="unlike_item",e.SHARE_ITEM="share_item",e.CTA_LINK="cta_link",e.CREATE_ITEM="create_item",e.CREATE_ALBUM="create_album",e.EDIT_ITEM="edit_item",e.EDIT_ALBUM="edit_album",e.DELETE_ITEM="delete_item",e.DELETE_ALBUM="delete_album",e.GROUP_ITEMS="group_items",e.ADD_PROPERTY="add_property",e.ADD_PROPERTY_VALUE="add_property_value",e.DELETE_PROPERTY="delete_property",e.DELETE_PROPERTY_VALUE="delete_property_value",e.TRANSITION_TO_EDIT_PROPERTIES="transition_to_edit_properties",e.TRANSITION_TO_EDIT_ALBUMS="transition_to_edit_albums",e.TRANSITION_TO_ADD_ALBUM="transition_to_add_album",e.TRANSITION_TO_ADD_ITEM="transition_to_add_item",e.TRANSITION_TO_EDIT_ITEM="transition_to_edit_item",e.TRANSITION_TO_DELETE_ALBUM="transition_to_delete_album",e.TRANSITION_TO_GROUP_ITEMS="transition_to_group_items",e.VIEW_FEEDBACK="view_feedback",e.OPEN_FEEDBACK_PHOTO="open_feedback_photo"}(o||(o={})),function(e){e.EVENT_MAKE_ORDER="make_order",e.CANCEL_ORDER="cancel_order",e.EXPAND_ORDER_INFO="expand_order_info",e.TRANSITION_TO_ORDERS="transition_to_orders",e.OPEN_MARKET_GROUP_ORDERS="open_market_group_orders",e.OPEN_MARKET_GROUP_ITEMS="open_market_group_items",e.OPEN_MARKET_GROUP_SETTINGS="open_market_group_settings",e.OPEN_MARKET_GROUP_DELIVERY="open_market_group_delivery",e.TRANSITION_TO_MARKET_SUPPORT="transition_to_market_support",e.OPEN_ORDER_INFO="open_order_info",e.ADD_TRACK_CODE="add_track_code",e.ADD_INTERNAL_COMMENT="add_internal_comment",e.CHANGE_ORDER_STATUS="change_order_status",e.OPEN_CHAT_WITH_CUSTOMER="open_chat_with_customer",e.SEND_MESSAGE_TO_CUSTOMER="send_message_to_customer",e.OPEN_ORDER_HISTORY="open_order_history",e.FILTER_ORDERS_BY_STATUS="filter_orders_by_status",e.EXPORT_ORDERS_DATA="export_orders_data"}(s||(s={}))},21795:function(e,t,r){"use strict";r.d(t,{logMarketEventNow:function(){return l},logMarketEvent:function(){return d},flushMarketEvents:function(){return m}});var n=r(97316),i=r(39931),o=r(35645),s=r(90302),a="market_event_count",c="market_event_item_";function u(e,t,r,o){var c=window.MarketAnalyticsManager&&window.MarketAnalyticsManager.getHash();if(c){var u=r.slice(0,10),l=0,d=s.vkLocalStorage.getItem(a);d&&(l=parseInt(d)),l>=20&&(m(e),l=0);var f=Date.now(),p="market_event_item_"+Math.floor(1e5*Math.random())+"_"+f+"_"+t;u.unshift(f),u.unshift(t),u.push(c),s.vkLocalStorage.setItem(p,JSON.stringify(u)),s.vkLocalStorage.setItem(a,String(++l)),o&&m(e),i.marketDebug.apply(void 0,(0,n.__spreadArray)(["debug","event",t],(0,n.__read)(r)))}else(0,i.marketDebug)("warn","events","Hash error")}function l(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];u(e,t,r,!0)}function d(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];u(e,t,r,!1)}function m(e){for(var t=[],r=0;r<s.vkLocalStorage.length();++r){var n=s.vkLocalStorage.key(r);n&&0===n.lastIndexOf(c)&&t.push(n)}if(!(t.length<=0)){s.vkLocalStorage.setItem(a,String(0));var u=[],l="";t.forEach((function(e){var t=s.vkLocalStorage.getItem(e);if(s.vkLocalStorage.removeItem(e),t)try{var r=JSON.parse(t);l?r.pop():l=r.pop(),u.push(Object.values(r))}catch(e){(0,i.marketDebug)("error","event error","Unable to assemble events pack",e)}})),!l||u.length<1||(!window.MarketAnalyticsManager||window.MarketAnalyticsManager.isEnabled()?window.ajax.post(e===o.PLATFORM_MVK?"market.php":"al_market.php",{act:"log_events",hash:l,events:u},{onDone:function(){(0,i.marketDebug)("warn","events sent",u.length+" events sent")}}):(0,i.marketDebug)("error","event error","analytics disabled"))}}},39931:function(e,t,r){"use strict";r.d(t,{marketDebug:function(){return c},marketItemIdToObject:function(){return u},albumLinkToObject:function(){return l},parseBookmarkedProductClass:function(){return d},isElementVisible:function(){return m},isElementInViewport:function(){return f}});var n=r(12459),i=r(86353),o=r(90302),s="extended_client_logging",a="market_extended_client_logging";function c(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];((0,i.partConfigEnabled)(s)||o.vkLocalStorage.getItem(a))&&("error"===e?console.error("[market "+t+"]: ",r):"warn"===e?console.warn("[market "+t+"]: ",r):"info"===e?console.info("[market "+t+"]: ",r):console.debug("[market "+t+"]: ",r))}function u(e,t){void 0===t&&(t="market");var r=new RegExp(t+"(-?[0-9]+)_([0-9]+)"),n=e.match(r);if(!n||n.length<3)return null;var i=n[1],o=n[2];return{id:i+"_"+o,ownerId:parseInt(i),itemId:parseInt(o)}}function l(e){var t=e.match(/market(\-?[0-9]+).+section=album_([0-9]+)/);if(!t||t.length<3)return null;var r=t[1],n=t[2];return{id:r+"_"+n,ownerId:parseInt(r),itemId:parseInt(n)}}function d(e){var t=e.match(/_([0-9]+)_(\-?[0-9]+)_4/);if(!t||t.length<3)return null;var r=t[1],n=t[2];return{id:n+"_"+r,ownerId:parseInt(n),itemId:parseInt(r)}}function m(e){var t;return"none"!==(null===(t=e.style)||void 0===t?void 0:t.display)}function f(e,t,r,i){void 0===t&&(t=50),void 0===r&&(r=null);var o=r?r.left:0,s=r?r.top:0,a=(0,n.getViewportSize)(),c=(0,n.getElementOffset)(e),u=(0,n.getElementSize)(e),l=u.width*t/100,d=u.height*t/100;if(i){if(i.width>a.width)return!1;if(i.height>a.height)return!1;a=i}return!(c.left+u.width<o+l)&&(!(c.left+l>a.width)&&(!(c.top+u.height<s+d)&&!(c.top+d>a.height)))}},33614:function(e,t,r){"use strict";r.d(t,{NodeMutationObserver:function(){return n}});var n=function(){function e(){}return e.prototype.connectMutator=function(t){if(this.mutationObserver)throw new Error("{Observer #"+t.getObserverId()+"} MutationObserver already connected to observer");var r=document.querySelector(t.getContainerQuery());r instanceof HTMLElement&&(this.mutationObserver=new MutationObserver((function(r){r.forEach((function(r){if(r.addedNodes)for(var n=0;n<r.addedNodes.length;n++){var i=r.addedNodes[n];if(i instanceof HTMLElement){var o=e.resolveNodes(i,t).filter((function(e){return!!e}));o&&(o.forEach((function(e){t.add(e)})),t.scan())}}}))})),this.mutationObserver.observe(r,{childList:!0,subtree:!0,attributes:!1,characterData:!1}))},e.prototype.disconnectMutator=function(e){e.isRunning()&&this.mutationObserver&&this.mutationObserver.disconnect()},e.resolveNodes=function(e,t){var r=[];if(t.getSelectorQuery(!1).split(",").forEach((function(t){if(e.matches(t))return r.push(e),!1})),r.length<1){var n=e.querySelectorAll(t.getSelectorQuery(!1));r=Array.from(n)}return r},e}()},16013:function(e,t,r){"use strict";r.d(t,{NodeObserver:function(){return u}});var n=r(97316),i=r(3369),o=r(59326),s=r(8830),a="data-stat-item",c="data-stat-id",u=function(){function e(e,t,r,n,i,s){if(void 0===r&&(r=""),void 0===n&&(n=!1),void 0===i&&(i=""),this.observerId=e,this.itemSelector=t,this.container=r,this.isUnifyNodes=n,this.platform=i,this.getExtraItemParams=s,this.trackingItems={},this._debounceTimeout=20,this.uniqueNodeCounter=0,this.nodes=[],this.isWatching=!1,this.mutatorList=[],(0,o.observersRegister)(this),!this.itemSelector.types&&!this.itemSelector.selectors)throw new Error("Empty itemSelector definition");this.container||(this.container=this.observerId)}return Object.defineProperty(e.prototype,"debounceTimeout",{set:function(e){this._debounceTimeout=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemReachedCallback",{set:function(e){this._itemReachedCallback=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"preCheckReachedCallback",{set:function(e){this._preCheckReachedCallback=e},enumerable:!1,configurable:!0}),e.prototype.getObserverId=function(){return this.observerId},e.prototype.getItemSelector=function(){return this.itemSelector},e.prototype.getPlatform=function(){return this.platform},e.prototype.add=function(e){this.nodes.push(e)},e.prototype.getTrackingItems=function(){return this.trackingItems},e.prototype.addMutators=function(e){this.mutatorList=this.mutatorList.concat(e)},e.prototype.isRunning=function(){return this.isWatching},e.prototype.watch=function(){this.isWatching||(this.update(),this.startObserving(),this.connectMutators(),this.isWatching=!0)},e.prototype.stop=function(){this.isWatching&&(this.trackUntracked(),this.stopObserving(),this.disconnectMutators(),this.isWatching=!1)},e.prototype.scan=function(){this.viewportScanner()},e.prototype.trackUntracked=function(){var e=this.getTrackingItems();for(var t in e)if(e[t]){var r=e[t];!r.isTracked&&r.isReached&&(this.track(r),this.persist(r))}},e.prototype.connectMutators=function(){var e=this;this.mutatorList.forEach((function(t){t.connectMutator(e)}))},e.prototype.disconnectMutators=function(){var e=this;this.mutatorList.forEach((function(t){t.disconnectMutator(e)}))},e.prototype.getContainerQuery=function(){var e=this.container.substr(0,1);return"#"===e||"."===e?this.container:'[data-stat-container="'+(this.container?this.container:this.observerId)+'"]'},e.prototype.getSelectorQuery=function(e){void 0===e&&(e=!0);var t=this.getContainerQuery(),r=[];return this.itemSelector.selectors?r=this.itemSelector.selectors.split(",").map((function(r){return e?t+" "+r:r})):this.itemSelector.types&&(r=this.itemSelector.types.split(",").map((function(r){return e?t+" ["+'data-stat-item^="'+r+'|"]':'[data-stat-item^="'+r+'|"]'}))),r.join(",")},e.prototype.update=function(){var e=document.querySelectorAll(this.getSelectorQuery());this.nodes=Array.from(e)},e.parseStatAttribute=function(e){var t=e.getAttribute(a),r=null==t?void 0:t.split("|");return r?{type:r[0],ownerId:parseInt(r[1]),itemId:r[2]}:{type:"",ownerId:0,itemId:0}},e.prototype.getNodeKey=function(e,t){var r=String(t.itemId);this.isUnifyNodes&&(this.unifyNode(e),r=r+"_"+e.getAttribute(c));return this.observerId+"_"+r},e.prototype.isItemReached=function(e){return!(void 0!==this._preCheckReachedCallback&&!this._preCheckReachedCallback(e))&&this.isReached(e)},e.prototype.filterItem=function(e){return!e.isTracked&&!e.isReached&&(this.isItemReached(e.node)?(this.track(e),this.persist(e),!1):(this.persist(e),!0))},e.prototype.track=function(e){e.isTracked||(e.viewEnd=Date.now(),e.duration=e.viewEnd-e.viewStart,this._itemReachedCallback(e),e.isReached=!1,e.isTracked=!0)},e.prototype.persist=function(e){this.trackingItems[e.key]=e},e.prototype.getTrackingItem=function(t){var r=e.parseStatAttribute(t);if(!r.type||!r.itemId)return null;var n=this.getNodeKey(t,r);return n?n in this.trackingItems?this.trackingItems[n]:this.createTrackingItem(t,r):null},e.prototype.createTrackingItem=function(e,t){var r=this.getNodeKey(e,t),i=this.getExtraItemParams&&this.getExtraItemParams()||{};return this.trackingItems[r]=(0,n.__assign)((0,n.__assign)({},i),{key:r,type:t.type,observerId:this.observerId,ownerId:t.ownerId,itemId:t.itemId,isTracked:!1,isReached:!1,viewStart:0,viewEnd:0,duration:0,node:e,viewTimer:0,data:{},platform:this.getPlatform(),city:(0,s.getStatCity)(),screen:(0,s.getStatScreen)()}),this.trackingItems[r]},e.prototype.getNextUnifyId=function(){return++this.uniqueNodeCounter},e.prototype.unifyNode=function(e){e.getAttribute(c)||e.setAttribute(c,String(this.getNextUnifyId()))},e.prototype.startObserving=function(){var e=this;this.update(),this.viewportScanner=(0,i.debounce)((function(){e.nodes=e.nodes.filter((function(t){var r=e.getTrackingItem(t);return!!r&&e.filterItem(r)}))}),this._debounceTimeout),this.scrollEventListener=function(){return e.scan()},document.addEventListener("scroll",this.scrollEventListener,{passive:!0}),this.scan()},e.prototype.stopObserving=function(){document.removeEventListener("scroll",this.scrollEventListener),this.nodes=[],this.viewportScanner=function(){},this.scrollEventListener=function(){}},e}()},51583:function(e,t,r){"use strict";r.d(t,{NodeViewObserver:function(){return o}});var n=r(97316),i=r(16013);var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.filterItem=function(e){return!e.isTracked&&(e.isReached&&!this.isItemReached(e.node)?(this.track(e),this.persist(e),!1):(this.isItemReached(e.node)&&this.view(e),this.persist(e),!0))},t.prototype.view=function(e){var t=this;e.isTracked||(e.isReached=!0,e.viewStart||(e.viewStart=Date.now()),e.viewTimer&&(clearTimeout(e.viewTimer),e.viewTimer=0),e.viewTimer=window.setTimeout((function(){var r=e.node;!t.isItemReached(r)||function(e){var t=e.viewStart;return Date.now()-t>3e4}(e)?t.track(e):t.view(e)}),3e3))},t.prototype.track=function(t){t.viewTimer&&(clearTimeout(t.viewTimer),t.viewTimer=0),e.prototype.track.call(this,t)},t}(i.NodeObserver)},59326:function(e,t,r){"use strict";r.d(t,{observersRegister:function(){return i},observersStop:function(){return o},observersRescan:function(){return s}});var n={};function i(e){e.getObserverId()in n&&(n[e.getObserverId()].stop(),delete n[e.getObserverId()]),n[e.getObserverId()]=e}function o(){for(var e in n){if(n[e])n[e].stop()}}function s(){for(var e in n){if(n[e])n[e].scan()}}},8830:function(e,t,r){"use strict";r.d(t,{getUtmMarks:function(){return s},getStatCategoryId:function(){return a},getStatScreen:function(){return c},getStatOwnerId:function(){return u},getStatCity:function(){return l}});r(97316);var n=r(90302),i="market_stat_data";function o(){var e=n.vkSessionStorage.getItem(i);return e?JSON.parse(e):{}}var s=function(){var e=o();return{utm_source:e.utm_source,utm_medium:e.utm_medium,utm_campaign:e.utm_campaign,utm_campaign_id:e.utm_campaign_id,utm_content:e.utm_content}},a=function(){return o().category_id};function c(){return o().screen||window.cur.module}function u(){return o().ownerId||0}function l(){return o().city}},9723:function(e,t,r){"use strict";r.d(t,{isDebugEnabled:function(){return o}});var n=r(51988),i=void 0,o=function(){return void 0!==i?i:i=!!n.default.get("reactions.debug_enabled")}}}]);