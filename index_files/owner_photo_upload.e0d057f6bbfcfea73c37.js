(self.webpackChunkvk=self.webpackChunkvk||[]).push([[2807],{5735:function(t,e,r){"use strict";var o=r(85489),n=r(49751),i=r(86205),a=r(46950),l=r(96966),s=r(19388),c=r(22297),u=r(93449);e.default=function(t){void 0===t&&(t={});var e=t.position||"bottom",r=!(!t.type||t.image),d={class:o.default.class("SnackbarItem__cell",{left:!0,image:!!t.image,top:t.avatar&&"left"===t.avatar_position,icon:r},"_")},_={class:o.default.class("SnackbarItem__cell",{right:!0,avatar:!!t.avatar},"_")},h=!1,p=!1;if(t.type){h=!0;var v=null;switch(t.type){case 1:v=(0,i.default)((0,l.getSnackbarDone24Icon)());break;case 2:v=(0,i.default)((0,s.getSnackbarError24Icon)());break;case 3:v=(0,i.default)((0,c.getFavorites24Icon)());break;case 4:v=(0,i.default)((0,u.getErrorFill24Icon)())}d.inner={class:"SnackbarItem__icon",inner:v}}t.image&&(h=!0,d.inner={class:"SnackbarItem__image",inner:{tag:"img",src:t.image}});t.action&&(p=!0,_.inner=(0,n.default)({theme:"none",class:"SnackbarItem__action",url:t.action.url,target:t.action.target,on_click:t.action.onclick,use_native_onclick:!0,inner:Wd.wrap(t.action.text),attrs:t.action.attrs}));if(t.avatar){var f={tag:"img",class:"SnackbarItem__avatar",src:t.avatar};t.avatar_position&&"right"!==t.avatar_position?"left"===t.avatar_position&&(h=!0,d.inner=f):(p=!0,_.inner=f)}return{style:t.style?t.style:"",class:["SnackbarItem_"+t.id,"SnackbarItem--"+e+" ",o.default.class("SnackbarItem",{static:!!t.static,vertical:!!t.vertical,hasIcon:r}),t.className||t.class],attrs:{"data-snackbar-id":t.id},inner:[{class:"SnackbarItem__table",inner:[h?d:null,t.text?{class:o.default.class("SnackbarItem__cell",{text:!0},"_"),inner:{class:"SnackbarItem__text",inner:(0,a.isObject)(t.text)?t.text:Wd.wrap(t.text)}}:null,p?_:null]}]}}},77212:function(t,e,r){"use strict";r.d(e,{init:function(){return b},close:function(){return O},SNACKBAR_POSITION_MAIL:function(){return c},SNACKBAR_TYPE_SUCCESS:function(){return v},SNACKBAR_TYPE_ERROR:function(){return f},SNACKBAR_TYPE_BOOKMARK:function(){return S},SNACKBAR_TYPE_BULLYING:function(){return g}});var o=r(9046),n=r(1730),i=r(86658),a=r(54412),l=r(39161);window.Snackbar={init:b,close:O,_onActionClick:function(t,e){var r=p[e];if(!r)return void(0,o.hide)(e);var n=r.callback,i=r.url;n?"function"==typeof n?n.call(null,t,{id:e,url:i}):Wd.handle2(n,t,{id:e,url:i}):(0,o.hide)(e)},_onRestoreClick:function(t,e,r){var n=e.closest(".SnackbarItem"),a=(0,o.domData)(n,"snackbar-id"),l=p[a];t.stopPropagation(),t.preventDefault();var s=l.callback;s&&("function"==typeof s?s.call(null,t,{id:a,url:r}):Wd.handle2(s,t,{id:a,url:r}));O(a),i.default.click(r,null,{url_params:{_ajax:1,_snackbar:1}})}};var s="common",c="mail",u="SnackbarItem_added",d="SnackbarItem_removed",_="SnackbarItem--closing",h=0,p={},v=1,f=2,S=3,g=4,m="touchstart",w="touchmove",A="touchcancel touchend",E=[];function b(t){if(!l.SAKIntegration.isIntegrated){var e=isFinite(t.duration)?t.duration:5e3,r=h++,i=t.action&&t.action.callback,a=t.action&&t.action.url;t.position=t.position||s;var d=t.position;t.id=r,i&&!t.action.onclick&&(t.action.onclick=["Snackbar._onActionClick","event",r]),t.bottom&&(t.style="bottom: "+t.bottom+"px");var _,v=Wd.elem(SnackbarItem(t));return function(t,e){if(e.position===s)(0,o.append)(t,document.body);else if(e.position===c){var r="msg"===window.store.mail.cur.page?(0,n.$)(".messenger__layer_page .messenger__header"):(0,n.$)(".messenger__layer_convo .messenger__header");(0,o.append)(t,r)}setTimeout((function(){t.classList.add(u)}),100)}(v,t),e&&(_=T(r,e)),(0,o.addEvent)(v,m,x,{passive:!0}),(0,o.addEvent)(v,w,U,{capture:!1}),(0,o.addEvent)(v,A,M,{passive:!0}),p[r]={id:r,timer:_,callback:i,url:a,duration:e,position:d},E.push(r),P(),r}l.SAKIntegration.sendMessage("show_snackbar",{type:t.type,text:t.text})}function P(){var t=(E=E.filter((function(t){var e=p[t],r=I(t);return!(!e||!r)}))).reduce((function(t,e){var r=p[e];return t[r.position]||(t[r.position]=[]),t[r.position].push(e),t}),{});Object.keys(t).forEach((function(e){var r=t[e],n=0,i=e===c?8:12;r.forEach((function(t,r){var a=I(t),l=(0,o.getH)(a);p[t].vertical=e===c?n:-n,o.setStyle.transform(a,1,[0,p[t].vertical]),n+=l+i}))}))}function T(t,e){return setTimeout((function(){O(t,!1)}),e)}function O(t,e){var r=p[t],n=I(t);r&&(r.timer&&clearTimeout(r.timer),delete p[t]),n&&function(t,e){var r=600;if((0,o.removeEvent)(t,m,x,{passive:!0}),(0,o.removeEvent)(t,w,U,{capture:!1}),(0,o.removeEvent)(t,A,M,{passive:!0}),e)return(0,o.remove)(t),void P();t.classList.add(_);if(!t)return;t.classList.add(d),setTimeout((function(){(0,o.remove)(t),P()}),r)}(n,e)}function I(t){return(0,n.$)(".SnackbarItem_"+t)}onDOMReady((function(){onBodyResize(P)}));var C=!1,y=null,N=!1,k=0,R=!1,L=(0,o.getCw)();function x(t){if(L=(0,o.getCw)(),t.touches&&t.touches.length>1)C=!1;else{var e=t.target.closest(".SnackbarItem");e.classList.add("SnackbarItem--dragging");var r=(0,o.domData)(e,"snackbar-id");if(L>=a.DESKTOP_WIDTH&&(R=!0),p[r].position===c){R=!1;var i=(0,n.$)(".messenger");L=(0,o.getW)(i),p[r].parentXY=(0,o.getXY)(i)}else p[r].parentXY=(0,o.getXY)(bodyNode);p[r].timer&&clearTimeout(p[r].timer),y=t.touches[0],k=t.touches[0].clientX,C=!0,N=r,document.body.style.overflow="hidden"}}function U(t){var e=N;if(t.preventDefault(),t.touches&&t.touches.length>1)C=!1;else if(y&&C){var r=t.touches[0],n=t.target.closest(".SnackbarItem"),i=-(k-r.clientX);R&&(i=Math.min(i,0));var a=(0,o.getX)(n),l=((0,o.getW)(n)+i)/2+a-p[e].parentXY[0],s=l>=.95*L||l<=L/.95-L;p[e].canClose=s,o.setStyle.transform(n,1,[i,p[e].vertical])}}function M(t){var e=t.target.closest(".SnackbarItem");e.classList.remove("SnackbarItem--dragging");var r=(0,o.domData)(e,"snackbar-id"),n=p[r];if(p[r].dragging=!1,N=!1,document.body.style.overflow="visible",n.canClose){var i=(0,o.getX)(e)>0?(0,o.getCw)():-(0,o.getCw)();return(0,o.getCw)()>=a.DESKTOP_WIDTH&&(i=(0,o.getX)(e)>(0,o.getCw)()/2?(0,o.getCw)():-(0,o.getCw)()),o.setStyle.transform(e,1,[i,p[r].vertical||0]),void O(r)}p[r].timer=T(r,n.duration),e&&o.setStyle.transform(e,1,[0,p[r].vertical||0])}},92424:function(t,e,r){"use strict";r.d(e,{init:function(){return n.init},close:function(){return n.close},SNACKBAR_POSITION_MAIL:function(){return n.SNACKBAR_POSITION_MAIL},SNACKBAR_TYPE_SUCCESS:function(){return n.SNACKBAR_TYPE_SUCCESS},SNACKBAR_TYPE_ERROR:function(){return n.SNACKBAR_TYPE_ERROR},SNACKBAR_TYPE_BOOKMARK:function(){return n.SNACKBAR_TYPE_BOOKMARK},SNACKBAR_TYPE_BULLYING:function(){return n.SNACKBAR_TYPE_BULLYING}});var o=r(5735),n=r(77212);o.default;window.SnackbarItem=o.default},92505:function(t,e,r){"use strict";var o=r(49751),n=r(86205),i=r(1374),a=r(55098),l=r(35909);e.default=function(t){return void 0===t&&(t={}),{inner:[{inner:[{inner:[(0,o.default)({inner:[(0,n.default)({icon:t.isLeftActionBack?(0,i.getBackOutline28Icon)():(0,a.getCancelOutline28Icon)()})],theme:"header",class:"ModalPage__headerButton ModalPage__headerButton--close",onClick:t.onLeftActionClick,use_native_onclick:!0,is_icon:!0}),{inner:[t.title],class:"ModalPage__headerTitle",tag:"div"},t.isConfirmActionAvailable?(0,o.default)({inner:[(0,l.Icon28DoneOutline)()],theme:"header",class:"ModalPage__headerButton ModalPage__headerButton--confirm",onClick:t.onConfirmClick,use_native_onclick:!0,is_icon:!0}):null],class:"ModalPage__header",tag:"div"},{inner:[t.content],class:"ModalPage__content",id:t.contentId,tag:"div"}],class:"ModalPage__wrapper",tag:"div"}],class:"Popup ModalPage",tag:"div"}}},58545:function(t,e,r){"use strict";r.d(e,{OwnerAvatarEditPreview:function(){return n}});var o=r(46950);function n(t){void 0===t&&(t={});var e=(0,o.winToUtf)(t.ownerName);return{inner:[{inner:[(0,o.getLang)("mobile_owner_avatar_edit_preview_header")],class:"OwnerAvatarEditPreview__header",tag:"div"},{inner:[{class:"OwnerAvatarEditPreviewThumbnail__preview",tag:"div"},{inner:[{inner:[e],class:"OwnerAvatarEditPreviewThumbnail__ownerName",tag:"div"},{inner:[(0,o.getLang)("mobile_owner_avatar_edit_preview_thumbnail_description")],class:"OwnerAvatarEditPreviewThumbnail__description",tag:"div"}],class:"OwnerAvatarEditPreviewThumbnail__content",tag:"div"}],class:"OwnerAvatarEditPreviewThumbnail",tag:"div"}],class:"OwnerAvatarEditPreview",tag:"div"}}},3664:function(t,e,r){"use strict";r.d(e,{OwnerAvatarEditPublisherStep:function(){return a}});var o=r(49751),n=r(42450),i=r(80540);function a(t){void 0===t&&(t={});var e=t.avatarSrc,r=t.config||{},a=r.new_avatar_story_data&&r.new_avatar_story_data.shouldCreateNewAvatarStory;return{inner:[{inner:[(0,i.Avatar)({mix:"OwnerAvatarEditPublisherStep__avatar",size:192,src:e}),{inner:[r.description],class:"OwnerAvatarEditPublisherStep__description",tag:"div"}],class:"OwnerAvatarEditPublisherStep__previewWrapper",tag:"div"},{inner:[(0,n.default)({type:"switcher",name:"OwnerAvatarEditPublisherStepPublishPost",label:r.publish_post_checkbox_label,checked:!0,onChange:t.onPostPublishChange}),a?(0,n.default)({type:"switcher",name:"OwnerAvatarEditPublisherStepPublishStory",label:r.publish_story_checkbox_label,checked:!0,onChange:t.onStoryPublishChange}):null],class:"OwnerAvatarEditPublisherStep__checkboxes",tag:"div"},(0,o.default)({inner:[r.save_button_done],class:"OwnerAvatarEditPublisherStep__submitButton",size:"large",use_native_onclick:!0,onClick:t.onSaveClick})],class:"OwnerAvatarEditPublisherStep",tag:"div"}}},53590:function(t,e,r){"use strict";var o=r(90332),n=r(91997),i=r(9046),a=r(51308),l=r(36557),s=r(5321),c=r(58545),u=r(92505),d=r(11393),_=r(61124),h=r(3664),p=r(9592),v=r(49751),f=r(86353),S=r(92424),g=r(3811),m=r(46552),w=new(function(){function t(){var t=this;this.thumbnailCreatorHandler=function(e){var r;if(t.context.cropperResult=e,t.context.mode===p.OwnerAvatarEditorMods.UPLOAD||t.context.mode===p.OwnerAvatarEditorMods.SELECT)return(null===(r=t.context.publisherStep)||void 0===r?void 0:r.is_enabled)?t.openPublisherStep(e):t.saveOwnerAvatar().catch(console.error).then((function(e){var r,o,n=e[1];t.showDoneBoxAfterAvatarChange(!0,null===(o=null===(r=t.context.publisherStep)||void 0===r?void 0:r.new_avatar_story_data)||void 0===o?void 0:o.shouldCreateNewAvatarStory,null==n?void 0:n.ownerId,null==n?void 0:n.id)})).finally((function(){var e;null===(e=t.thumbnailCreator)||void 0===e||e.close(),t.closePublisherStep()})),!0;var o=e.crop,i=(0,n.getCropString)(o.x,o.y,o.width,o.height,!1);return t.sendCropUpdate(t.context.ownerId,i,t.context.hash||"").then((function(t){t[0]&&window.nav.go(t[0])}))},this.onPostPublishChange=function(e){var r=(void 0===e?{}:e).checked;t.context.mode===p.OwnerAvatarEditorMods.UPLOAD&&(0,m.sendUploadPhotoAnalytics)(r?m.UploadPhotoAnalyticsEventType.EVENT_SHARE_TO_FEED_TURN_ON:m.UploadPhotoAnalyticsEventType.EVENT_SHARE_TO_FEED_TURN_OFF)},this.onStoryPublishChange=function(e){var r=(void 0===e?{}:e).checked;t.context.mode===p.OwnerAvatarEditorMods.UPLOAD&&(0,m.sendUploadPhotoAnalytics)(r?m.UploadPhotoAnalyticsEventType.EVENT_SHARE_TO_STORY_TURN_ON:m.UploadPhotoAnalyticsEventType.EVENT_SHARE_TO_STORY_TURN_OFF)},this.showDoneBoxAfterAvatarChange=function(t,e,r,o){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===r&&(r=0),void 0===o&&(o=0);var n=[],a={tag:"a",className:"link",href:"/story"+r+"_"+o,onclick:"NewAvatarStory.openNewAvatarStory(event, "+r+", "+o+")",inner:(0,i.getLang)("mobile_stories_new_avatar_story_success_box_open_story")};t&&e?n.push({inner:(0,i.getLang)("profile_avatar_changed_with_post_and_story_title"),attrs:{style:"margin-bottom: 8px;"}},a):t?r>0?n.push({inner:(0,i.getLang)("profile_avatar_changed_with_post_title")}):n.push({inner:(0,i.getLang)("groups_avatar_changed_with_post_title")}):e?n.push({inner:(0,i.getLang)("profile_avatar_changed_with_story_title"),attrs:{style:"margin-bottom: 8px;"}},a):r>0?n.push({inner:(0,i.getLang)("profile_avatar_changed_title")}):n.push({inner:(0,i.getLang)("groups_avatar_changed_title")}),S.init({type:S.SNACKBAR_TYPE_SUCCESS,text:{inner:n},duration:5*g.SECOND})},this.selectPhoto=function(e,r,o){void 0===o&&(o="");var n=e?p.OwnerAvatarEditorMods.SELECT:p.OwnerAvatarEditorMods.EDIT;return t.context={ownerId:r,ownerName:o,mode:n,selectedPhotoId:e},t.initUI(o).then((function(o){t.fetchUploadConfig({owner_id:r,photo_id:e,mode:n}).then((function(e){t.context.publisherStep=e.publisherStep,t.context.hash=e.hash;var r=e.photo,i=e.rect;o.setSuccessHandler(t.thumbnailCreatorHandler),n===p.OwnerAvatarEditorMods.EDIT?(0,l.getCroppedImage)(r.src,i[0],i[1],i[2],i[3]).then((function(t){o.getFromPhoto(t.src)})).catch((function(t){throw t})):o.getFromPhoto(r.src)})).catch((function(t){throw t}))})).catch((function(t){console.error(t),S.init({text:(0,i.getLang)("mobile_unknown_error"),type:S.SNACKBAR_TYPE_ERROR})})),!1}}return t.prototype.initUI=function(t){var e=this;return void 0===t&&(t=""),(0,o.loadThumbnailCreator)().then((function(r){return e.thumbnailCreator=new r({minSourceWidth:400,minSourceHeight:400,minCroppedHeight:400,minCroppedWidth:400,maxSourceWidth:8192,maxSourceHeight:8192,maxCroppedHeight:8192,maxCroppedWidth:8192,previewBlock:(0,f.partConfigEnabled)("mvk_owner_new_avatar_preview_block")&&(0,c.OwnerAvatarEditPreview)({ownerName:t}),cropperOptions:{preview:".OwnerAvatarEditPreviewThumbnail__preview"}}),e.thumbnailCreator.initPopup(),e.thumbnailCreator}))},t.prototype.onUploadInputChange=function(t){var e=this;this.context={ownerId:Number(t.dataset.ownerId),ownerName:String(t.dataset.ownerName),mode:p.OwnerAvatarEditorMods.UPLOAD},this.prepareUpload().then((function(){var r;if(!(null===(r=null==t?void 0:t.files)||void 0===r?void 0:r[0]))throw new Error;return e.preparePhoto(t.files[0]).then((function(){e.startCrop()}))})).catch((function(t){console.error(t),S.init({text:"UploadError"===t.name?t.message:(0,i.getLang)("mobile_unknown_error"),type:S.SNACKBAR_TYPE_ERROR})}))},t.prototype.prepareUpload=function(){var t=this;return this.initUI(this.context.ownerName).then((function(){return t.fetchUploadConfig({owner_id:t.context.ownerId,mode:p.OwnerAvatarEditorMods.UPLOAD}).then((function(e){t.context.uploader=new s.UploadPhoto(e.uploadConfig),t.context.publisherStep=e.publisherStep})).catch((function(e){var r;throw null===(r=t.thumbnailCreator)||void 0===r||r.close(),e}))}))},t.prototype.preparePhoto=function(t){var e=this;return this.context.uploader?this.context.uploader.validate(t).then((function(){var r;return null===(r=e.context.uploader)||void 0===r?void 0:r.upload(t).then((function(t){return e.getPhotoSrcFromRawObject(e.context.ownerId,JSON.stringify(t)).then((function(r){e.context.photo=t,e.context.src=r}))}))})).catch((function(t){var r;if(null===(r=e.thumbnailCreator)||void 0===r||r.close(),t.text){var o=new Error(t.text);throw o.name="UploadError",o}})):Promise.reject()},t.prototype.startCrop=function(){if(!this.thumbnailCreator||!this.context.src)throw new Error;this.thumbnailCreator.setSuccessHandler(this.thumbnailCreatorHandler),this.thumbnailCreator.getFromPhoto(this.context.src)},t.prototype.saveOwnerAvatar=function(t,e){var r;void 0===t&&(t=!0),void 0===e&&(e=!0);var o=this.context.cropperResult,i=o.crop,l=o.cropped,s=null===(r=this.context.publisherStep)||void 0===r?void 0:r.new_avatar_story_data,c=(0,n.getCropString)(i.x,i.y,i.width,i.height,!1),u=Promise.resolve(void 0);e&&(null==s?void 0:s.shouldCreateNewAvatarStory)&&(u=a.NewAvatarStory.initNewAvatarStory(s,this.context.ownerId,l.base64));var d=this.context.mode===p.OwnerAvatarEditorMods.UPLOAD?this.sendPhotoAvatarSave(this.context.ownerId,JSON.stringify(this.context.photo),c,t?0:1):this.sendPhotoAvatarSelect(this.context.ownerId,this.context.selectedPhotoId||"",c,this.context.hash||"",t?0:1);return Promise.all([d,u.then((function(t){return!((null==t?void 0:t.response)&&t.response.upload_result&&s)||a.NewAvatarStory.saveNewAvatarStory(s,t.response.upload_result)}))]).then((function(t){return t[0]&&window.nav.go(t[0][0]),t}))},t.prototype.openPublisherStep=function(t){var e;if(!this.publisherStepPopup){var r=(0,u.default)({title:null===(e=this.context.publisherStep)||void 0===e?void 0:e.title,isLeftActionBack:!0,onLeftActionClick:"OwnerPhotoUpload2.closePublisherStep();",content:(0,h.OwnerAvatarEditPublisherStep)({avatarSrc:t.cropped.base64,config:this.context.publisherStep,onSaveClick:"OwnerPhotoUpload2.onPublisherStepDone()",onPostPublishChange:"OwnerPhotoUpload2.onPostPublishChange",onStoryPublishChange:"OwnerPhotoUpload2.onStoryPublishChange"})}),o=d.default.elem(r);this.publisherStepPopup=_.default.open(o,!0)}},t.prototype.onPublisherStepDone=function(){var t,e=this,r=this.publisherStepPopup.querySelector('input[name="OwnerAvatarEditPublisherStepPublishPost"]').checked,o=null===(t=this.publisherStepPopup.querySelector('input[name="OwnerAvatarEditPublisherStepPublishStory"]'))||void 0===t?void 0:t.checked;v.default.setDisabled(this.publisherStepPopup.querySelector(".ModalPage__headerButton--close"),!0),v.default.setLoading(this.publisherStepPopup.querySelector(".OwnerAvatarEditPublisherStep__submitButton"),!0),this.saveOwnerAvatar(r,o).catch(console.error).then((function(t){var n=t[1];e.showDoneBoxAfterAvatarChange(r,o,e.context.ownerId,null==n?void 0:n.id)})).finally((function(){var t;null===(t=e.thumbnailCreator)||void 0===t||t.close(),e.closePublisherStep()}))},t.prototype.closePublisherStep=function(){var t;null===(t=this.thumbnailCreator)||void 0===t||t.unlockControlButtons(),_.default.close(this.publisherStepPopup),delete this.publisherStepPopup},t.prototype.fetchUploadConfig=function(t){return window.ajax.post("/profile.php",{act:"upload_owner_photo",oid:t.owner_id,mode:t.mode,photo_id:t.photo_id}).promise.then((function(t){if(!t.json)throw new Error;return t.json.data[0]}))},t.prototype.getPhotoSrcFromRawObject=function(t,e){return window.ajax.post("/profile.php",{act:"get_image_src",photo:e,oid:t}).promise.then((function(t){if(!t.json||!t.json.data)throw new Error;if(null===t.json.data[0]){var e=new Error(t.json.data[1]);throw e.name="UploadError",e}return t.json.data[0]}))},t.prototype.sendCropUpdate=function(t,e,r){return window.ajax.post("/profile.php",{act:"update_avatar_crop",square_crop:e,oid:t,hash:r}).promise.then((function(t){if(!t.json)throw new Error;return t.json.data}))},t.prototype.sendPhotoAvatarSelect=function(t,e,r,o,n){return void 0===n&&(n=0),window.ajax.post("/profile.php",{act:"select_avatar",rect_crop:r,photo_raw:e,oid:t,hash:o,skip_post:n}).promise.then((function(t){if(!t.json)throw new Error;return t.json.data}))},t.prototype.sendPhotoAvatarSave=function(t,e,r,o){return void 0===o&&(o=0),window.ajax.post("/profile.php",{act:"save_avatar",rect_crop:r,photo:e,oid:t,skip_post:o}).promise.then((function(t){if(!t.json)throw new Error;return t.json.data}))},t}());window.OwnerPhotoUpload2=w},90332:function(t,e,r){"use strict";r.d(e,{loadThumbnailCreator:function(){return i}});var o,n=r(86900);function i(){return o?Promise.resolve(o):Promise.all([r.e(4578),r.e(1738),r.e(1070)]).then(r.bind(r,55085)).then((function(t){return o=t.ThumbnailCreator})).catch((function(t){return(0,n.statlogsValueEvent)("mvk_thumbnail_creator_event",null,"chunk_error",t.name)}))}},13677:function(t,e,r){"use strict";r.d(e,{initNewAvatarStory:function(){return _},saveNewAvatarStory:function(){return h},openNewAvatarStory:function(){return p}});var o=r(97316),n=r(53502),i=r(36557),a=r(53120),l=r(9046),s=r(52260),c=r(29629),u=r(92424),d=r(15797);function _(t,e,r){return(0,n.addStatic)([t.newAvatarStoryFontsCssPath]).then((function(){return Promise.all([(0,i.loadFontFacePromise)("TT Commons",{weight:500}),(0,i.loadFontFacePromise)("TT Commons",{weight:600})])})).then((function(){return Promise.all([(0,a.generateNewAvatarStory)({newAvatarUrl:r,oldAvatarUrl:t.currentPhoto,title:(0,l.getLang)("mobile_stories_new_avatar_story_title_header"),pollStickerOptions:{title:(0,l.getLang)("mobile_stories_new_avatar_story_poll_sticker_title"),voteButtonText:(0,l.getLang)("mobile_stories_poll_sticker_vote_button_text")}}),(0,s.createNewAvatarStoryPoll)(t.newAvatarStoryCreatePollHash).then((function(t){return t||Promise.reject()})).then((function(r){return(0,c.getStoryUploadUrl)({clickable_stickers:JSON.stringify({original_width:1080,original_height:1920,clickable_stickers:[(0,s.getNewAvatarStoryPollClickableStickerMeta)(e,r)]}),hash:t.newAvatarStoryUploadUrlHash,entry_point:d.StoryEntryPoint.CHANGE_AVATAR,ref:window.cur.module})}))]).then((function(t){var e=(0,o.__read)(t,2),r=e[0],n=e[1];return window.StoryPublisher.uploadStoryBlobToServer(r,n)}))}))}function h(t,e){return(0,c.saveStoryOnServer)(e,t.newAvatarStorySaveHash).then((function(t){return t.story})).catch((function(t){u.init({type:u.SNACKBAR_TYPE_ERROR,text:t&&t.message||(0,l.getLang)("global_error")})}))}function p(t,e,r){t.metaKey||t.ctrlKey||(t.preventDefault(),window.Stories.init(e+"/"+e+"_"+r,{source:d.StorySource.PROFILE_SNACKBAR}))}},51308:function(t,e,r){"use strict";r.d(e,{NewAvatarStory:function(){return n}});var o=r(13677),n={openNewAvatarStory:o.openNewAvatarStory,saveNewAvatarStory:o.saveNewAvatarStory,initNewAvatarStory:o.initNewAvatarStory};window.NewAvatarStory=n},62643:function(t,e,r){"use strict";r.d(e,{setLoginConfig:function(){return o},setApiConfig:function(){return n},api:function(){return i},login:function(){return a}});var o=function(t){return window.vkApi?window.vkApi.setLoginConfig(t):console.error("[VKJS]: setLoginConfig didn't allowed. Use makeAuthAndApiGlobal function")},n=function(t){return window.vkApi?window.vkApi.setApiConfig(t):console.error("[VKJS]: setApiConfig didn't allowed. Use makeAuthAndApiGlobal function")},i=function(t,e,r,o){return void 0===o&&(o={}),window.vkApi?window.vkApi.api(t,e,r,o):Promise.reject("[VKJS][API]: api didn't allowed. Use makeAuthAndApiGlobal function")},a=function(t,e,r,o){return window.vkApi?window.vkApi.login(t,e,r,o):Promise.reject("[VKJS]: login didn't allowed. Use makeAuthAndApiGlobal function")}},70189:function(t,e,r){"use strict";r.d(e,{drawRoundedImage:function(){return o},roundRect:function(){return n},getCoverSize:function(){return i}});var o=function(t,e,r,o,n,i,a,l,s,c,u){var d=l||o,_=s||n,h=c||i||e.naturalWidth,p=u||a||e.naturalHeight;t.beginPath(),t.arc(d+r,_+r,r,Math.PI,Math.PI+Math.PI/2),t.lineTo(d+h-r,_),t.arc(d+h-r,_+r,r,Math.PI+Math.PI/2,2*Math.PI),t.lineTo(d+h,_+p-r),t.arc(d+h-r,_+p-r,r,2*Math.PI,Math.PI/2),t.lineTo(d+r,_+p),t.arc(d+r,_+p-r,r,Math.PI/2,Math.PI),t.closePath(),t.save(),t.clip(),t.drawImage(e,o,n,i,a,l,s,c,u),t.restore()},n=function(t,e,r,o,n,i){var a={};if("number"==typeof i)a={tl:i,tr:i,br:i,bl:i};else{var l={tl:0,tr:0,br:0,bl:0};for(var s in l)a[s]=a[s]||l[s]}t.save(),t.beginPath(),t.moveTo(e+a.tl,r),t.lineTo(e+o-a.tr,r),t.quadraticCurveTo(e+o,r,e+o,r+a.tr),t.lineTo(e+o,r+n-a.br),t.quadraticCurveTo(e+o,r+n,e+o-a.br,r+n),t.lineTo(e+a.bl,r+n),t.quadraticCurveTo(e,r+n,e,r+n-a.bl),t.lineTo(e,r+a.tl),t.quadraticCurveTo(e,r,e+a.tl,r),t.closePath(),t.restore()},i=function(t,e,r,o,n,i){var a,l,s=t/e;return s>r/o?(a=o,l=o*s):(l=r,a=r/s),{width:l,height:a,offsetLeft:(r-l)*(n=void 0===n?.5:n),offsetTop:(o-a)*(i=void 0===i?.5:i)}}},53120:function(t,e,r){"use strict";r.d(e,{generateNewAvatarStory:function(){return c}});var o=r(97316),n=r(36557),i=r(70189),a=r(27147),l=r(52260),s={newAvatarUrl:"",oldAvatarUrl:"",newAvatarStrokeWidth:17,newAvatarStrokeColor:"#fff",oldAvatarStrokeWidth:17,oldAvatarStrokeColor:"#fff",baseWidth:1080,baseHeight:1920,displayWidth:375,backgroundColor:"rgba(0, 0, 0, .16)",newAvatarInBackgroundBlur:160,avatarWidth:500,title:window.getLang("stories_new_avatar_story_title_header"),titleColor:"#fff",titleTextAlign:"center",titleFont:"TT Commons",titleFontSize:69,titleLineHeight:87,titleShadowOffsetX:0,titleShadowOffsetY:4,titleShadowBlur:12,titleShadowColor:"rgba(0, 0, 0, 0.24)",pollStickerX:l.POLL_STICKER_X,pollStickerY:l.POLL_STICKER_Y,blobImageType:"image/jpeg",blobQuality:1};function c(t,e){var r=Object.assign({},c.defaultOptions,t||{}),l=r.newAvatarUrl,s=r.oldAvatarUrl,u=r.newAvatarStrokeWidth,d=r.newAvatarStrokeColor,_=r.oldAvatarStrokeWidth,h=r.oldAvatarStrokeColor,p=r.baseWidth,v=r.baseHeight,f=r.displayWidth,S=r.backgroundColor,g=r.newAvatarInBackgroundBlur,m=r.avatarWidth,w=r.title,A=r.titleColor,E=r.titleTextAlign,b=r.titleFont,P=r.titleFontSize,T=r.titleLineHeight,O=r.titleShadowOffsetX,I=r.titleShadowOffsetY,C=r.titleShadowBlur,y=r.titleShadowColor,N=r.pollStickerX,k=r.pollStickerY,R=r.pollStickerOptions,L=r.blobImageType,x=r.blobQuality;p=p||Number(c.defaultOptions.baseWidth),v=v||Number(c.defaultOptions.baseHeight),f=f||Number(c.defaultOptions.displayWidth),R=Object.assign({},{title:window.getLang("stories_new_avatar_story_poll_sticker_title")},R||{});var U=f*(v/p),M=e||document.createElement("canvas"),D=M.getContext("2d");return D?(M.width=p,M.height=v,M.style.width=f+"px",M.style.height=U+"px",new Promise((function(t,e){(0,n.loadImages)([l,s]).then((function(r){var l=(0,o.__read)(r,2),s=l[0],c=l[1];D.clearRect(0,0,M.width,M.height),D.fillStyle=String(S||""),D.fillRect(0,0,M.width,M.height),D.save(),D.filter="blur("+g+"px)";var p=(0,i.getCoverSize)(s.naturalWidth,s.naturalHeight,M.width,M.height,.5,.5);if(D.drawImage(s,p.offsetLeft,p.offsetTop,p.width,p.height),D.restore(),"none"!==D.filter){var v=(0,n.getAverageRGB)(D);D.fillStyle="rgb("+v.r+", "+v.g+", "+v.b+")",D.fillRect(0,0,M.width,M.height)}D.save(),D.shadowOffsetX=Number(O),D.shadowOffsetY=Number(I),D.shadowBlur=Number(C),D.shadowColor=String(y||""),D.font="600 "+P+"px/"+T+"px "+b,D.fillStyle=String(A||""),D.textAlign=String(E);var f=null==w?void 0:w.split("{br}");null==f||f.forEach((function(t,e){var r=Number(T)*e,o=M.width/2,n=M.height/2-Number(T)*f.length/2+r-395;D.fillText(t,o,n)})),D.restore();var U=(M.width-Number(m))/2,B=Math.min(c.width,c.height),H=Math.min(s.width,s.height);D.save(),(0,i.drawRoundedImage)(D,c,Number(m)/2,0,0,B,B,U-165,665,Number(m),Number(m)),D.lineWidth=Number(_),D.strokeStyle=String(h),D.stroke(),(0,i.drawRoundedImage)(D,s,Number(m)/2,0,0,H,H,U+165,665,Number(m),Number(m)),D.lineWidth=Number(u),D.strokeStyle=String(d),D.stroke(),D.restore(),(0,a.drawPollSticker)(R).then((function(e){D.drawImage(e,Number(N),Number(k)),null==M||M.toBlob(t,L,x)})).catch(e)})).catch(e)}))):Promise.reject(new Error("canvas context not found"))}c.defaultOptions=s},27147:function(t,e,r){"use strict";r.d(e,{drawPollSticker:function(){return l}});var o=r(70189),n=r(52260),i=r(36557),a={title:"",titleColor:"#000",titleAlign:"center",titleFontSize:58,titleFont:"TT Commons",voteButtonText:window.getLang("stories_poll_sticker_vote_button_text"),voteButtonTextAlign:"center",voteButtonTextColor:"#fff",voteButtonFontSize:49,voteButtonFont:"TT Commons",voteButtonBackgroundColor:"#3F8AE0",width:n.POLL_STICKER_WIDTH,height:n.POLL_STICKER_HEIGHT,radius:50,offset:n.POLL_STICKER_OFFSET,backgroundColor:"#fff",backgroundCircleColor:"#fff",backgroundCircleSize:90,foregroundCircleColor:"#3F8AE0",foregroundCircleSize:72};function l(t){return(0,i.loadImage)("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyNCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04IDJhMiAyIDAgMTE0IDB2MjBhMiAyIDAgMTEtNCAwVjJ6bTggMTJhMiAyIDAgMTE0IDB2OGEyIDIgMCAxMS00IDB2LTh6TTIgOGEyIDIgMCAwMC0yIDJ2MTJhMiAyIDAgMTA0IDBWMTBhMiAyIDAgMDAtMi0yeiIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg==").then((function(e){var r=Object.assign({},l.defaultOptions,t||{}),n=r.title,i=r.titleColor,a=r.titleAlign,s=r.titleFontSize,c=r.titleFont,u=r.voteButtonText,d=r.voteButtonTextAlign,_=r.voteButtonTextColor,h=r.voteButtonFontSize,p=r.voteButtonFont,v=r.voteButtonBackgroundColor,f=r.width,S=r.height,g=r.radius,m=r.offset,w=r.backgroundColor,A=r.backgroundCircleColor,E=r.backgroundCircleSize,b=r.foregroundCircleColor,P=r.foregroundCircleSize,T=document.createElement("canvas"),O=T.getContext("2d");if(!O)return Promise.reject("canvas context not found");T.width=Number(f),T.height=Number(S)+Number(m),O.fillStyle=String(w||""),(0,o.roundRect)(O,0,Number(m),Number(f),Number(S),Number(g)),O.fill(),O.fillStyle=String(A||""),O.beginPath(),O.arc(Number(f)/2,Number(E),Number(E),0,2*Math.PI,!1),O.fill(),O.fillStyle=String(b||""),O.beginPath(),O.arc(Number(f)/2,Number(E),Number(P),0,2*Math.PI,!1),O.fill();O.drawImage(e,Number(f)/2-27,Number(E)-36,54,72),O.save(),O.font="500 "+s+"px "+c,O.fillStyle=String(i||""),O.textAlign=String(a||""),O.fillText(n,Number(f)/2,230),O.restore(),O.save();var I=Number(f)-75,C=(Number(f)-I)/2,y=Number(S)+Number(m)-103-35;O.fillStyle=String(v||""),(0,o.roundRect)(O,C,y,I,103,29),O.fill(),O.restore(),O.save();var N=Number(f)/2,k=Number(S)+Number(m)-103+30;return O.font="500 "+h+"px "+p,O.fillStyle=String(_||""),O.textAlign=String(d||""),O.fillText(String(u||""),N,k),O.restore(),T}))}l.defaultOptions=a},52260:function(t,e,r){"use strict";r.d(e,{POLL_STICKER_X:function(){return n},POLL_STICKER_Y:function(){return i},POLL_STICKER_WIDTH:function(){return a},POLL_STICKER_HEIGHT:function(){return l},POLL_STICKER_OFFSET:function(){return s},createNewAvatarStoryPoll:function(){return c},getNewAvatarStoryPollClickableStickerMeta:function(){return u}});var o=r(36557),n=157,i=1075,a=760,l=391,s=45;function c(t){return new Promise((function(e,r){window.ajax.post((0,o.isMvk)()?"stories.php":"al_stories.php",{act:"create_new_avatar_poll",hash:t},{onDone:e,onError:r,onFail:r})}))}function u(t,e,r){var o=Object.assign({},{pollStickerX:n,pollStickerY:i,pollStickerWidth:a,pollStickerHeight:l,pollStickerOffset:s},r||{}),c=o.pollStickerX,u=o.pollStickerY,d=o.pollStickerWidth,_=o.pollStickerHeight+o.pollStickerOffset;return{type:"poll",poll_id:e,poll_owner_id:t,clickable_area:[{x:c,y:u},{x:c+d,y:u},{x:c+d,y:u+_},{x:c,y:u+_}]}}},29629:function(t,e,r){"use strict";r.d(e,{MAX_STORY_VIDEO_DURATION:function(){return i},getStoryUploadUrl:function(){return a},saveStoryOnServer:function(){return l}});var o=r(97316),n=(r(17999),r(36557)),i=16;function a(t){return new Promise((function(e,r){window.ajax.post((0,n.isMvk)()?"stories.php":"al_stories.php",(0,o.__assign)({act:"get_upload_url"},t),{onDone:e,onError:r,onFail:r})}))}function l(t,e){return new Promise((function(r,o){window.ajax.post((0,n.isMvk)()?"stories.php":"al_stories.php",{act:"save",upload_result:t,hash:e},{onDone:r,onError:o,onFail:o})}))}},15797:function(t,e,r){"use strict";var o,n,i,a,l;r.d(e,{StoryType:function(){return o},StoryEntryPoint:function(){return n},StorySource:function(){return i}}),function(t){t.PHOTO="photo",t.VIDEO="video",t.LIVE="live"}(o||(o={})),function(t){t.SWIPE="swipe",t.NAVIGATION_BUTTON="navigation_button",t.SIT_POSTING="sit_posting",t.LINK="link",t.STORY_REPLY="story_reply",t.STORY_REPOST="story_repost",t.CATALOG_ADD="catalog_add",t.DIALOG="dialog",t.STORY_LIVE_FINISHED="story_live_finished",t.DIALOG_VKME="dialog_vkme",t.STORY_VIEWER_FINISHED="story_viewer_finished",t.PUSH_TRY_MASK="push_try_mask",t.STORY_VIEWER_TRY_MASK="story_viewer_try_mask",t.LINK_MASK="link_mask",t.POSTING="posting",t.NEW_STORY_AVATAR="new_story_avatar",t.STORY_REPLIES_LIST="story_replies_list",t.STORIES_FEED="stories_feed",t.STORIES_SEARCH_NEWS="stories_search_news",t.QUESTION_STICKER="question_sticker",t.LIST_MIDDLE="list_middle",t.ARCHIVE_EMPTY_BUTTON="archive_empty_button",t.ARCHIVE_MENU_BUTTON="archive_menu_button",t.IM="im",t.PROFILE_BUTTON="profile_button",t.SHARE="share",t.MINI_APP="mini_app",t.SYSTEM_SHARING="system_sharing",t.SHORTCUT="shortcut",t.ARCHIVE_SHARING="archive_sharing",t.STORY_VIEWER_CAMERA_BUTTON="story_viewer_camera_button",t.STORY_VIEWER_MUSIC="story_viewer_music",t.STORY_VIEWER_MUSIC_SHEET="story_viewer_music_sheet",t.REPOST_TO_STORY_ACTIVITY="repost_to_story_activity",t.CHANGE_AVATAR="change_avatar"}(n||(n={})),function(t){t.FEED="feed",t.FEED_MIDDLE="feed_middle",t.LINK="link",t.PROFILE="profile",t.IM_DIALOGS="im_dialogs",t.IM_DIALOG_HEADER="im_dialog_header",t.SNIPPET="snippet",t.REPLY="reply",t.REPLIES_LIST="replies_list",t.REPLY_STORY="reply_story",t.DISCOVER="discover",t.STORIES_MANAGE="stories_manage",t.USER_PERSONAL_CARD="user_personal_card",t.GROUP_PERSONAL_CARD="group_personal_card",t.NARRATIVE_SNIPPET="narrative_snippet",t.NARRATIVE_STORY="narrative_story",t.NARRATIVE_LINK="narrative_link",t.NARRATIVE_RECOMMENDATIONS="narrative_recommendations",t.NARRATIVE_SECTION="narrative_section",t.FAVE="fave",t.SPAMFEED="sf",t.ADS_PREVIEW="ads_preview",t.LIST_MIDDLE="list_middle",t.PLACE_STORY_LIST="place_story_list",t.SEARCH_STORY_LIST="search_story_list",t.STORY_ARCHIVE="story_archive",t.IM_MSG_LIST="im_msg_list",t.NOSPAM="nospam",t.PROFILE_SNACKBAR="profile_snackbar"}(i||(i={})),function(t){t.stories="stories",t.communityGroupedStories="community_grouped_stories",t.appGroupedStories="app_grouped_stories",t.discover="discover"}(a||(a={})),function(t){t.feed="feed",t.groups="groups",t.apps="apps",t.discover="discover"}(l||(l={}))},91997:function(t,e,r){"use strict";r.d(e,{getCropString:function(){return o}});r(62643);function o(t,e,r,o,n){void 0===n&&(n=!1);var i=t+","+e+","+r;return n||(i=i+","+o),i}},46552:function(t,e,r){"use strict";r.d(e,{UploadPhotoAnalyticsEventType:function(){return o},sendUploadPhotoAnalytics:function(){return i}});var o,n=r(86900);function i(t){var e={event_type:t};(0,n.statlogsValueEvent)("upload_photo_analytics",e)}!function(t){t.EVENT_SHARE_TO_STORY_TURN_OFF="share_to_story_turn_off",t.EVENT_SHARE_TO_STORY_TURN_ON="share_to_story_turn_on",t.EVENT_SHARE_TO_FEED_TURN_OFF="share_to_feed_turn_off",t.EVENT_SHARE_TO_FEED_TURN_ON="share_to_feed_turn_on"}(o||(o={}))},5321:function(t,e,r){"use strict";r.d(e,{UploadPhoto:function(){return o.UploadPhoto}});var o=r(29286)},9592:function(t,e,r){"use strict";var o,n,i;r.d(e,{UploadPhotoErrorCodes:function(){return o},OwnerAvatarEditorMods:function(){return i}}),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.UPLOAD=1]="UPLOAD",t[t.NOT_ALLOWED_EXTENSION=2]="NOT_ALLOWED_EXTENSION",t[t.IMAGE_TOO_SMALL=3]="IMAGE_TOO_SMALL",t[t.IMAGE_TOO_BIG=4]="IMAGE_TOO_BIG",t[t.BAD_ASPECT_RATIO=5]="BAD_ASPECT_RATIO"}(o||(o={})),function(t){t.UPLOADED="uploaded",t.EXISTED="existed"}(n||(n={})),function(t){t[t.UPLOAD=1]="UPLOAD",t[t.SELECT=2]="SELECT",t[t.EDIT=3]="EDIT"}(i||(i={}))},29286:function(t,e,r){"use strict";r.d(e,{UploadPhoto:function(){return a}});var o=r(97316),n=r(9592),i=r(83917),a=function(){function t(t,e){this.config=(0,o.__assign)({allowedTypes:["*"]},t),this.progressCallback=e}return t.prototype.validate=function(t){var e=this.config,r=e.constraints,a=e.allowedTypes,l=e.lang,s=!1;return a&&(s=a.some((function(e){return"*"===e||e===t.type}))),s?r?(0,i.getImageSizeByBlob)(t).then((function(t){var e=r.maxWidth,i=r.minWidth,a=r.maxHeight,s=r.minHeight,c=r.maxAspectRatio,u=r.minAspectRatio,d=(0,o.__read)(t,2),_=d[0],h=d[1],p=_/h;if(_>e||h>a){var v=(l["error_"+n.UploadPhotoErrorCodes.IMAGE_TOO_BIG]||"").replace("{width}",String(e)).replace("{height}",String(a));return Promise.reject({code:n.UploadPhotoErrorCodes.IMAGE_TOO_BIG,text:v})}if(_<i||h<s){v=(l["error_"+n.UploadPhotoErrorCodes.IMAGE_TOO_SMALL]||"").replace("{width}",String(i)).replace("{height}",String(s));return Promise.reject({code:n.UploadPhotoErrorCodes.IMAGE_TOO_SMALL,text:v})}return u&&u>p||c&&p>c?Promise.reject({code:n.UploadPhotoErrorCodes.BAD_ASPECT_RATIO,text:l["error_"+n.UploadPhotoErrorCodes.BAD_ASPECT_RATIO]}):Promise.resolve(null)})).catch((function(t){return t&&t.text&&t.code?Promise.reject(t):Promise.reject({code:n.UploadPhotoErrorCodes.UNKNOWN,text:l["error_"+n.UploadPhotoErrorCodes.UNKNOWN]})})):Promise.resolve(null):Promise.reject({code:n.UploadPhotoErrorCodes.NOT_ALLOWED_EXTENSION,text:l["error_"+n.UploadPhotoErrorCodes.NOT_ALLOWED_EXTENSION]})},t.prototype.upload=function(t,e,r){var o=this;return void 0===r&&(r="file1"),this.validate(t).then((function(){return new Promise((function(i,a){var l=new XMLHttpRequest,s=new FormData;s.append(r,t),l.open("POST",e||o.config.url,!0),l.onreadystatechange=function(){if(l.readyState===XMLHttpRequest.DONE&&200===l.status){var t=void 0;try{l.responseText&&(t=JSON.parse(l.responseText))}catch(t){a({code:n.UploadPhotoErrorCodes.UNKNOWN,text:o.config.lang["error_"+n.UploadPhotoErrorCodes.UNKNOWN]})}i(t)}},l.onerror=function(){a({code:n.UploadPhotoErrorCodes.UPLOAD,text:o.config.lang["error_"+n.UploadPhotoErrorCodes.UPLOAD]})},l.upload.onprogress=function(t){o.progressCallback&&o.progressCallback(t.loaded,t.total)},l.send(s)}))}))},t}()},83917:function(t,e,r){"use strict";function o(t){return e=URL.createObjectURL(t),new Promise((function(t,r){var o=new Image;o.onload=function(){var e=Number(o.height),r=Number(o.width);t([r,e])},o.onerror=function(){r()},o.onabort=function(){r()},o.src=e}));var e}r.d(e,{getImageSizeByBlob:function(){return o}})}},function(t){"use strict";t.O(0,[2807],(function(){[4578,1738,1070].map(t.E)}),5);t.O(0,[4736,4578,6855,4839,3674,9955,5273,9030],(function(){return e=53590,t(t.s=e);var e}));t.O()}]);