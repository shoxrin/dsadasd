(self.webpackChunkvk=self.webpackChunkvk||[]).push([[3517],{96718:function(t,e,n){"use strict";n.d(e,{AudioPlayerBase:function(){return d}});var i=n(53006),a=n(61927),s=n(9961),o=n(27813),r=n(58862),u=n(86900),d=function(t){function e(){var e;return(e=t.call(this)||this).AUDIO_COOKIE="remixcurr_audio",e.AUDIO_COOKIE_OLD="remixmaudio",e.AUDIO_PLAYER_CLASS="vk_audio_player",e.STAT_KEY="mvk_audio_player",e.audio=window.audio,e.state=e.getState(),e.setState({expanded:!1}),e.audio.subscribe(s.events.PLAY,(function(){return e.updateState()})),e.audio.subscribe(s.events.PLAY_REQUESTED,(function(){return e.updateState()})),e.audio.subscribe(s.events.PAUSE,(function(){return e.updateState()})),e.audio.subscribe(s.events.SEEK,(function(){return e.updateState()})),e.audio.subscribe(s.events.PROGRESS,(function(){return e.updateProgress()})),e.audio.subscribe(s.events.STOP,(function(){return e.updateState()})),e.audio.subscribe(s.events.PLAYLIST_CHANGED,(function(){e.audio.shuffled&&e.audio.shuffle(),e.audio.canRepeat||e.audio.repeat(),e.updateState()})),e.audio.subscribe(s.events.AD_READY,(function(){return e.updateState()})),e.audio.subscribe(s.events.AD_DEINITED,(function(){return e.updateState()})),e.audio.subscribe(s.events.AD_STARTED,(function(){return e.updateState()})),e.audio.subscribe(s.events.AD_COMPLETED,(function(){return e.updateState()})),window.page.onChange((function(){return e.updateState()})),e}(0,i.default)(e,t);var n=e.prototype;return n.updateProgress=function(){var t=this.audio.getCurrentProgress(),e=this.audio.duration();this.setState({loaded:this.audio.loaded(),progress:t,listened:this.formatTime(t*e),remained:this.formatTime(-(e-t*e))})},n.updateState=function(){this.setState(this.getState())},n.getState=function(){var t=this,e=this.audio.getCurrent()||{},n=e.title,i=e.subTitle,a=e.performer,s=e.mainArtists,u=e.featArtists,d=e.isExplicit,c=e.fullId,l=e.coverUrl_p,f=e.coverUrl_s;(0,o.setCookie)(this.AUDIO_COOKIE,c,1),n?document.body.classList.add(this.AUDIO_PLAYER_CLASS):document.body.classList.remove(this.AUDIO_PLAYER_CLASS);var p=this.audio.getCurrentProgress(),_=this.audio.duration();return{title:(0,r.decodeHTMLEntities)(n||""),subtitle:(0,r.decodeHTMLEntities)(i||""),performer:(0,r.decodeHTMLEntities)(a||""),mainArtists:this.prepareArtists(s),featArtists:this.prepareArtists(u),cover:l||f||"",explicit:d||!1,loaded:this.audio.loaded(),progress:p,listened:this.formatTime(p*_),remained:this.formatTime(-(_-p*_)),playing:this.audio.isPlaying(),adsplaying:this.audio.isAdsPlaying(),canRepeat:this.audio.canRepeat,shuffled:this.audio.shuffled,show:!!n||this.audio.isAdsPlaying(),onPlay:function(){return t.onPlay()},onPause:function(){return t.onPause()},onPrev:function(){return t.onPrev()},onNext:function(){return t.onNext()},onClose:function(){return t.onClose()},onShuffle:function(){return t.onShuffle()},onDisableAds:function(){return t.onDisableAds()},onRepeat:function(){return t.onRepeat()},onMiniPlayerClick:function(){return t.requestExpanded()}}},n.prepareArtists=function(t){return t?t.map((function(t){return[t.id,(0,r.decodeHTMLEntities)(t.name)]})):[]},n.onPlay=function(){(0,u.statlogsValueEvent)(this.STAT_KEY,"play",this.state.expanded),this.audio.play()},n.onPause=function(){(0,u.statlogsValueEvent)(this.STAT_KEY,"pause",this.state.expanded),this.audio.pause()},n.onClose=function(){var t=this;(0,u.statlogsValueEvent)(this.STAT_KEY,"close",this.state.expanded),this.audio.clearCurrentPlaylist(),requestAnimationFrame((function(){(0,o.setCookie)(t.AUDIO_COOKIE,"",-1),(0,o.setCookie)(t.AUDIO_COOKIE_OLD,"",-1),t.setState({title:"",subtitle:"",performer:"",explicit:!1,progress:0,playing:!1,adsplaying:!1,show:!1,expanded:!1}),document.body.classList.remove(t.AUDIO_PLAYER_CLASS)}))},n.onPrev=function(){this.audio.isAdsPlaying()||((0,u.statlogsValueEvent)(this.STAT_KEY,"prev",this.state.expanded),this.audio.prev(!0))},n.onNext=function(){this.audio.isAdsPlaying()||((0,u.statlogsValueEvent)(this.STAT_KEY,"next",this.state.expanded),this.audio.next(!0))},n.onShuffle=function(){this.audio.isAdsPlaying()||((0,u.statlogsValueEvent)(this.STAT_KEY,"shuffle",this.state.expanded),this.audio.shuffle(),this.updateState())},n.onDisableAds=function(){(0,u.statlogsValueEvent)(this.STAT_KEY,"disable_ads",this.state.expanded),this.audio.pause(),nav.go("/combo")},n.onRepeat=function(){this.audio.isAdsPlaying()||((0,u.statlogsValueEvent)(this.STAT_KEY,"repeat",this.state.expanded),this.audio.repeat(),this.updateState())},n.requestExpanded=function(){window.audio.notify(s.events.REQUEST_EXPANDED)},n.formatTime=function(t){var e=Math.abs(t);return(t<0?"-":"")+[Math.floor(e/3600),Math.floor(e/60)%60,Math.floor(e%60)].map((function(t){return t<10?"0"+t:t})).filter((function(t,e){return"00"!==t||e>0})).join(":")},e}(a.Component)},51032:function(t,e,n){"use strict";var i=n(46769),a=n(53006),s=n(11393),o=n(65606),r=function(t){function e(){return t.apply(this,arguments)||this}return(0,a.default)(e,t),e.prototype.render=function(){return s.default.preact(o.default,(0,i.default)({},this.state))},e}(n(96718).AudioPlayerBase);e.default=r},58464:function(t,e,n){"use strict";n.d(e,{initAudioPlayerMini:function(){return o}});var i=n(51032),a=n(46950),s=n(61927);function o(){if(window.audio&&window.audioplayer){var t=$$(".AudioPlayerMini");t&&0!==t.length&&t.forEach((function(t){return(0,s.render)((0,s.createElement)(i.default,(0,a.getState)("AudioPlayerMini")),t)}))}}},79398:function(t,e,n){"use strict";var i=n(58464);onDOMReady(i.initAudioPlayerMini),window.page&&page.onChange(i.initAudioPlayerMini)},7104:function(t,e,n){"use strict";n.d(e,{jsx:function(){return i.createElement},jsxs:function(){return i.createElement},Fragment:function(){return i.Fragment}});var i=n(72600)},86205:function(t,e,n){"use strict";n.d(e,{SVGIcon:function(){return i.SVGIcon}});var i=n(58457);e.default=i.SVGIcon,window.SVGIcon=i.SVGIcon},65606:function(t,e,n){"use strict";var i=n(85489),a=n(46950),s=n(86205),o=n(26630),r=n(41345),u=n(43136),d=n(33319);e.default=function(t){var e=t.show,n=t.adsplaying,c=n?(0,a.getLang)("mobile_audio_player_ad"):t.title,l=n?"":t.subtitle,f=n?"":t.performer,p=t.explicit,_=t.playing,A=t.onPlay,E=t.onPause,h=t.onNext,v=t.onMiniPlayerClick;if(!e)return"";var g=i.default.class("AudioPlayerMini__controls",{playing:_}),S=c?{inner:[c],class:"AudioPlayerMini__title",tag:"span"}:"",y=l?{inner:[l],class:"AudioPlayerMini__subtitle",tag:"span"}:"",P=!n&&p?{inner:[(0,s.default)({icon:(0,o.getExplicitGray13Icon)()})],class:"AudioPlayerMini__explicit",tag:"span"}:"",m=_?"AudioPlayerMini__pause":"AudioPlayerMini__play",D=_?(0,u.getPauseBlue24Icon)():(0,d.getPlayBlue24Icon)(),T=_?E:A,b=_?(0,a.getLang)("mobile_audio_player_pause"):(0,a.getLang)("mobile_audio_player_play");return{inner:[{inner:[{inner:[(0,s.default)({icon:D})],class:m,onClick:T,"aria-label":b,tag:"button"}],class:g,tag:"div"},{inner:[{inner:[S,y,P],class:"AudioPlayerMini__info1",tag:"div"},{inner:[{inner:[f],class:"AudioPlayerMini__performer",tag:"span"}],class:"AudioPlayerMini__info2",tag:"div"}],class:"AudioPlayerMini__info",role:"button",tabindex:"0","aria-label":f+" - "+c+" "+l,onClick:v,tag:"div"},{inner:[{inner:[(0,s.default)({icon:(0,r.getNextBlue28Icon)()})],class:"AudioPlayerMini__next",onClick:h,"aria-label":(0,a.getLang)("mobile_audio_player_next"),disabled:n,tag:"button"}],class:"AudioPlayerMini__controls",tag:"div"}],class:"AudioPlayerMini__container",tag:"div"}}},9961:function(t,e,n){"use strict";n.d(e,{events:function(){return i}});var i={CURRENT_CHANGED:"curr",PLAY:"start",PLAY_REQUESTED:"request_play",PAUSE:"pause",STOP:"stop",UPDATE:"update",LOADED:"loaded",ENDED:"ended",FAILED:"failed",BUFFERED:"buffered",PROGRESS:"progress",VOLUME:"volume",PLAYLIST_CHANGED:"plchange",ADDED:"added",REMOVED:"removed",FREQ_UPDATE:"freq",SEEK:"seek",PLAY_NEXT:"play_next",AD_READY:"ad_ready",AD_DEINITED:"ad_deinit",AD_STARTED:"ad_started",AD_COMPLETED:"ad_completed",START_LOADING:"start_load",CAN_PLAY:"actual_start",SELECT:"select",DESELECT:"deselect",EMPTY_PLAYLIST:"empty_playlist",NOT_FOUND_PLAYLIST:"not_found_playlist",INIT:"init",REQUEST_EXPANDED:"request_expanded",MUSIC_AUDIOS_ADD:"music_audios_add",MUSIC_PLAYLISTS_ADD:"music_playlists_add"}},36383:function(t,e,n){"use strict";function i(t,e,n){void 0===e&&(e={}),void 0===n&&(n="--");var i=[t];return Object.keys(e).forEach((function(a){if(s(a)){var o=e[a];!0===o?i.push(""+t+n+a):s(o)&&i.push(""+t+n+a+n+o)}})),i.join(" ")}function a(t,e,n){var i,a=new RegExp("\\s*"+e+"(_[-a-zA-Z]+)?");i=!0===n?" "+e:s(n)?" "+e+"_"+n:"",a.test(t.className)?t.className=t.className.replace(a,i):t.className+=i}function s(t){return"number"==typeof t||"string"==typeof t&&!!t}n.d(e,{createClass:function(){return i},setMod:function(){return a}})},85489:function(t,e,n){"use strict";var i=n(36383),a={class:i.createClass,setMod:i.setMod};window.Bem=a,e.default=a},17232:function(t,e,n){"use strict";function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=[],i=t;return i.forEach((function(t){if(t)switch(typeof t){case"string":n.push(t);break;case"object":if(Array.isArray(t))t.forEach((function(t){return n.push(t)}));else Object.keys(t).forEach((function(e){t[e]&&n.push(e)}));break;default:n.push(""+t)}})),n.join(" ")}n.d(e,{classNames:function(){return i}})},58457:function(t,e,n){"use strict";n.d(e,{SVGIcon:function(){return o}});var i=n(7104),a=n(46950),s=n(26350);function o(t){(0,a.inlineIconResolver)("");var e=null;return e=(0,a.isObject)(t)&&(0,a.isObject)(t.icon)?t.icon:t,(0,a.isObject)(e)||(e={name:t,icon:""}),(0,i.jsx)(s.SVGIconHTML,{name:null==e?void 0:e.name,icon:null==e?void 0:e.icon},void 0)}},26350:function(t,e,n){"use strict";n.d(e,{SVGIconHTML:function(){return u}});var i=n(97316),a=n(7104),s=n(46950),o=n(17232),r=n(60559);function u(t){var e,n=t.name,u=t.icon,d=(0,o.classNames)(((e={svgIcon:!0})["svgIcon-"+n]=!0,e));return(0,a.jsx)("div",(0,i.__assign)({"aria-hidden":"true",className:d},{children:(0,r.wrap)((0,s.decodeHTMLEntities)(u))}),void 0)}}},function(t){"use strict";t.O(0,[4736,4578,6855,4839,3674,9955],(function(){return e=79398,t(t.s=e);var e}));t.O()}]);