(self.webpackChunkvk=self.webpackChunkvk||[]).push([[9955],{28638:function(e,t,n){"use strict";n.d(t,{emojiToHTML:function(){return u}});var r=n(19018),u=function(e){return(0,r.emojiToHTML)(e,!0)}},18613:function(e,t,n){"use strict";n.d(t,{FLAG_MP4:function(){return a},FLAG_GIF_AUTOPLAY:function(){return o},FLAG_SUPPORTS_HISTORY_API:function(){return s},FLAG_SUPPORTS_AUDIO_MESSAGES:function(){return c}});var r=n(62691),u=n(27813),i={},a=0,o=1,s=2,c=3,l=[a,o,s,c],D=null,f=function(){function e(){}return e.getFeatures=function(){return i},e.detectMp4Support=function(){var t=r.default.meizu||r.default.mi||r.default.uc_mini||0!==r.default.ios&&r.default.ios<10||r.default.chrome&&r.default.version.split(".")[0]<53,n=!1,u=document.createElement("video");return u.canPlayType&&""!==u.canPlayType("video/mp4")&&(n=!0),i.mp4=n,e.setFlag(a,n&&!t),n},e.detectAutoplay=function(){var e=this;return new Promise((function(t){if(i.autoplay)t(!0);else{if(r.default.ios&&r.default.safari_mobile&&parseInt(r.default.version,10)>=10)return i.autoplay=!0,void t(!0);i.autoplay=!1;var n=ce("video"),u=ce("source");u.src="data:video/mp4;base64,AAAAFGZ0eXBNU05WAAACAE1TTlYAAAOUbW9vdgAAAGxtdmhkAAAAAM9ghv7PYIb+AAACWAAACu8AAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAnh0cmFrAAAAXHRraGQAAAAHz2CG/s9ghv4AAAABAAAAAAAACu8AAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAFAAAAA4AAAAAAHgbWRpYQAAACBtZGhkAAAAAM9ghv7PYIb+AAALuAAANq8AAAAAAAAAIWhkbHIAAAAAbWhscnZpZGVBVlMgAAAAAAABAB4AAAABl21pbmYAAAAUdm1oZAAAAAAAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAVdzdGJsAAAAp3N0c2QAAAAAAAAAAQAAAJdhdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAFAAOABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAEmNvbHJuY2xjAAEAAQABAAAAL2F2Y0MBTUAz/+EAGGdNQDOadCk/LgIgAAADACAAAAMA0eMGVAEABGjuPIAAAAAYc3R0cwAAAAAAAAABAAAADgAAA+gAAAAUc3RzcwAAAAAAAAABAAAAAQAAABxzdHNjAAAAAAAAAAEAAAABAAAADgAAAAEAAABMc3RzegAAAAAAAAAAAAAADgAAAE8AAAAOAAAADQAAAA0AAAANAAAADQAAAA0AAAANAAAADQAAAA0AAAANAAAADQAAAA4AAAAOAAAAFHN0Y28AAAAAAAAAAQAAA7AAAAA0dXVpZFVTTVQh0k/Ou4hpXPrJx0AAAAAcTVREVAABABIAAAAKVcQAAAAAAAEAAAAAAAAAqHV1aWRVU01UIdJPzruIaVz6ycdAAAAAkE1URFQABAAMAAAAC1XEAAACHAAeAAAABBXHAAEAQQBWAFMAIABNAGUAZABpAGEAAAAqAAAAASoOAAEAZABlAHQAZQBjAHQAXwBhAHUAdABvAHAAbABhAHkAAAAyAAAAA1XEAAEAMgAwADAANQBtAGUALwAwADcALwAwADYAMAA2ACAAMwA6ADUAOgAwAAABA21kYXQAAAAYZ01AM5p0KT8uAiAAAAMAIAAAAwDR4wZUAAAABGjuPIAAAAAnZYiAIAAR//eBLT+oL1eA2Nlb/edvwWZflzEVLlhlXtJvSAEGRA3ZAAAACkGaAQCyJ/8AFBAAAAAJQZoCATP/AOmBAAAACUGaAwGz/wDpgAAAAAlBmgQCM/8A6YEAAAAJQZoFArP/AOmBAAAACUGaBgMz/wDpgQAAAAlBmgcDs/8A6YEAAAAJQZoIBDP/AOmAAAAACUGaCQSz/wDpgAAAAAlBmgoFM/8A6YEAAAAJQZoLBbP/AOmAAAAACkGaDAYyJ/8AFBAAAAAKQZoNBrIv/4cMeQ==";var a=ce("source");a.src="data:video/webm;base64,GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=",append(a,n),append(u,n),n.style.position="fixed",n.style.left="5000px",attr(n,"id","base64testvideo"),attr(n,"playsinline","playsinline"),attr(n,"webkit-playsinline","webkit-playsinline"),attr(n,"muted","muted"),attr(n,"autoplay","autoplay"),attr(n,"loop","loop"),append(n,document.body);var o=ge("base64testvideo");if(r.default.mobile&&r.default.ios&&r.default.ios<10)return i.autoplay=!1,remove(n),t(!1),void clearTimeout(e.autoDetectTimeout);if(!r.default.safari_mobile||r.default.safari_mobile&&parseInt(r.default.version,10)>=10){var s=n.play();void 0!==s&&s.then((function(){i.autoplay=!0,remove(n),t(!0),clearTimeout(e.autoDetectTimeout)})).catch((function(r){i.autoplay=!1,remove(n),t(!1),clearTimeout(e.autoDetectTimeout)}))}o.onplay=function(){i.autoplay=!0,remove(n),t(!0),clearTimeout(e.autoDetectTimeout)},e.autoDetectTimeout=setTimeout((function(){o.paused||(i.autoplay=!0),remove(n),t(i.autoplay)}),250)}}))},e.detectAudioMessagesSupport=function(){var t=!(!window.AudioContext&&!window.webkitAudioContext)&&window.isNewMail,n=e.getFlag(c);this.setFlag(c,t),!n&&t&&window.cur.module},e.getFlags=function(){return(D||(0,u.getCookie)("remixff")||"").split("").map((function(e){return+e?"1":"0"})).join("")},e.getFlag=function(e){var t=this.getFlags();return!!toInt(t[e])},e.setFlag=function(e,t){void 0===t&&(t=!1),(0,u.setCookie)("remixff","",-1,!0,"None",location.host,{withoutSubdomains:!0});var n=((0,u.getCookie)("remixff")||"").split(""),r=new Array(l.length).fill("0").map((function(e,t){return n[t]||"0"}));r[e]=t?"1":"0";var i=r.join("");D=i,(0,u.setCookie)("remixff",i,10,!0)},e}();onDOMReady((function(){f.detectAudioMessagesSupport(),f.detectMp4Support()})),t.default=f},28708:function(e,t,n){"use strict";n.d(t,{IPHONE_SAFARI_BOTTOM_BAR:function(){return i},IPHONE_X_SAFARI_BOTTOM_BAR:function(){return a},IPHONE_KEYBOARD_REJECT_OFFSET:function(){return o},IOS_15_BOTTOM_NAVBAR_OFFSET:function(){return s},IOS_NO_KEYBOARD_ALLOWED_OFFSET:function(){return c},isIPad:function(){return f},isIPhone:function(){return d},isIOS:function(){return _},iosMajor:function(){return r},isWKWebView:function(){return m},isScrollBasedViewport:function(){return p},isIPhoneX:function(){return h},isIOSChrome:function(){return g},isLandscapePhone:function(){return v}});var r,u,i=45,a=85,o=180,s=48,c=70,l=navigator.userAgent.toLowerCase(),D=function(e){var t=!/ipad|iphone|ipod/.test(e);if(/mac os/.test(e)&&t&&"boolean"==typeof navigator.standalone)return!0;return!1}(l),f=D||-1!==l.indexOf("ipad"),d=!f&&-1!==l.search(/iphone|ipod/),_=d||f,A=_&&navigator.userAgent.match(/OS ([\d_]+) like Mac OS X/i);D&&(r=13,u=0),A&&(A=A[1].split("_"),r=+A[0],u=+A[1]),A=null;var p=r<13&&!(11===r&&u<3),m=_&&function(e){if(window.webkit&&window.webkit.messageHandlers)return!0;var t=/constructor/i.test(window.HTMLElement),n=!!window.indexedDB;if(-1===e.indexOf("safari")||-1===e.indexOf("version")||navigator.standalone){if(!n&&t||!window.statusbar||!window.statusbar.visible);else if(!t||n)return!0}else;return!1}(l),h=_&&375===screen.width&&812===screen.height&&3===window.devicePixelRatio,g=-1!==l.search(/crios/i);function v(){return 90===Math.abs(window.orientation)&&!f}},67952:function(e,t,n){"use strict";function r(e,t){void 0===t&&(t=0);var n=32768&t;return e=(e=e.replace(/([a-zA-Z\-_\.0-9]+@[a-zA-Z\-_0-9]+\.[a-zA-Z\-_\.0-9]+[a-zA-Z\-_0-9]+)/g,(function(e){return'<a href="mailto:'+e+'">'+e+"</a>"}))).replace(/(https?:\/\/)?(([A-Za-zА-Яа-яЁё0-9@][A-Za-zА-Яа-яЁё0-9@\-\_\.]*[A-Za-zА-Яа-яЁё0-9@])(\/([A-Za-zА-Яа-я0-9@\-\_#%&?+\/\.=;:~]*[^\.\,;\(\)\?<\&\s:])?)?)/gi,(function(){var e=arguments[3],t=arguments[2],r=arguments[0],u=arguments[1]||"http://";if(-1==e.indexOf(".")||-1!=e.indexOf(".."))return r;var i=e.split(".").pop();if(i.length>7||-1==indexOf("place,camera,info,name,academy,aero,arpa,coop,media,museum,mobi,travel,xxx,asia,biz,com,net,org,gov,mil,edu,int,tel,ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,bd,be,bf,bg,bh,bi,bj,bm,bn,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,ck,cl,cm,cn,co,cr,cu,cv,cx,cy,cz,de,dj,dk,dm,do,dz,ec,ee,eg,eh,er,es,et,eu,fi,fj,fk,fm,fo,fr,ga,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gu,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,il,im,in,io,iq,ir,is,it,je,jm,jo,jp,ke,kg,kh,ki,km,kn,kp,kr,kw,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,mk,ml,mm,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,mz,na,nc,ne,nf,ng,ni,nl,no,np,nr,nu,nz,om,pa,pe,pf,pg,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,ru,rs,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sv,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tp,tr,tt,tv,tw,tz,ua,ug,uk,um,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,ye,yt,yu,za,zm,zw,рф,укр,сайт,онлайн,срб,cat,pro,local".split(","),i))return r;if(-1!=r.indexOf("@"))return r;try{r=decodeURIComponent(r)}catch(e){}return r.length>55&&(r=r.substr(0,53)+".."),r=htsc(r),!n&&e.match(/^([a-zA-Z0-9\.\_\-]+\.)?(vkontakte\.ru|vk\.com|vkadre\.ru|vshtate\.ru|userapi\.com|vk\.me)$/)?'<a href="'+(u+(t=replaceEntities(t).replace(/([^a-zA-Z0-9#%;_\-.\/?&=\[\]])/g,encodeURIComponent))).replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+'">'+r+"</a>":'<a href="/away?to='+encodeURIComponent(u+replaceEntities(t))+'" target="_blank">'+r+"</a>"}))}n.d(t,{wrapLinks:function(){return r}})},24945:function(e,t,n){"use strict";n.d(t,{MENTION_REGEXP:function(){return l},MENTION_DOMAIN_REGEXP:function(){return D},UNKNOWN_ERROR:function(){return d},isContactPeer:function(){return _},isChatPeer:function(){return A},isUser:function(){return p},formatTime:function(){return m},wrapLinks:function(){return u.wrapLinks},wrapMention:function(){return g},wrapCommunityUrl:function(){return v},sendDataToMessage:function(){return E},getMsgSendId:function(){return C},mailRequest:function(){return w},getStickerSize:function(){return b},prepareKeyboard:function(){return F},isMessageWithoutLocalId:function(){return y},isForwardedMessageId:function(){return S},isNewMailPage:function(){return I}});var r,u=n(67952),i=n(51571),a=n(28638),o=n(9046),s=n(17999),c=n(95343),l=/\[((id|club)\d+)\|([\S\s]+?)]/g,D=/\[((id|club)\d+)\|@([\S\s]+?)]/g,f=/\[([^\$]+?)\|([^\$]+?)\]/g,d=10;function _(e){return e>19e8&&e<=2e9}function A(e){return e>2e9}function p(e){return e>0&&e<=19e8}function m(e,t){void 0===t&&(t=0);var n=new Date(1e3*e),r=n.getTimezoneOffset(),u=-t/60-180;if(r!==u){var i=60*(u-r)*1e3;n.setTime(1e3*e-i)}try{return n.toLocaleTimeString(window.vk.lang_rfc5646||[],{hour:"numeric",minute:"2-digit"}).toLowerCase()}catch(e){var a=n.getHours(),o=n.getMinutes();return a+":"+(o<10?"0":"")+o}}function h(e,t){return'<a href="/'+(0,s.htsc)(e)+'" mention_id="'+(0,s.htsc)(e)+'" class="mem_link">'+(0,s.htsc)(t)+"</a>"}function g(e,t){return e=e.replace(c.MASS_MENTION_REGEXP,(function(e){return"<a>"+e+"</a>"})),e=t?e.replace(f,(function(e,t,n){return h(t,n)})):e.replace(l,(function(e,t,n,r){return h(t,r)}))}function v(e){var t=i.default.getQuery("community");return t&&(e+="&community="+t),e}function E(e,t){var n,i,o=store.mail,c=o.cur,l=o.members,D=Date.now()/1e3,f=m(D,c.timeShift),d=e.message||"";"send"!==e.act&&e.id&&(n=store.mail.msgs[e.id]),r||(r=document.createElement("div")),r.textContent=d,d=(0,s.htsc)(r.innerHTML),r.textContent="";var _,A={},p="";if("audiomsg"===e.media&&"doc"===e.attach1_type)A.audiomsg=1,p=e.attachesHTML;else if(e.media&&0===e.media.indexOf("sticker")){A.sticker=1;var h=+e.media.replace("sticker","");h&&(_={id:h,url:Stickers.getStickerUrl(h,b()),height:128})}else for(var v,E=1;v=e["attach"+E+"_type"];E++)A[v]?A[v]+=1:A[v]=1;i=e.attached_messages?(e.attached_messages+"").split(";"):e.mail_edit_attach_fwd&&n?n.forwards.concat():[];var C=!!e.has_reply,w="send"===e.act?"send"+e.random_id:"edit"+e.id,F=d,y=F=F.replace(/(@|\*)(\S+)(?: +\(([^\n]+?)\))?/g,(function(e,t,n,r){r||(r=t+n);var u=0,i=/^(club|public|event)([\d]+)$/.exec(n);/^id[\d]+$/.test(n)?u=parseInt(n.substr(2)):i&&(u=parseInt(i[2]));for(var a="id",o=Object.keys(l),s=0,c=o.length;s<c;s++){var D=o[s];if(l[D]&&l[D].domain===n){u=D;break}}return"-"===u[0]&&(u=u.slice(1),a="club"),u?"["+a+u+"|"+r+"]":e}));y=g(y=(0,u.wrapLinks)(y),!0),y=(0,a.emojiToHTML)(y);var S={id:"send"===e.act?w:e.id,sendId:w,peerId:"send"===e.act?e.to:e.peerId,authorId:c.viewerId,adminId:c.groupId?c.userId:void 0,ts:D,date:f,dateShort:f,text:y,textInput:d,body:F,isUnread:!n||n.isUnread,isOut:!0,edited:"send"!==e.act,canEdit:!1,attaches:A,attachesHTML:p,forwards:C?[]:i,hasReply:C,reply:C?i[0]:void 0,pending:!t,failed:!!t,attachesLoading:!!Object.keys(A).length};return c.groupId&&(S.adminName=lang.mobile_mail_you,S.adminUrl=l[c.userId].url),_&&(S.sticker=_),S}function C(e){return e.edited?"edit"+e.id:"send"+e.randomId}function w(e,t){return new Promise((function(n,r){(0,o.ajaxRequest)(e,t,(function(e){e.error?r({type:"server",code:e.code||0,message:e.message||""}):n(e.result)}),(function(e,t,n){var u=null,i="unknown",a=0;if(n instanceof XMLHttpRequest){var o=n;0===o.status?i="network":(i="server_status",a=o.status)}else 0===e&&null==t&&null==n?i="response_parsing":e===ajax.RESPONSE_CAPTCHA?(i="captcha",u=n):i="unknown";r({type:i,code:a,message:"",data:u})}))}))}function b(){return hasClass("x2",document.body)?256:128}function F(e){var t=e.keyboard,n=e.authorId,r=e.msgId;if(t.buttons&&t.buttons.length){t=Object.assign(t,{author_id:n,chat_local_id:r});var u=document.createElement("div");t.buttons.forEach((function(e){e.forEach((function(e){var t=e.action.label;u.textContent=t;var n=u.innerHTML;e.action.label=(0,a.emojiToHTML)(n),e.action.rawLabel=t}))})),u=null}else t=null;return t}function y(e){return"string"==typeof e&&"~"===e[0]}function S(e){return!(isFinite(e)||y(e))}function I(e,t){if(void 0===e&&(e=""),void 0===t&&(t=""),!window.isNewMail)return!1;if(0===e.indexOf("/write"))return!0;"string"==typeof t&&(t=(0,o.qs2obj)("?"===t[0]?t.slice(1):t));var n=t,r=n.act,u=n.m;return"/mail"===e&&"add_to_chat"!==r&&"flush_history"!==r&&"info"!==r&&"unpin"!==r&&"edit_chat"!==r&&"change_chat_name"!==r&&"leave_chat"!==r&&"new_chat"!==r&&"chat_preview"!==r&&"return_to_chat"!==r&&"show_medias"!==r&&"send_school_grade"!==r&&"toggle_community_block"!==r&&"community_toggle_important"!==r&&"ban_user"!==r&&"add_user"!==r&&"community_mark_answered"!==r&&"invite_link"!==r&&"reset_link"!==r&&"send"!==r&&"show_peer_profile"!==r&&"toggle_peer_profile_tags"!==r&&"edit_peer_profile_tags"!==r&&"edit_peer_profile_note"!==r&&70!=u&&71!=u&&76!=u&&784!=u&&783!=u&&786!=u&&785!=u&&787!=u}},80444:function(e,t,n){"use strict";function r(e,t){var n=need("nav");if(!t)return e;var r=e.split("?"),u=r[0],i=r[1],a={},o=[];return i&&i.split("&").map((function(e){var n=e.split("="),r=n[0],u=n[1];r in t||(t[r]=u)})),Object.keys(t).forEach((function(e){var r,u=t[e];!0===u&&(u=n.getQuery(e)),("string"==typeof(r=u)&&r||function(e){return"number"==typeof e&&!isNaN(e)}(u))&&(a[e]=u)})),Object.keys(a).forEach((function(e){o.push(e+"="+encodeURIComponent(a[e]))})),0===o.length?u:u+"?"+o.join("&")}n.d(t,{makeUrl:function(){return r},parseURL:function(){return i}}),t.default=window.Url={make:r};var u=["protocol","hostname","host","pathname","port","search","hash","href"];function i(e){var t=window.ce("a",{href:e}),n=u.reduce((function(e,n){return e[n]=t[n],e}),{});return n.requestUri=""+n.pathname+n.search,n}},62009:function(e,t,n){"use strict";function r(){var e=document.domain||"";if(!["oauth.","api.","edu_m.",".vksak."].some((function(t){return e.includes(t)}))){var t=e.match(/(m\.)?([a-zA-Z]+\.[a-zA-Z]+\.?)$/);window.locDomain="https:"===location.protocol?t[2]:t[0];var n=navigator.userAgent.toLowerCase();!/opera/i.test(n)&&/msie 6/i.test(n)&&document.domain===window.locDomain||(document.domain=window.locDomain)}}n.d(t,{setDocumentDomain:function(){return r}})},6915:function(e,t,n){"use strict";n.d(t,{setFieldIgnored:function(){return a},isFieldIgnored:function(){return o}});var r=n(9046),u="data-ignore-field",i="true",a=function(e,t){void 0===t&&(t=!0),(0,r.attr)(e,u,!!t&&i)},o=function(e){return(0,r.attr)(e,u)===i}},51571:function(e,t,n){"use strict";var r=n(1730),u=n(3226),i=n(62691),a=n(9046),o=n(18613),s=(n(62623),n(62009)),c=n(6915),l=n(38036),D=n(86353),f=n(54412),d=n(78466),_=n(24801),A=function(){if(window.nav)return window.nav;if(!window.storybook){var e=!(!window.history||!history.pushState),t=se((function(){return p}));onDOMReady((function(){o.default.setFlag(o.FLAG_SUPPORTS_HISTORY_API,e)}));var n={},p=null,m=[],h=!1;if(e)addEvent(window,"popstate",(function(e){if(window.isNewMail&&A.onPopState())return preventEvent(e),void stopEvent(e);var t=extend({no_push:!0,need_restore:!0});if(e.state&&e.state.nav){var n=e.state.nav,u=n.tab,i=n.prev_tab;t=extend(t,{tab:u,prev_tab:i})}cur.share&&cur.share.destroy&&cur.share.destroy();var a=(0,r.$)(".Popup_open");location.href.includes("#pop_")||Popup.close(a),R(location,null,t)}));else{var g=location.hash||"";"#/"==g.substr(0,2)&&T(g.substr(1),null,{replace:!0});var v=function(e){(e=(e||"").substr(1))&&"/"==e.substr(0,1)||(e=location),R(e,null,{no_push:!0,need_restore:!0})};"onhashchange"in window?addEvent(window,"hashchange",(function(){v(location.hash||"")})):(!function e(){var n=location.hash||"";p!==n&&(p=n,t(!0)),setTimeout(e,100)}(),t((function(e){v(e)})))}var E=(location.pathname||"").replace(/^\/+/,"/"),C=location.search||"",w=location.hash||"";return{onBeforeGo:(0,u.default)(),onBeforeGo2:(0,u.default)(),onPopState:(0,u.default)(),onLocalHistoryBack:(0,u.default)(),go:R,al_go:B,app_go:function(e,t,n){if(!n)return!0;if(checkEvent(t))return!0;remove("app_go_frame");var r=getHref(e),u=ce("iframe",{id:"app_go_frame",src:n,onload:function(){remove("app_go_frame"),r&&A.hard_go(r)}},{display:"none"});return window.bodyNode.appendChild(u),!1},hard_go:T,go_after:function(e,t){return!(0,a.ajaxLayoutEnabled)()||(!!checkNav(t.target,{skip_onclick:!0,skip_clicable:!0})||(!1===e||A.go(e,t)||cancelEvent(t),!1))},page_set:function(e,t,n){M(e,t,n)},page_get:function(e,t){return void 0===t&&(t=Tabbar.getCurrentId()),function(e,t){for(var n=S(t),r=n.length-1;r>=0;--r){var u=n[r];if(u.h===e||u.a===e)return u.d}return!1}(e,t)},getCurrentTabCache:I,saveScrollPosition:function(){var e=k();e&&e.d&&(e.d.st=scrollTop())},set:U,checkUrl:O,tryHistoryBack:function(){var e=A.onLocalHistoryBack();if(e)return e;var t=h;return t&&history.go(-t),h=!1,!!t},zInit:function(){var e=qs2obj(A.params);e.z&&L(e.z)},getPostParams:j,cur:E+C+w,path:E,params:C.substr(1),hash:w,clear:function(){n={},A.initStore(),m=[],Tabbar.setHistory(n)},hasUpdate:function(e,t,n){if(!e||!e.need_check_updates)return!1;var r=t,u=P(S(e.tab),r);if(!u||!n.html)return!1;var i=u.d.lm.check_updates,a=n.lm.check_updates;return!(!i&&!a)&&(a!==i&&{currentCache:u})},needUpdate:function(e,t,n){if(!e||!e.need_check_updates)return!0;var r=t,u=P(S(e.tab),r);if(!u||!n.html)return!0;var i=u.d.lm.check_updates,a=n.lm.check_updates;return!i&&!a||a!==i},updateCurrentPage:function(){var e=k();page.set(e.h,e.d,{forceUpdate:!0})},isTabHaveCache:function(e,t){var n=S(e);return!!n&&!!P(n,t)},getQuery:function(e){var t=qs2obj(A.params||"");return e?t[e]||null:t},getNotifierScrollTop:function(){var e=m.find((function(e){return"/settings?act=notifier"===e.h}));return e?e.d.st:null},reload:function(){return A.go(A.cur)},tryBack:function(){var e=m.slice(-2)[0];return!!e&&(A.go(e.h,null,{need_restore:!0}),!0)},backToTabHistory:function(e,t){void 0===t&&(t={});var n=I(),r=n.findIndex((function(e){return!0===e.current})),u=t.restore||e&&hasClass("al_back",e),i=t.replace||e&&e.classList.contains("mh_back_replace"),a=t.href||attr(e,"href"),o=n[r-1];if(o)return n.splice(r,n.length),A.go(o.h,null,{need_restore:u,replace:i});if(a)return y(Tabbar.getCurrentId()),A.go(a,null,{replace:i});var s=Tabbar.getCurrentId(),c=Tabbar.getDefaultURL(s);return y(s),A.go(c,null,{replace:i})},openInNativeApp:function(e,t,n,r,u){var a=this;if(void 0===r&&(r=!1),void 0===u&&(u=!1),this._openAppInProgress)return!1;cancelEvent(t);var o={android:"https://vk.cc/android",iphone:"https://vk.cc/iphone"},s=r?n.href:"vk://vk.com"+(ge("vk_wrap").offsetWidth<882&&A.prev_cur?A.prev_cur:A.cur),c=i.default.mi?1500:300;i.default.safari&&(c=10===i.default.ios?1100:i.default.ios>10&&i.default.ios<12?0:i.default.ios>=12&&i.default.ios<13?2800:i.default.ios>=13?1800:300);var l=Date.now(),D=setTimeout((function(){a._openAppInProgress=!1,Date.now()-l>c+200||!document.hasFocus()||(!u&&n&&n.href?A.hard_go(n.href):A.hard_go(o[e]))}),c);if(addEvent(window,"blur",(function e(){!i.default.safari&&i.default.ios<9&&clearTimeout(D),a._openAppInProgress=!1,removeEvent(window,"blur",e)})),i.default.ios){addEvent(window,"focus",(function e(){window.menu&&window.menu.close(),removeEvent(window,"focus",e)}))}else window.menu&&window.menu.close();return this._openAppInProgress=!0,A.hard_go(s),statlogsValueEvent("mvk_open_in_native_link",1,e),!1},initOpenInNativeAppBtn:function(){if(!isVkWebView()){var e=geByClass1("mmi_open_in_app");e&&addClass("supported",e)}},initStore:function(){window.store&&(window.store.tabs=n)},getPageJs:function(){var e=(0,r.$)("#page_script");return e?e.innerText:m.length&&m[m.length-1].d.js||""},onMenuItemClick:function(e,t){var n=getW("vk_wrap")>=882?"full_version":"mobile";if(t&&(0,l.recordClick)(t),statlogsValueEvent("mvk_navigation_pages","click","tabbar",e,n),"/wall"===A.cur.substr(0,5)&&"add"===A.getQuery("act")){var u=(0,r.$)("#feed_add_form"),i=qs2obj(u.action.split("?")[1]),a=u.getAttribute("data-hash")||i.hash;a&&post.saveDraft(null,a)}},setFvLink:function(e){A.fv_link=e}}}function b(){Tabbar.setHistory(n)}function F(e){var t=window.Tabbar;if(!t)throw new Error("Tabbar is not defined: "+JSON.stringify(e));if(e.lm&&e.lm.tab&&e.lm.is_tab_page||e.options&&e.options.forceSetCurrent){var n=t.getCurrentId(),r=e.lm&&e.lm.tab||e.options.tab;t.setCurrentId(r),n!==r&&b()}else e.lm&&!e.lm.tab&&(e.lm.tab=t.getCurrentId())}function y(e){n[e]=[]}function S(e){return!!n[e]&&n[e]}function I(){return S(Tabbar.getCurrentId())}function P(e,t){var n=(e||[]).filter((function(e){return e.d===t||e.h===t}));return!(!n||!n[0])&&n[0]}function k(){var e=(I()||[]).filter((function(e){return!0===e.current}));return!(!e||!e[0])&&e[0]}function M(e,t,r){var u;t.options&&t.options.is_fast&&t.options.prev_tab?u=S(t.options.prev_tab):(F(t),u=I(),t.lm&&t.lm.is_tab_page&&(u=!1));var i=function(){var e=k();return e&&e.d&&e.d.options&&e.d.options.replaceState}()||function(e){return e&&e.options&&e.options.replacePrevPage}(t),a=!1;if(u){for(var o=-1,s=u.length-1;s>=0;s--)if(u[s].h===e||u[s].a===e){o=s;break}o>-1&&u.splice(o+1,u.length);for(var c=u.length-1;c>=0;c--){var l=u[c];l.h===e||l.a===e?(u[c]={h:e,d:t,a:r,current:!0},a=!0):u[c].current=!1}}if(!a){var D={h:e,d:t,a:r,current:!0};if(u){var f=u[u.length-1],d=f&&f.d&&f.d.options&&f.d.options.removeAfterNextResponse;(i||d)&&u.pop(),u.push(D),u.length>20&&u.shift()}else{var _=Tabbar.getCurrentId(),A=k();if(A&&A.d&&A.d.options&&A.d.options.need_check_updates&&D.d.lm.check_updates){var p=D.d.html,m=A.d.page;D.d.page=m,D.d.newHTML=p}n[_]=[D]}}if(isArray(u)){for(var h=-1,g=u.length-1;g>=0;g--)if(!0===u[g].current){h=g;break}if(h>0){var v=h-1;u[v].h.includes("/like?act=publish")&&function(e,t){e.splice(t,1)}(u,v)}}}function O(e){var t;if(t=/^(https?:)\/\/([^:\/]+)?(?::(\d+))??(\/+\\+)?(.*)$/i.exec(e)){if(t[1]!==location.protocol)return!1;if(t[2]&&t[2]!==location.hostname)return!1;if(t[3]&&t[3]!==location.port)return!1;e=t[5]||""}var n=e.match(/[^\/|\\|\s+]+\/\S+/g);return e=n?n[n.length-1].trim():e}function T(e,t,n){if(checkEvent(t))return!0;if(n&&n.push_only)return!0;if(n&&n.replace)location.replace(e);else if(e){var r=getHref(e);r===location.href.replace(location.origin,"")?location.reload():location.href=r}return!0}function B(e,t,n){cancelEvent(t);var r=getHref(e);if((0,a.ajaxLayoutEnabled)()){if(n&&n.push_only)return!0;if(ajax.nav(r,n))return document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),!0}T(r,t,n)}function R(t,n,r){var u,i,a,o,l=window.Tabbar;if(t&&t.href){if(/vk\.com\/vkui\/([a-zA-Z_]+)/.test(t.href))return T(t.href,n,r),!1;if(o=t.href,t.getAttribute&&t.getAttribute("data-change-location-with-post-away")){var f={};return(a=j(t)).post_id&&(f.post=a.post_id,a.ad_data&&(f.post_ad_data=a.ad_data),a.post_click_cc_key&&(f.cc_key=a.post_click_cc_key),o="/away.php?to="+encodeURIComponent(o)+"&"+obj2qs(f).substr(1)),T(o,n,r),!1}}if(t&&t.href&&t.dataset&&t.dataset.setFrom&&(t.href=Url.make(t.href,{from:A.cur})),A.onBeforeGo(t,n,r))return!1;(0,D.partConfigEnabled)("measure_module_navigation_stats_mvk")&&"performance"in window&&window.performance.mark&&window.performance.mark(_.ModuleNavigationStatMarks.mvk.PERF_MARK);var d=r;if(r=extend({no_push:!1,push_only:!1,replace:!1},r),checkEvent(n))return!stopEvent(n);if(!t)return!0;e&&(r.no_push||r.need_restore)&&(h=!1);var p=t,m="",g="",v="";function E(e){return"a"===tag(e)?e:gpeByTag("a",e)}!t.href&&t.getAttribute&&(p=t.getAttribute("data-href"));var C=n&&E(n.target)||t&&t.tagName&&E(t);if(("input"==tag(t)||"button"==tag(t))&&("submit"==t.type||"image"==t.type)&&t.form){if(t.disabled)return!0;var w=t.form,b={},y=w.action||"",S=!1;if(each(w,(function(e,n){return!(n.name&&!n.disabled&&!(0,c.isFieldIgnored)(n))||("radio"===n.type&&!n.checked||("button"===n.type||("submit"===n.type&&n!==t||("image"===n.type&&n!==t||("file"===n.type?(S=!0,!1):"checkbox"===n.type?(b[n.name]=n.checked?1:0,!0):void(b[n.name]=n.value))))))})),"image"==t.type&&(b[t.name]=t.value,b[t.name+".x"]=1,b[t.name+".y"]=1),S||"multipart/form-data"==attr(w,"enctype"))return function(e){var t=ce("iframe");attr(t,"id","upload_iframe"),attr(t,"name","upload_iframe"),attr(t,"width","0"),attr(t,"height","0"),attr(t,"border","0"),attr(t,"style","width:0;height:0;border:none;position:absolute;left:-1000px;"),append(t,e.parentNode),window.frames.upload_iframe.name="upload_iframe",t=ge("upload_iframe");var n=!1;return each(e,(function(e,t){if("submit"===t.type)return n=t,!1})),addEvent(t,"load",(function e(){removeEvent(t,"load",e),setTimeout((function(){remove(t),unlockButton(n)}),2e3)})),(0,s.setDocumentDomain)(),attr(e,"target","upload_iframe"),attr(e,"method","post"),attr(e,"enctype","multipart/form-data"),attr(e,"encoding","multipart/form-data"),append(ce("input",{type:"hidden",id:"__extra",name:"__extra",value:1}),e),e.submit(),setTimeout((function(){lockButton(n),remove("__extra")})),!1}(w);if(!(p=O(y)))return!0;w.method&&"get"!=w.method?r.params=b:p=p.split("?",1).shift()+obj2qs(b)}if(hasClass("al_need_login",t)&&(r.redirectToLoginPage=!0),"string"!=typeof p){if(!p)return!0;"/"!==(m=(p.pathname||"").replace(/^\/+/,"/")).substr(0,1)&&(m="/"+m),g=p.search.substr(1),v=p.hash,p=m+p.search+v;if(/^(?:%40|@)-?[.a-z0-9_]+-[a-z0-9-]+(?:[\?&]\w+\=[a-z0-9-_]+)*$/.test(m.substr(1))&&window.cur&&window.cur.module){var I=window.cur.module;if("feed"===I)"search"===qs2obj(A.params).section&&(I="feed_search");g+="&ref="+I}}else{var P=p.split("#"),k=P.shift();v=P.length?"#"+P.join("#"):"",m=(k=k.split("?")).shift(),g=k.join("?"),!v&&!g||m||(m=A.path,k||(g=A.params),p=m+(g?"?"+g:"")+v)}var M=qs2obj(g);function R(e,t,n){var r=n&&M[t];return!(!e||r)&&(M[t]=e,!0)}if(R((a=j(C,!!M._post_click_type)).post_id,"_post",!0),R(a.post_click_type,"_post_click_type",!0),M._post_click_type&&(R(a.post_click_mention_id,"_post_click_mention_id",!0),R(a.post_click_cc_key,"_post_click_cc_key",!0),R(a.post_click_url,"_post_click_url",!0),R(a.ad_data,"_post_ad_data",!0)&&R(a.ad_block_unique_id,"_post_ad_block_unique_id")),-1!==location.pathname.indexOf("/groups_catalog")&&0!==p.indexOf("/")&&(p="/"+p),0!==location.pathname.indexOf("/app")&&0===m.indexOf("/app")&&M&&M.act&&"app_r"===M.act)return!!n||(T(t,n,r),!1);if(g=obj2qs(M).substr(1),n&&p&&A.cur&&p.split("#").shift()==A.cur.split("#").shift()&&v&&!r.force&&(scrollToHash(v),r.push_only=!0),r.no_push&&A.cur==p&&!r.force)return!1;if(r.push_only)return U(extend(r,{nav:{push:p,path:m,params:g,hash:v},meta:r.statsMeta,historyState:r.extraState||{}})),!1;if(addClass("active",r.link||t),hasClass("al_back_history",t))return addClass("al_back",r.link||t),removeClass("al_back_history",r.link||t),A.backToTabHistory(r.link||t);if((y||r.isForm)&&(r.removeAfterNextResponse=null==r.removeAfterNextResponse||r.removeAfterNextResponse),t.classList&&(t.classList.contains("al_tab")||t.classList.contains("SliderTabs__tab")||t.classList.contains("Unfold__item_replaceState"))&&(r.replaceState=!0),void 0===(null==d?void 0:d.replace)&&((null==t||null==(u=t.classList)?void 0:u.contains("al_replace"))||(null==t||null==(i=t.dataset)?void 0:i.alReplace))&&(r.replace=!0),hasClass("al_back",t)){var N=M.act;window.isNewMail&&"/mail"===location.pathname&&!N||"show"===N&&!geByClass1("messenger")?r.need_restore=!1:r.need_restore=!0}var x=attr(t,"data-tabbar");if(x){var H=l.getCurrentId();H!==x?(x!==l.TAB_ID_MESSAGES&&0===l.getTabCounter(x)&&(r.need_restore=!0),x===l.TAB_ID_FEED&&"/feed"===p&&(r.need_check_updates=!0),r.tab=x,r.prev_tab=H,r.forceSetCurrent=!0):(r.tab=x,r.prev_tab=x,r.replace=!0),F({lm:{tab:x,is_tab_page:!0}})}else if(r.tab)r.native_prev=l.getCurrentId(),r.is_native_back=!0,r.forceSetCurrent=!0,F({lm:{tab:r.tab,is_tab_page:!0}});else{var W=l.getCurrentId();r.tab=W;var K=!(!this||!isString(this.cur))&&this.cur.substr(1);l.TAB_IDS.includes(K)?r.prev_tab=K:r.prev_tab=W}var z=function(e){var t=window.cur,n=window.menu,r=qs2obj(e.nav.params),u=qs2obj(A.params);if((u.z||r.z)&&u.z!=r.z){if(A.path==e.nav.path){var i=copy(r),a=copy(u);if(delete i.z,delete a.z,(i=obj2qs(i))==(a=obj2qs(a)))return L(r.z,!1,e),U(e),n.close(null,!0),!1}e.zProcess=function(t,n){L(r.z,t,extend({},e,{no_push:!0}),n)}}if(e.onPreNav=function(){e.zProcess&&(e.zProcess(),delete e.zProcess)},!e.ignore_cur_process&&t.processNav&&t.processNav(e))return U(e),n.close(null,!0),!1;return B(e.nav.push,null,e),!1}(extend(r,t.tagName?{target:t}:{},{nav:{push:p,path:m,params:g,hash:v}}));return z||cancelEvent(n),z}function L(e,t,n,r){var u,i,a=window.photo,o=window.zlayer;if(e){if(i=f.Z_PHOTO_REGEX.exec(e)){if(!0===r)return!1;var s=i[1]||"",c=i[2]||"";return a.zopen(!1,null,s,c,{no_push:(n||{}).no_push}),o&&!1!==t&&void 0!==t&&(o._st=t),!0}if(i=/^story(-?\d+_\d+)(\/([a-z0-9_-]+))?(\/?[a-z0-9_:]+)?$/i.exec(e)){var l=window.Stories;if(!0===r)return!1;if(!l.opened){var D=i[1]+(i[2]?i[2]:"/"+i[1])+(i[4]?i[4]:"");l.init(D)}return!0}if(i=/^narrative(s)?(-?\d+)(?:_(\d+))?(?:_(\d+))?/i.exec(e)){window.Stories;if(!0===r)return!1;var _=i,A=_[1],p=_[2],m=_[3],h=_[4];return window.showNarrative(p,m,h,A?"narratives"+p:"",{source:"narrative_link"}),!0}if(i=/^\/?doc(-?\d+)_(\d+)(\/?([a-z0-9_-]+))?$/i.exec(e))return!0!==r&&(Gif.openPopup(null,null,{raw:i[1]+"_"+i[2],no_push:(n||{}).no_push,hasVideo:!1,hash:i[4]}),o&&!1!==t&&void 0!==t&&(o._st=t),!0);if((i=/^\/?publish_photo(-?\d+)?$/i.exec(e))&&!0===r)return!1}return!1!==r&&(o&&o.close(),Stories&&Stories.opened&&Stories.close({isPopState:!0,closeAll:!0}),null==(u=(0,d.getMediaView)())||u.close(),!0)}function N(t,n,r){if(void 0===r&&(r=null),e)!function(e,t,n){var r=window.Tabbar.getCurrentId(),u={nav:{tab:t.tab||r,prev_tab:t.prev_tab}};window.isNewMail?t.replace?history.replaceState(extend({},n,u),null,e):history.pushState(extend({},n,u),null,e):t.replace?history.replaceState(u,null,e):history.pushState(u,null,e)}(t,n,r);else{var u="/"==t.substr(0,1)?t:"/"+t,i="#"+u,a=location.pathname+location.search+i;ge("base").href=u,n.replace?location.replace(a):(p=i,location.href=a)}}function U(t){if(!t.no_push&&A.cur!=t.nav.push)try{window.isNewMail?N(t.nav.push,t,t.historyState):N(t.nav.push,t),e&&!t.no_push&&(t.nav_init||t.nav_incr)?(t.nav_init&&(h=0),t.nav_incr&&!1!==h&&h++,h>30&&(h=!1)):h=!1}catch(e){return T(t.nav.push,null,t)}A.cur!==t.nav.push&&(A.prev_cur=A.cur,A.prev_fv_link=A.fv_link),A.cur=t.nav.push,A.path=t.nav.path,A.params=t.nav.params,A.hash=t.nav.hash,A.cur&&0!==A.cur.indexOf("/")&&(A.cur="/"+A.cur),A.path&&0!==A.path.indexOf("/")&&(A.path="/"+A.path)}function j(e,t){var n=!(!e||!e.getAttribute),r={};if(!n)return r;var u=e.getAttribute("data-post-id");u&&(r.post_id=u);var i=e.getAttribute("data-post-click-type");i&&(r.post_click_type=i);var a=e.getAttribute("mention_id");a&&(r.post_click_mention_id=a);var o=e.getAttribute("data-post-click-cc-key");o&&(r.post_click_cc_key=o);var s=[e.getAttribute("href"),e.getAttribute("data-href")];if(each(s,(function(e,t){if(t&&"#"!==t)return r.post_click_url=t,!1})),!!i||t){var c=gpeByClass("_ads_block_data_w",e),l=(c=c||gpeByClass("_ads_promoted_post_data_w",e))&&c.getAttribute("data-ad"),D=c&&c.getAttribute("data-ad-block-uid");l&&(r.ad_data=l),D&&(r.ad_block_unique_id=D)}return r}}();onDOMReady((function(){window.storybook||(A.initOpenInNativeAppBtn(),A.initStore())})),window.nav=A,t.default=A},62623:function(e,t,n){"use strict";n.d(t,{isStandalone:function(){return c}});var r,u=n(94750),i=n(43675),a=n(99193),o=new u.default;window.sw_client=o,window.SWClient=u.default,window.initPushNotifier=function(){try{window.PushNotifier=a.default,window.pushNotifier=new a.default(o,u.default)}catch(e){}};var s=!1;function c(){return s}function l(){window.vk&&window.vk.sw&&(o.register(window.vk.sw).then((function(e){o.storePushHash()}),(function(e){if(e!==u.default.SW_NOT_AVAILABLE_ERROR)throw e})),u.default.isSupported()&&navigator.serviceWorker.getRegistration().then((function(e){!function(e){if(void 0===r&&(r=!(!u.default.isSupported()||!navigator.serviceWorker.controller)),!r)return;e&&e.active&&e.installing&&e.installing.postMessage({action:"activate"})}(e)})),(0,i.default)())}!function(){if(!window.addEventListener)return;(function(){if(s=!0===navigator.standalone||window.matchMedia&&matchMedia("(display-mode: standalone)").matches,!history.replaceState)return;var e=location.search;if((e=(e=(e=e.replace(/(\?|&)mode\=([^&]+)(&)?/,"$1")).replace(/(\?|&)__appshell_fallback\=([^&]+)(&)?/,"$1")).replace(/(\?|&)+$/,""))!==location.search){var t=location.pathname+e+location.hash;history.replaceState(null,"",t)}})(),function(){if(!u.default.isSupported())return;o.listenMessages()}(),window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault()})),window.addEventListener("appinstalled",(function(){statlogsValueEvent("pwa_installed_event",1)})),"complete"===document.readyState?l():window.addEventListener("load",(function(){l()}))}()},99193:function(e,t,n){"use strict";var r=n(95038),u=n(53006),i=n(48310),a=n(3811),o=n(51988),s=function(e){function t(t,n){var u;return u=e.call(this,t,n)||this,vk.id&&u.canBeEnabled().then((function(e){e&&(u.updateHeadClass(),u.handlerMessagesLP=u.handlerMessagesLP.bind((0,r.default)(u)),page.onChange((function(){return u.updateHeadClass()})))})),u}(0,u.default)(t,e);var n=t.prototype;return n.canBeEnabled=function(){return e.prototype.canBeEnabled.call(this).then((function(e){return e?t.isNativeAppInstalled().then((function(e){return!e})):Promise.resolve(!1)}))},n.isSupported=function(){return e.prototype.isSupported.call(this)&&(browser.chrome||browser.mozilla)},n.updateHeadClass=function(){var e=i.default.getPermission();document.head&&(removeClass(document.head,"push_notifier_"+i.default.PUSH_NOTIFIER_PERMISSION_GRANTED),removeClass(document.head,"push_notifier_"+i.default.PUSH_NOTIFIER_PERMISSION_DENIED),removeClass(document.head,"push_notifier_"+i.default.PUSH_NOTIFIER_PERMISSION_DEFAULT),e&&addClass(document.head,"push_notifier_"+e),addClass(document.head,"push_notifier_supported"))},n.handlerMessagesLP=function(e,t){this.sw.action("removeMessageNotification",{peerId:t,msgId:e})},n.cleanNotification=function(){this.sw.action("cleanNotification")},n.removeLongPollListener=function(){this.lp&&this.lp.off(),this.lp=null},n.addLongPollListener=function(){window.isNewMail&&window.isNewLongpoll&&!this.lp&&(this.lp=window.im.onMsgReadByMe(this.handlerMessagesLP))},t.isNativeAppInstalled=function(){var e=Date.now(),n=o.default.get(t.PUSH_NOTIFIER_LS_KEY_RELATED_APPS_TS),r=o.default.get(t.PUSH_NOTIFIER_LS_KEY_RELATED_APPS);return new Promise((function(u){null!==r&&n&&e-n<t.PUSH_NOTIFIER_LS_TTL_RELATED_APPS?u(!!r):"getInstalledRelatedApps"in navigator?navigator.getInstalledRelatedApps().then((function(n){var r=Object.values(n).some((function(e){return"com.vkontakte.android"===e.id}));o.default.set(t.PUSH_NOTIFIER_LS_KEY_RELATED_APPS_TS,e),o.default.set(t.PUSH_NOTIFIER_LS_KEY_RELATED_APPS,r),u(r)})).catch((function(){u(!1)})):u(!1)}))},n.update=function(){var t=this;return e.prototype.update.call(this).then((function(){t.updateHeadClass(),t.addLongPollListener()}))},n.unsubscribe=function(t){var n=this;return e.prototype.unsubscribe.call(this,t).then((function(){return n.removeLongPollListener()}))},t}(i.default);s.PUSH_NOTIFIER_LS_KEY_RELATED_APPS="push_notifier_related_apps",s.PUSH_NOTIFIER_LS_KEY_RELATED_APPS_TS="push_notifier_related_apps_ts",s.PUSH_NOTIFIER_LS_TTL_RELATED_APPS=a.HOUR/2,t.default=s},48310:function(e,t,n){"use strict";var r=n(86353),u=n(35217),i=n(28397),a=n(51988),o="push_notifier_endpoint",s="push_notifier_subscribed_ts",c=function(){function e(e,t){var n=this;this.sw=e,this.SWClient=t,vk.id&&this.canBeEnabled().then((function(e){e&&(n.listenPermission(),n.loadEndpoint()&&n.update().then(n.checkMessageState.bind(n)))}))}e.getPermission=function(){return Notification.permission};var t=e.prototype;return t.cleanNotification=function(){this.sw.action("cleanNotification")},t.canBeEnabled=function(){return Promise.resolve(this.isSupported())},t.isSupported=function(){return"PushManager"in window&&"Notification"in window&&this.SWClient.isSupported()},t.loadEndpoint=function(){return a.default.get(o+vk.id)||!1},t.saveEndpoint=function(e){a.default.set(o+vk.id,e||!1)},t.action=function(e,t){return this.sw.action(e,t)},t._needupdate=function(e){var t=Date.now(),n=this.loadEndpoint(),r=a.default.get(s+vk.id),u=!1;return(n!==e.endpoint||!r||t-r>6e4)&&(a.default.set(s+vk.id,t),u=!0),u},t.listenPermission=function(){var e=this;(0,r.partConfigEnabled)("push_notifier")&&navigator.permissions&&navigator.permissions.query&&navigator.permissions.query({name:"notifications"}).then((function(t){t.onchange=function(){return e.update()}}))},t.update=function(){var t=this;return this.updatePermission().then((function(n){return n===e.PUSH_NOTIFIER_PERMISSION_GRANTED?t.subscribe().catch((function(t){t!==e.SUBSCRIBE_ERROR_NETWORK&&(0,i.error)("can not update subscribe")})):Promise.reject("premession_not_granted")})).catch(i.error)},t.updatePermission=function(){var t=e.getPermission();if(t!==e.PUSH_NOTIFIER_PERMISSION_GRANTED){var n=this.loadEndpoint();if(n)return this.unsubscribe(n).then((function(){return t}))}return Promise.resolve(t)},t.processSubscribe=function(t){return t.subscribe({userVisibleOnly:!0,applicationServerKey:(0,u.urlBase64ToUint8Array)(e.SERVER_KEY)})},t.setupSubscription=function(){var t=this;return new Promise((function(n,r){var u=e.getPermission(),i=function(){t.subscribe(!0).then((function(){n()})).catch((function(){r()}))};u!==e.PUSH_NOTIFIER_PERMISSION_DENIED?u!==e.PUSH_NOTIFIER_PERMISSION_GRANTED?u===e.PUSH_NOTIFIER_PERMISSION_DEFAULT&&t.requestPermission().then((function(t){t===e.PUSH_NOTIFIER_PERMISSION_GRANTED?i():r()})):i():r(e.PUSH_NOTIFIER_BLOCKED_BY_BROWSER_SETTINGS)}))},t.subscribe=function(t){var n=this;return this.sw.getRegistration().then((function(e){var t=e.pushManager;return t.getSubscription().then((function(e){if(e){var r=e.expirationTime;return r&&Date.now()>r-432e6?n.unsubscribe(n.loadEndpoint()).then((function(){return n.processSubscribe(t)})):e}return n.processSubscribe(t)}))})).then((function(r){return new Promise((function(u,i){if(t||n._needupdate(r)){var a=r.getKey("p256dh"),o=r.getKey("auth");window.ajax.post(e.SERVER_URL,{act:"a_subscribe",hash:n.sw.getParams().push_hash,endpoint:r.endpoint,key:a?btoa(String.fromCharCode.apply(null,new Uint8Array(r.getKey("p256dh")))):null,token:o?btoa(String.fromCharCode.apply(null,new Uint8Array(r.getKey("auth")))):null},{onDone:function(e){e?(n.saveEndpoint(r.endpoint),u()):i()},onFail:function(){return i(e.SUBSCRIBE_ERROR_NETWORK),!0}})}else u()}))}))},t.unsubscribe=function(t){var n=this;return this.sw.register().then((function(r){return r.pushManager.getSubscription().then((function(r){return r?r.unsubscribe().then((function(r){return r?new Promise((function(r,u){ajax.post(e.SERVER_URL,{act:"a_unsubscribe",endpoint:t},{onDone:function(e){e?(n.saveEndpoint(!1),r()):u()}})})):Promise.reject("ERROR: can not unsubscribe")})):(n.saveEndpoint(!1),Promise.reject("ERROR: no subscription"))}))}))},t.requestPermission=function(){var t=e.getPermission();return t===e.PUSH_NOTIFIER_PERMISSION_DEFAULT?new Promise((function(e,t){var n=Notification.requestPermission((function(t){e(t)}));n instanceof Promise&&n.then(e,t)})):Promise.resolve(t)},t.checkMessageState=function(){var t=this;return new Promise((function(e){return setTimeout(e,5e3)})).then((function(){return t.action("getMessagesMetaData")})).then((function(t){return"object"==typeof t&&Object.keys(t).length?new Promise((function(n,r){window.ajax.post(e.SERVER_URL,{act:"a_update_messages_state",data:Object.entries(t)},{onDone:function(e){e?n(e):r("ERROR: act error")},onFail:function(){return r("ERROR: network error"),!0}})})):Promise.resolve({})})).then((function(e){try{return JSON.parse(e)}catch(e){return{}}})).then((function(e){return t.action("updateMessageNotifications",e)})).catch((function(e){return(0,i.error)(e)}))},e}();c.SERVER_KEY="BPrntRk2W1_ISFwlgY-vz9tQDg9i1oSQ3-N8xyjdbNAbIOdZIGFdh5FlO7zn730UwU9Sayoec-Fpqq4JZFTyv60",c.SERVER_URL="push_notifier",c.PUSH_NOTIFIER_PERMISSION_GRANTED="granted",c.PUSH_NOTIFIER_PERMISSION_DEFAULT="default",c.PUSH_NOTIFIER_PERMISSION_DENIED="denied",c.PUSH_NOTIFIER_BLOCKED_BY_BROWSER_SETTINGS="BLOCKED_BY_BROWSER_SETTINGS",c.SUBSCRIBE_ERROR_NETWORK="SUBSCRIBE_ERROR_NETWORK",t.default=c},43675:function(e,t,n){"use strict";var r=n(28708),u=function(){if(!("fetch"in window))return function(){};var e=["standalone","fullscreen","minimal-ui"],t="#ffffff",n=128,u=navigator.vendor&&-1!==navigator.vendor.indexOf("Apple");function i(e,t,n){void 0===n&&(n=!1);var r=a(e);if((r.drawImage(e,0,0),!n)&&255==r.getImageData(0,0,1,1).data[3])return null;return r.globalCompositeOperation="destination-over",r.fillStyle=t,r.fillRect(0,0,e.width,e.height),r.canvas.toDataURL()}function a(e){var t=void 0===e?{width:1,height:1}:e,n=t.width,r=t.height,u=document.createElement("canvas");return u.width=n,u.height=r,u.getContext("2d")}return function(){if(u){var o=document.head.querySelector('link[rel="manifest"]'),s=o?o.href:"",c=function(e){for(var t=function(t){var n=e[t];try{return new URL("",n),{v:function(e){return new URL(e,n).toString()}}}catch(e){}},n=0;n<e.length;++n){var r=t(n);if("object"==typeof r)return r.v}return function(e){return e}}([s,window.location]);Promise.resolve().then((function(){if(!s)throw'can\'t find <link rel="manifest" href=".." />\'';var e={};return"use-credentials"===s.crossOrigin&&(e.credentials="include"),window.fetch(s,e)})).then((function(e){return e.json()})).then((function(u){return function(u,o){var s=(u.icons||[]).filter((function(e){return"apple-splashscreen"===e.purpose}));s.sort((function(e,t){return parseInt(t.sizes,10)-parseInt(e.sizes,10)}));var c=s.map((function(e){return{href:o(e.src),sizes:e.sizes}})),l=u.display,D=-1!==e.indexOf(l);(function(e){var t=function(e){var t=a();return t.fillStyle=e,t.fillRect(0,0,1,1),t.getImageData(0,0,1,1).data}(e).map((function(e){var t=e/255;return t<.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),n=.2126*t[0]+.7152*t[1]+.0722*t[2];Math.abs(1.05/(n+.05))})(u.background_color||t),u.name||u.short_name||document.title;navigator.standalone||(f="apple-mobile-web-app-capable",(d=D)&&(!0===d&&(d="yes"),function(e,t){var n=document.createElement(e);for(var r in t)n.setAttribute(r,t[r]);document.head.appendChild(n)}("meta",{name:f,content:d})));var f,d;function _(e,r,i){var o=e.width,s=e.height,c=window.devicePixelRatio,l=a({width:o*c,height:s*c});if(l.scale(c,c),l.fillStyle=u.background_color||t,l.fillRect(0,0,o,s),l.translate(o/2,(s-32)/2),i){var D=i.width/c,f=i.height/c;f>n&&(D/=f/n,f=n),D>=48&&f>=48&&(l.drawImage(i,D/-2,f/-2,D,f),l.translate(0,f/2+32))}var d=document.createElement("link");return d.setAttribute("rel","apple-touch-startup-image"),d.setAttribute("media","screen and (orientation: "+r+")"),d.setAttribute("href",l.canvas.toDataURL()),d}var A=new Set;function p(e){var t=_(window.screen,"portrait",e),n=_({width:window.screen.height,height:r.isIPad?window.screen.height:window.screen.width},"landscape",e);A.forEach((function(e){return e.remove()})),document.head.appendChild(t),document.head.appendChild(n),A.add(t),A.add(n)}if(p(null),!c.length)return;var m=c[0],h=new Image;h.crossOrigin="anonymous",h.onload=function(){if(p(h),u.background_color){var e=i(h,u.background_color);null!==e&&(m.href=e,c.slice(1).forEach((function(e){var t=new Image;t.crossOrigin="anonymous",t.onload=function(){var n=i(t,u.background_color,!0);e.href=n},t.src=e.href})))}},h.src=m.href}(u,c)})).catch((function(e){return console.warn("pwacompat.js error",e)}))}}}();t.default=u},94750:function(e,t,n){"use strict";n.d(t,{default:function(){return u}});var r="SW: serviceWorker is unavailable",u=function(){function e(){this.registration=null,this._handlers=[],this.params=null}e.isSupported=function(){try{return!(!window.fetch||window.fetch.polyfill&&!window.fetch.forcedPolyfill||!navigator.serviceWorker)}catch(e){return!1}};var t=e.prototype;return t.listenMessages=function(){navigator.serviceWorker.addEventListener("message",this._onmessage.bind(this))},t.register=function(t){if(!e.isSupported())return Promise.reject(r);var n=t&&t.url;return n?(this.params=t,navigator.serviceWorker.register(n,{scope:"/",updateViaCache:"none"}).then(function(e){return this.registration||(this.registration=e),e}.bind(this))):Promise.reject("SW: incorrect url")},t.getRegistration=function(){return e.isSupported()?navigator.serviceWorker.ready.then(function(e){return this.registration||(this.registration=e),e}.bind(this)):Promise.reject(r)},t.unregister=function(){this.registration&&this.registration.unregister(),this._handlers.forEach((function(e){return e[0].removeEventListener(e[1],e[2])})),this._handlers=[]},t.update=function(){this.registration&&this.registration.update()},t.getParams=function(){return this.params||{}},t._addEventListener=function(e,t,n,r){void 0===r&&(r=!0);var u=!1;this._handlers.forEach((function(r){r[0]===e&&r[1]===t&&r[2]===n&&(u=!0)})),u&&!r||(this._handlers.push([e,t,n]),e.addEventListener(t,n))},t.action_devicePixelRatio=function(){return window.devicePixelRatio},t.action_pushHash=function(){return this.getParams().push_hash},t.storePushHash=function(){var e=this.getParams().push_hash;this.action("storePushHash",{hash:e})},t.action=function(e,t){var n=null;return n=Array.isArray(e)?e:[[e,t]],this._message({actions:n}).then((function(e){return e.answers?Promise.resolve(1===n.length?e.answers[0]:e.answers):Promise.reject(new Error("ServiceWorker answer is incorrect"))}))},t._message=function(e){var t=this;return this.getRegistration().then((function(){return new Promise(function(t,n){var r=new MessageChannel;r.port1.onmessage=function(e){this._messageCheck(e)?t(e.data.data):n(new Error("ServiceWorker message is incorrect"))}.bind(this),this.registration.active.postMessage(this._messageWrap(e),[r.port2])}.bind(t))}))},t._onmessage=function(e){if(this._messageCheck(e)){var t=e.data.data;if(t.actions&&Array.isArray(t.actions)){var n=[];t.actions.forEach(function(t){var r="action_"+t[0],u=t[1],i=this[r]?this[r](u,e):void 0;i instanceof Promise||(i=Promise.resolve(i)),n.push(i)}.bind(this)),Promise.all(n).then(function(t){var n={};t.forEach((function(e,t){void 0!==e&&(n[t]=e)})),Object.keys(n).length&&e.ports[0].postMessage(this._messageWrap({answers:n}))}.bind(this))}}},t._messageCheck=function(e){return(""===e.origin||e.origin.match(/^https:\/\/([a-zA-Z0-9\-\.]+\.)?vk\.com$/))&&e.data&&e.data.data&&"sw"===e.data.type},t._messageWrap=function(e){return{type:"sw",data:e}},e}();u.SW_NOT_AVAILABLE_ERROR=r},38036:function(e,t,n){"use strict";n.d(t,{rebuildNotifications:function(){return o},recordClick:function(){return s},showMenuItems:function(){return c}});var r=n(1730),u=n(11393),i=n(58107),a=n(54412);function o(){var e=(0,r.$)(".MainMenu__menu");if(e){var t=window.store.menuNotifications;if(t){var n=(0,r.$)(".MainMenu__menuItem--apps .MainMenu__menuItemTitle",e);if(n){var o=(0,r.$)('[data-id="menu-apps-notification"]',n);!t[a.COUNTERS_POS_APPS]&&o&&o.remove(),t[a.COUNTERS_POS_APPS]&&!o&&(n.innerHTML+=u.default.render((0,i.default)({id:"menu-apps-notification"})))}}}}function s(e){window.ajax.post("/",{act:"menu_item_click_record",menu_item:e})}function c(e){(0,r.$$)(".MainMenu__menuItem--hidden").forEach((function(e){e.classList.remove("MainMenu__menuItem--hidden")})),e.classList.add("MainMenu__menuItem--hidden")}},11475:function(e,t){"use strict";t.default=function(e){return{class:"MainMenuNotificationDot","data-id":e.id,tag:"span"}}},58107:function(e,t,n){"use strict";var r=n(11475);t.default=r.default},53502:function(e,t,n){"use strict";n.d(t,{addStatic:function(){return d},addStaticVersions:function(){return _},preloadStaticForNavigation:function(){return A},initStaticManager:function(){return p}});var r=n(24037),u=(n(9046),[]);function i(e){window.stManager.staticFiles[o(e)]=Promise.resolve()}function a(){window.vk&&window.vk.stFiles&&window.stManager?(Object.keys(window.vk.stFiles).forEach((function(e){return i(e)})),window.vk.stFiles=[]):setTimeout(a,0)}function o(e){return e.replace(/^https:\/\/st[-\d]*\.vk\.com\//i,"static://")}function s(e){var t,n;if(e.startsWith("/")||/^http(s)?:\/\//.test(e))return[e];e=function(e){return e.startsWith("/")||c(e)?e:l(e)?(e.startsWith("/css/mobile")?e=e.replace("/css/",""):e.startsWith("mobile/")||(e="mobile/"+e),e):e}(e);var r=null==(t=window.vk)?void 0:t.stDeps[e];return r||((null==(n=window.vk)?void 0:n.__dev)?[e]:[])}function c(e){return e.endsWith(".js")}function l(e){return e.endsWith(".css")}function D(e,t){if(!window.stManager)return Promise.resolve();var n,u=o(e),i=window.stManager.staticFiles[u];return i||((e=function(e){var t;if(/^http(s)?:\/\//.test(e))return e;var n=(null==(t=window.vk)?void 0:t.stDomain)||"",r="";return c(e)?r="dist/mobile/":l(e)&&e.startsWith("mobile/")&&(r="css/"),e.startsWith("/")&&(e=e.replace("/","")),e.startsWith(r)||(e=r+e),n+"/"+e}(e)).includes(".js")?n=function(e,t){var n=e;return t&&(n+="?"+t),new Promise((function(e,t){var u=document.getElementsByTagName("script");Array.from(u).some((function(e){return e.src===n}))?e():(0,r.loadScript)(n,(function(n){n?t(n):e()}))}))}(e,t):e.includes(".css")&&(n=function(e,t){var n=(0,r.supportsOnload)()?r.loadStyle:r.addStyleSheetOldBrowser,u=e;t&&(u+="?"+t);var i=document.getElementsByTagName("link"),a=Array.from(i).find((function(e){return e.href===u}));return a?Promise.resolve(a):n(u)}(e,t)),n&&(window.stManager.staticFiles[u]=n,n.catch((function(){window.stManager.staticFiles[u]=null}))),n||Promise.resolve())}function f(e){u[e]&&u[e]()}function d(e){return void 0===e&&(e={}),_(e.reduce((function(e,t){return e[t]=0,e}),{}))}function _(e){return Promise.all(Object.keys(e).map((function(t){var n=s(t);return n?Promise.all(n.map((function(e){return D(e,n[e])}))):D(t,e[t])})))}function A(e){var t=window.vk.stNavMap||{};for(var n in t){if(t.hasOwnProperty(n))if(new RegExp(n).test(e)){d(t[n]||[]);break}}}function p(){a(),window.stManager={addStatic:d,done:f,staticFiles:[],registerLoadedScript:i}}},33912:function(e,t,n){"use strict";n.d(t,{emojiRegex:function(){return r},skinToneModifierRegex:function(){return u},EMOJI_PREFIXED_REPLACES:function(){return i},EMOJI_REPLACES:function(){return a},EMOJI_HINTS:function(){return o}});var r=function(){return/(?:\uD83C\uDFF4)(?:(?:\uDB40\uDC67)(?:\uDB40\uDC62)(?:(?:\uDB40\uDC65)(?:\uDB40\uDC6E)(?:\uDB40\uDC67)|(?:\uDB40\uDC77)(?:\uDB40\uDC6C)(?:\uDB40\uDC73)|(?:\uDB40\uDC73)(?:\uDB40\uDC63)(?:\uDB40\uDC74))(?:\uDB40\uDC7F)|\u200D\u2620\uFE0F?)|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC69)\u200D(?:(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83D\uDC68)(?:\u200D(?:\u2764\uFE0F?\u200D(?:(?:\uD83D\uDC8B)\u200D)?(?:\uD83D\uDC68)|(?:\uD83D[\uDC68\uDC69])\u200D(?:(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|(?:\uD83D\uDC69)\u200D(?:\u2764\uFE0F?\u200D(?:(?:\uD83D\uDC8B)\u200D(?:\uD83D[\uDC68\uDC69])|(?:\uD83D[\uDC68\uDC69]))|(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:(?:\uD83D\uDC41)\uFE0F?\u200D(?:\uD83D\uDDE8)|(?:\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|(?:\uD83D\uDC68)(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F?|(?:\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]))\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|(?:\uD83D\uDC69)\u200D[\u2695\u2696\u2708])\uFE0F?|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC69)\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC68)(?:\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC66\uDC67]))|(?:\uD83C[\uDFFB-\uDFFF]))|(?:\uD83C\uDFF3)\uFE0F?\u200D(?:\uD83C\uDF08)|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC67)|(?:\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3])|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC66)|(?:\uD83C\uDDF6)(?:\uD83C\uDDE6)|(?:\uD83C\uDDFD)(?:\uD83C\uDDF0)|(?:\uD83C\uDDF4)(?:\uD83C\uDDF2)|(?:\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C\uDDED)(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|(?:\uD83C\uDDEC)(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|(?:\uD83C\uDDEA)(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|(?:\uD83C\uDDE8)(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\uD83C\uDDF2)(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|(?:\uD83C\uDDF3)(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|(?:\uD83C\uDDFC)(?:\uD83C[\uDDEB\uDDF8])|(?:\uD83C\uDDFA)(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|(?:\uD83C\uDDF0)(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|(?:\uD83C\uDDEF)(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C\uDDF8)(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|(?:\uD83C\uDDEE)(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|(?:\uD83C\uDDFF)(?:\uD83C[\uDDE6\uDDF2\uDDFC])|(?:\uD83C\uDDEB)(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|(?:\uD83C\uDDF5)(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|(?:\uD83C\uDDE9)(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|(?:\uD83C\uDDF9)(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|(?:\uD83C\uDDE7)(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|[#\*0-9]\uFE0F?\u20E3|(?:\uD83C\uDDF1)(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|(?:\uD83C\uDDE6)(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|(?:\uD83C\uDDF7)(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|(?:\uD83C\uDDFB)(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|(?:\uD83C\uDDFE)(?:\uD83C[\uDDEA\uDDF9])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF9]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF])|(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF9]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF])\uFE0F?|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDD1-\uDDDD])/g},u=/\uFE0F?\uD83C[\uDFFB-\uDFFF]/,i={e29da4:/(\s|^)([0OО]:\))([\s\.,]|$)/g,f09f9887:/(\s|^)(;-\)+)([\s\.,]|$)/g,f09f9889:/(\s|^)([XХxх]-?D)([\s\.,]|$)/g,f09f9886:/(\s|^)(B-\))([\s\.,]|$)/g,f09f988e:/(\s|^)(3-\))([\s\.,]|$)/g,f09f988c:/(\s|^)(&gt;\()([\s\.,]|$)/g,f09f98a0:/(\s|^)(;[oоOО])([\s\.,]|$)/g,f09f98b0:/(\s|^)(8\|)([\s\.,]|$)/g,f09f98b3:/(\s|^)(8-?[oоOО])([\s\.,]|$)/g,f09f98b2:/(\s|^)(8-\))([\s\.,]|$)/g,f09f988d:/(\s|^)(:[XХ])([\s\.,]|$)/g,f09f98b7:/(\s|^)(:[oоOО])([\s\.,]|$)/g,f09f98a8:/(\s|^)(&lt;3)([\s\.,]|$)/g},a={f09f988a:/(:-\))([\s\.,]|$)/g,f09f9883:/(:-D)([\s\.,]|$)/g,f09f989c:/(;-[PР])([\s\.,]|$)/g,f09f988b:/(:-[pр])([\s\.,]|$)/g,f09f9892:/(:-\()([\s\.,]|$)/g,e298ba:/(:-?\])([\s\.,]|$)/g,f09f988f:/(;-\])([\s\.,]|$)/g,f09f9894:/(3-?\()([\s\.,]|$)/g,f09f98a2:/(:&#039;\()([\s\.,]|$)/g,f09f98ad:/(:_\()([\s\.,]|$)/g,f09f98a9:/(:\(\()([\s\.,]|$)/g,f09f9890:/(:\|)([\s\.,]|$)/g,f09f98a1:/(&gt;\(\()([\s\.,]|$)/g,f09f989a:/(:-\*)([\s\.,]|$)/g,f09f9888:/(\}:\))([\s\.,]|$)/g,f09f918d:/(:like:)([\s\.,]|$)/g,f09f918e:/(:dislike:)([\s\.,]|$)/g,e2989d:/(:up:)([\s\.,]|$)/g,e29c8c:/(:v:)([\s\.,]|$)/g,f09f918c:/(:ok:|:ок:)([\s\.,]|$)/g},o={e29da4:[0,"<3"],f09f988a:[1,":-)"],f09f9883:[2,":-D"],f09f9889:[3,";-)"],f09f9886:[4,"xD"],f09f989c:[5,";-P"],f09f988b:[6,":-p"],f09f988d:[7,"8-)"],f09f988e:[8,"B-)"],f09f9892:[9,":-("],f09f988f:[10,";-]"],f09f9894:[11,"3("],f09f98a2:[12,":'("],f09f98ad:[13,":_("],f09f98a9:[14,":(("],f09f98a8:[15,":o"],f09f9890:[16,":|"],f09f988c:[17,"3-)"],f09f98a0:[18,">("],f09f98a1:[19,">(("],f09f9887:[20,"O:)"],f09f98b0:[21,";o"],f09f98b3:[22,"8|"],f09f98b2:[23,"8o"],f09f98b7:[24,":X"],f09f989a:[25,":-*"],f09f9888:[26,"}:)"],f09f918d:[27,":like:"],f09f918e:[28,":dislike:"],e2989d:[29,":up:"],e29c8c:[30,":v:"],f09f918c:[31,":ok:"]}},19018:function(e,t,n){"use strict";n.d(t,{emojiToHTML:function(){return a}});var r=n(33912),u=n(76653),i=n(58862);function a(e,t){if(browser.ipad||browser.iphone)return e;e=(e+"").replace(/&nbsp;/g," ").replace(/<br>/g,"\n");for(var n=0;n<2;n++)Object.keys(r.EMOJI_PREFIXED_REPLACES).forEach((function(t){e.replace(r.EMOJI_PREFIXED_REPLACES[t],(function(e,n,r,u){return(n||"")+o(t)+(u||"")}))}));return Object.keys(r.EMOJI_REPLACES).forEach((function(t){e=e.replace(r.EMOJI_REPLACES[t],(function(e,n,r){return o(t)+(r||"")}))})),e=e.replace(/\n/g,"<br>"),t&&(e=e.replace(/\uFE0F/g,"").replace((0,r.emojiRegex)(),s)),e}function o(e,t,n,r){return!n&&t?t:r?'<i class="emoji @'+e+'" emoji="'+e+'"'+(t?' title="'+t+'"':"")+"></i>":'<img class="emoji" src="/emoji/e/'+e+(window.devicePixelRatio>=2?"_2x":"")+'.png"'+(t?' alt="'+t+'"':"")+(browser.msie&&Number(browser.version)>8?' contenteditable="false"':"")+">"}function s(e){return o((0,u.emojiSymbolToByteHex)(e),(0,i.encodeHTMLEntities)(e),!0)}},76653:function(e,t,n){"use strict";n.d(t,{emojiSymbolToByteHex:function(){return u},emojiByteHexToSymbol:function(){return i},emojiRemoveSkinToneModifiers:function(){return a}});var r=n(33912);function u(e){return encodeURIComponent(e.replace(/\uFE0F/gi,"")).replace(/%/gi,"").toLowerCase()}function i(e){var t,n=e.length%2==1,r=n?e.slice(0,1):"",u=n?e.slice(1):e,i="";try{i=decodeURIComponent("%"+(t=u,t.split("").reduce((function(e,t,n){return e+t+((n+1)%2==0?" ":"")}),"").trim().split(/\s+/)).join("%"))}catch(e){}return r+i}function a(e){return e.replace((0,r.emojiRegex)(),o)}function o(e){return e.replace(r.skinToneModifierRegex,"")}},58862:function(e,t,n){"use strict";n.d(t,{encodeHTMLEntities:function(){return u},decodeHTMLEntities:function(){return i}});var r=[["&amp;","&"],["&lt;","<"],["&gt;",">"],["&quot;",'"']];function u(e){return function(e){return r.reduce((function(e,t){var n=t[0],r=t[1];return e.replace(new RegExp(r,"ig"),n)}),e)}(e).replace(/[\u00A0-\u9999<>\&]/gim,(function(e){return"&#"+e.charCodeAt(0)+";"}))}function i(e){return r.reduce((function(e,t){var n=t[0],r=t[1];return e.replace(new RegExp(n,"ig"),r)}),e).replace(/&#(\d+);/g,(function(e,t){return String.fromCodePoint(t)}))}},95343:function(e,t,n){"use strict";n.d(t,{PINNED_CONVERSATION_BIT_MASK:function(){return r},MASS_MENTION_ALIASES:function(){return u},MASS_MENTION_REGEXP:function(){return i},VK_OFFICIAL_PEER_ID:function(){return a}});var r=112,u={all:["all","everyone","все"],online:["online","here","здесь","тут"]},i=new RegExp(['(?!,|;|:|\\.|\\s|<br ?/?>|"|\\(|\\)|\\[|\\]|!|\\?)',"(",[].concat(u.all).concat(u.online).map((function(e){return"@"+e+"|\\*"+e})).join("|"),")",'(?=$|,|;|:|\\.(?![a-z0-9_-])|\\s|<br ?/?>|"|\\(|\\)|\\[|\\]|!|\\?)'].join(""),"gi"),a=-22822305},39161:function(e,t,n){"use strict";n.d(t,{SAKIntegration:function(){return u}});var r=n(72962),u={isIntegrated:!1,origin:"",name:"",type:"",onMessage:new(n(70793).default),init:function(e){if(u.isIntegrated=!0,u.origin=function(e){var t=e.origin;if(!t)try{t=sessionStorage.getItem("_sak_embed_origin")}catch(e){}if(t)try{sessionStorage.setItem("_sak_embed_origin",t)}catch(e){}return t||""}(e),u.type=e.type,u.isNewMail=e.isNewMail,u._cleanUrl(),u.origin||window.parent!==window){var t=e.name||(u.isNewMail?"mvk_embedded_mail":"mvk_embedded_other");document.documentElement.style.setProperty("visibility","hidden","important"),u.name=t,u.embedded=new r.Embedded({name:t,target:window.parent,origin:u.origin,onMessage:function(e,t){u.onMessage.emit("embed",e,t),"click"===e&&u.doClick(t.selector)}}),u._ready=u.embedded.sendMessage("ready",{}).then((function(){document.documentElement.classList.remove("vk_sak_embed_hidden"),document.documentElement.style.removeProperty("visibility")}))}else document.documentElement.classList.remove("vk_sak_embed_hidden")},sendMessage:function(e,t,n){if(void 0===n&&(n=""),u.isIntegrated)if(u._ready){if(!n||!u.name||u.name===n)return u._ready.then((function(){return u.embedded.sendMessage(e,t)}))}else console.error("SAKIntegration not ready")},doClick:function(e){if(e){var t=document.querySelector(e);t&&t.click()}},reauth:function(){return u.embedded.sendMessage("sak:reauth",{}).catch((function(){return{}}))},_cleanUrl:function(){var e=location.search.slice(1).split("&").reduce((function(e,t){return t.startsWith("_sak_embed")||e.push(t),e}),[]).join("&");history.replaceState(null,"",location.pathname+"?"+e+location.hash)}}},28397:function(e,t,n){"use strict";n.d(t,{log:function(){return i},error:function(){return a}});var r=n(86353);function u(){return window.console&&(0,r.partConfigEnabled)("js_console_logs")}function i(){var e;u()&&(window.console.log&&(e=window.console).log.apply(e,arguments))}function a(){var e;u()&&(window.console.error?(e=window.console).error.apply(e,arguments):i.apply(void 0,arguments))}},70793:function(e,t,n){"use strict";var r=n(13944),u=n.n(r);window.EventEmitter=u(),t.default=u()},63705:function(e,t){"use strict";function n(){return navigator.connection||navigator.mozConnection||navigator.webkitConnection}function r(){var e=n();return e&&e.type||"unknown"}function u(){var e=n();return e&&e.effectiveType||"unknown"}t.default={getConnection:n,getConnectionType:r,getConnectionEffectiveType:u,getConnectionTypeID:function(){return{unknown:0,bluetooth:1,cellular:2,ethernet:3,none:4,wifi:5,wimax:6,other:7}[r()]||0},getConnectionEffectiveTypeID:function(){return{unknown:0,"slow-2g":1,"2g":2,"3g":3,"4g":4}[u()]||0}}},27192:function(e,t,n){"use strict";function r(e,t){return new Promise((function(n){setTimeout(n.bind(null,t),1e3*e)}))}function u(e,t,n){void 0===n&&(n=null);var u=0;return function i(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return Promise.resolve().then((function(){return e.apply(void 0,o)})).catch((function(e){if(++u<=t){var a="function"==typeof n?n(u):0;return 0===a?i.apply(void 0,o):r(a).then((function(){return i.apply(void 0,o)}))}throw e}))}}function i(e,t){var n,r=new Promise((function(r){n=r,setTimeout(r.bind(null,t),1e3*e)}));return{pause:function(){return r},abort:function(){n(t)}}}n.d(t,{retryFn:function(){return u},abortablePause:function(){return i}})},24037:function(e,t,n){"use strict";n.d(t,{loadStyle:function(){return r},loadScript:function(){return i},addStyleSheetOldBrowser:function(){return a},supportsOnload:function(){return o}});function r(e){return new Promise((function(t,n){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.href=e,r.onload=function(){return t(r)},r.onerror=function(){return n(new Error("Stylesheet load error for "+e))},document.head.appendChild(r)}))}var u;function i(e,t){var n=document.createElement("script");n.src=e,n.onload=function(){return t(null,n)},n.onerror=function(){return t(new Error("Script load error for "+e))},document.head.appendChild(n)}function a(e){var t,n=(t=e,new Promise((function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.onload=function(){200===r.status?e(r.response):n(r.response)},r.onerror=function(){n(r.response)},r.send()})));return n.then((function(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)})),n}function o(){if(void 0!==u)return u;var e="flex";try{var t=document.createElement("b");t.style.display=e,u=t.style.display===e}catch(e){u=!1}return u}},3811:function(e,t,n){"use strict";n.d(t,{SECOND:function(){return r},HOUR:function(){return u},PUSH_NOTIFIER_PERMISSION_GRANTED:function(){return i},PUSH_NOTIFIER_PERMISSION_DEFAULT:function(){return a}});var r=1e3,u=60*(60*r),i="granted",a="default"},35217:function(e,t,n){"use strict";function r(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),u=0;u<n.length;++u)r[u]=n.charCodeAt(u);return r}n.d(t,{urlBase64ToUint8Array:function(){return r}})},54412:function(e,t,n){"use strict";n.d(t,{COUNTERS_POS_NOTIFICATIONS:function(){return r},COUNTERS_POS_MESSAGES:function(){return u},COUNTERS_POS_APPS:function(){return i},Z_PHOTO_REGEX:function(){return a},STATLOG_MEDIAVIEW_EVENT:function(){return o},DESKTOP_WIDTH:function(){return s}});var r=2,u=3,i=10,a=/^photo(-?\d+_\d+)(?:\/([a-z0-9_-]+(\/rev)?)?)?$/i,o="mvk_mediaview_event",s=882},46950:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{emojiToHTML:function(){return _mobile_emoji_html__WEBPACK_IMPORTED_MODULE_0__.emojiToHTML},isPinnedSortId:function(){return _shared_im_helpers__WEBPACK_IMPORTED_MODULE_3__.isPinnedSortId},isObject:function(){return isObject},mergeObjects:function(){return mergeObjects},classNames:function(){return classNames},mergeArrays:function(){return mergeArrays},concatValues:function(){return concatValues},getLang:function(){return getLang},getLangNumeric:function(){return getLangNumeric},langNumeric:function(){return langNumeric},stringifyJSON:function(){return stringifyJSON},wrapCommunityMailUrl:function(){return wrapCommunityMailUrl},mailReplaceMentions:function(){return mailReplaceMentions},mailReplaceDomainMentions:function(){return mailReplaceDomainMentions},mailWrapMention:function(){return mailWrapMention},getState:function(){return getState},wdToFlatArray:function(){return wdToFlatArray},fromCharCode:function(){return fromCharCode},timestamp:function(){return timestamp},getDayNumberFromUnixtime:function(){return getDayNumberFromUnixtime},getMonthNumberFromUnixtime:function(){return getMonthNumberFromUnixtime},formatDuration:function(){return formatDuration},toArray:function(){return toArray},arrayLength:function(){return arrayLength},isArray:function(){return isArray},arrayIncludes:function(){return arrayIncludes},inlineIconResolver:function(){return inlineIconResolver},isSAKIntegration:function(){return isSAKIntegration},isEduIntegration:function(){return isEduIntegration},isVKPayIntegration:function(){return isVKPayIntegration},langTag:function(){return langTag},arraySomeEqual:function(){return arraySomeEqual},preactCallback:function(){return preactCallback},getLangReplace:function(){return getLangReplace},winToUtf:function(){return winToUtf},getNumShort:function(){return getNumShort},formatPrice:function(){return formatPrice},getAvatarMode:function(){return getAvatarMode},getAvatarTextLength:function(){return getAvatarTextLength},convertToUtf:function(){return convertToUtf},convertToWin:function(){return convertToWin},mbSubstr:function(){return mbSubstr},decodeHTMLEntities:function(){return decodeHTMLEntities},cleanName:function(){return cleanName},stylesObjectToString:function(){return stylesObjectToString},parseHTMLAttributes:function(){return parseHTMLAttributes},getRandomId:function(){return getRandomId},isString:function(){return isString},toString:function(){return toString},isJSFunction:function(){return isJSFunction},getClientSizes:function(){return getClientSizes},isChatPeer:function(){return _mobile_lib_Mail__WEBPACK_IMPORTED_MODULE_1__.isChatPeer},isContactPeer:function(){return _mobile_lib_Mail__WEBPACK_IMPORTED_MODULE_1__.isContactPeer},isForwardedMessageId:function(){return _mobile_lib_Mail__WEBPACK_IMPORTED_MODULE_1__.isForwardedMessageId},extend:function(){return _mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.extend},makeUrl:function(){return _mobile_lib_Url__WEBPACK_IMPORTED_MODULE_4__.makeUrl}});var tslib__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(97316),_mobile_emoji_html__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(28638),_mobile_lib_Mail__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(24945),_mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9046),_shared_im_helpers__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(71372),_shared_helpers_html_entities__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(58862),_mobile_lib_Url__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(80444),_mobile_lib_Withdom__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(11393),_shared_lib_SAKIntegration__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(39161),_vkontakte_vkjs_lib_classNames__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(25661);function isObject(e){return(0,_mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.isObject)(e)}function isJS(){return!0}var log=console.log,mergeObjects=Object.assign,classNames=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return _vkontakte_vkjs_lib_classNames__WEBPACK_IMPORTED_MODULE_7__.classNames.apply(void 0,(0,tslib__WEBPACK_IMPORTED_MODULE_8__.__spreadArray)([],(0,tslib__WEBPACK_IMPORTED_MODULE_8__.__read)(e)))};function arraySlice(e,t,n){return e.slice(t,n)}function mergeArrays(e,t){return Array.isArray(e)&&Array.isArray(t)?e.concat(t):[]}function concatValues(e,t){return e+t}function isFinite(e){return window.isFinite(e)}function getLang(e,t){return window.getLang(e,t)}function partConfigEnabled(e){var t=(window.vk||{}).pe;return!!(void 0===t?{}:t)[e]}function getLangNumeric(e,t,n){return(0,_mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.langNumeric)(e,t,n)}function langNumeric(e,t,n){return void 0===n&&(n=!1),(0,_mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.langNumeric)(e,t,n)}function insertBetween(e,t){var n=[];return e.forEach((function(r,u){var i=e[u+1],a=e[u+2];r&&n.push(r),r&&(i||a)&&n.push(t)})),n}function stringifyJSON(e){return JSON.stringify(e)}function parseJSON(e){return JSON.parse(e)}function wrapCommunityMailUrl(e){return(0,_mobile_lib_Mail__WEBPACK_IMPORTED_MODULE_1__.wrapCommunityUrl)(e)}function mailReplaceMentions(e,t){return e.replace(_mobile_lib_Mail__WEBPACK_IMPORTED_MODULE_1__.MENTION_REGEXP,t)}function mailReplaceDomainMentions(e,t){return e.replace(_mobile_lib_Mail__WEBPACK_IMPORTED_MODULE_1__.MENTION_DOMAIN_REGEXP,t)}function mailWrapMention(e){return(0,_mobile_lib_Mail__WEBPACK_IMPORTED_MODULE_1__.wrapMention)(e)}function getState(e){return window.isomorphicState&&window.isomorphicState[e]||[]}function wdToFlatArray(e){return _mobile_lib_Withdom__WEBPACK_IMPORTED_MODULE_5__.default.toFlatArray(e).map(_mobile_lib_Withdom__WEBPACK_IMPORTED_MODULE_5__.default.innerItemToString)}function fromCharCode(e){return String.fromCharCode(e)}function timestamp(){return Date.now()/1e3}function getDayNumberFromUnixtime(e){return new Date(1e3*e).getDate()}function getMonthNumberFromUnixtime(e){return new Date(1e3*e).getMonth()+1}function formatDuration(e){if(!e)return"";var t=Math.floor(e/3600),n=Math.floor(e/60)%60,r=e%60;return r>=3600?(0,tslib__WEBPACK_IMPORTED_MODULE_8__.__spreadArray)([t],(0,tslib__WEBPACK_IMPORTED_MODULE_8__.__read)([n,r].map((function(e){return e<10?"0"+e:""+e})))).join(":"):(0,tslib__WEBPACK_IMPORTED_MODULE_8__.__spreadArray)([n],(0,tslib__WEBPACK_IMPORTED_MODULE_8__.__read)([r].map((function(e){return e<10?"0"+e:""+e})))).join(":")}function arrayUnique(e){return e.filter((function(e,t,n){return n.indexOf(e)===t}))}function arrayFlat(e,t){return e.flat(t)}function toArray(e){return[].slice.call(e)}function arrayLength(e){return e.length}function isArray(e){return Array.isArray(e)}function arrayIncludes(e,t){return e.includes(t)}function inlineIconResolver(e){return null}function isIconAlreadyInBundle(){return!1}function isSAKIntegration(){return _shared_lib_SAKIntegration__WEBPACK_IMPORTED_MODULE_6__.SAKIntegration.isIntegrated}function isEduIntegration(){return _shared_lib_SAKIntegration__WEBPACK_IMPORTED_MODULE_6__.SAKIntegration.isIntegrated&&"edu"===_shared_lib_SAKIntegration__WEBPACK_IMPORTED_MODULE_6__.SAKIntegration.type}function isVKPayIntegration(){return _shared_lib_SAKIntegration__WEBPACK_IMPORTED_MODULE_6__.SAKIntegration.isIntegrated&&"vkpay"===_shared_lib_SAKIntegration__WEBPACK_IMPORTED_MODULE_6__.SAKIntegration.type}function langTag(e,t,n,r){return void 0===r&&(r="tag"),n=(n=n.replace("{"+r+"}",e)).replace("{/"+r+"}",t)}function arraySomeEqual(e,t,n){var r,u;try{for(var i=(0,tslib__WEBPACK_IMPORTED_MODULE_8__.__values)(e),a=i.next();!a.done;a=i.next()){if(a.value[t]===n)return!0}}catch(e){r={error:e}}finally{try{a&&!a.done&&(u=i.return)&&u.call(i)}finally{if(r)throw r.error}}return!1}function preactCallbackKeywordsReplace(e,t,n){return e.map((function(e){return"event"===e?n:"this"===e?t:e}))}var evalCaller=function(code,context){return function(){code=code.replace(/function\s?\(/gim,(function(e,t){return"function f"+t+"("}));var result=eval("(function(event) { "+code+" }).call(this, event)");return code.includes("return")?result:void 0}.call(context)};function preactCallback(e){if(!e)return null;if((0,_mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.isFunction)(e))return e;if(isArray(e)){if((0,_mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.flatArray)(e).every((function(e){return!Boolean(e)})))return null;if(e.every(Array.isArray)){var t=e.map((function(e){return preactCallback(e[0])}));return function(e){var n=e.currentTarget;t.map((function(t){return t.call(n,e)}))}}}return function(t){var n=t.currentTarget;if(isString(e))return evalCaller(e,n);if(isArray(e)){var r=e[0],u=e.slice(1),i=preactCallbackKeywordsReplace(u,n,t);if((0,_mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.isFunction)(r))return r.apply(void 0,(0,tslib__WEBPACK_IMPORTED_MODULE_8__.__spreadArray)([],(0,tslib__WEBPACK_IMPORTED_MODULE_8__.__read)(i)));if(isString(r)){var a=u.reduce((function(e,t,n,r){return e+="event"!==t&&"this"!==t?"'"+t+"'":t,n!==r.length-1&&(e+=", "),e}),"").trim();return evalCaller(r+"("+a+");",n)}}}}function getLangReplace(e,t){for(var n in void 0===t&&(t={}),t)if(t.hasOwnProperty(n)){var r="{"+n+"}";e=e.replace(r,t[n])}return e}function winToUtf(e){return(0,_mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.winToUtf)(e)}function getNumShort(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0);var r=e.toString();(e>=1e4&&e<1e6?r=Math.floor(e/1e3)+"K":e>=1e6&&(r=Math.round(e/1e6)+"M"),t)&&(r=e<1e4?getLangNumeric(e,t,n):getLangNumeric(789,t).replace(new RegExp("789","g"),r));return r}function formatPrice(e,t){return langNumeric((e/1e3).toFixed(e%1e3==0?0:2),t,!0)}function getAvatarMode(e){return void 0===e&&(e={}),e.id&&e.name&&window.vk.liteMode?"text":"image"}function getAvatarTextLength(e){return void 0===e&&(e=1),e>0?2:1}function convertToUtf(e){return e}function convertToWin(e){return e}function mbSubstr(e,t,n,r){return e.substr(t,n)}function decodeHTMLEntities(e){return(0,_shared_helpers_html_entities__WEBPACK_IMPORTED_MODULE_9__.decodeHTMLEntities)(e)}function cleanName(e){return e}function stylesObjectToString(e){return Object.keys(e).map((function(t){return t+":"+e[t]+";"})).join("")}function parseHTMLAttributes(e){for(var t,n=/(\S+)=['"]?((?:(?!\/>|>|"|'|\s).)+)/gi,r={};t=n.exec(e);)r[t[1]]=t[2];return r}function getRandomId(e,t){void 0===e&&(e="r"),void 0===t&&(t=!0);var n=[e];return t&&n.push(Date.now()),n.push(Math.round(999999*Math.random())),n.join("-")}function isString(e){return"string"==typeof e}function toString(e){var t;return(null===(t=null==e?void 0:e.toString)||void 0===t?void 0:t.call(e))||""}function isJSFunction(e){return(0,_mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.isFunction)(e)}function getClientSizes(){return{width:(0,_mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.getCw)(),height:(0,_mobile_lib_Utils__WEBPACK_IMPORTED_MODULE_2__.getCh)()}}},36548:function(e,t,n){"use strict";n.d(t,{elem:function(){return i}});var r=n(7934),u=n(60559);function i(e){return e?(0,r.ceFromString)((0,u.html)(e)):""}},60559:function(e,t,n){"use strict";n.d(t,{wrap:function(){return a},render:function(){return o},html:function(){return s},getTag:function(){return c},getInnerString:function(){return l},isAttrHandler:function(){return D},getAttrsString:function(){return f},innerItemToString:function(){return d},prepareClass:function(){return _},prepareStyle:function(){return A},prepareHandler:function(){return p},prepareHandlerArg:function(){return m},prepareGenericAttr:function(){return h},isReservedKey:function(){return g},isSelfClosingTag:function(){return v},getEventName:function(){return E},isEvent:function(){return C},isFnGetter:function(){return b},isBool:function(){return F},isNumber:function(){return y},isString:function(){return S},isArray:function(){return I},isObject:function(){return P},isFunction:function(){return k},isNonEmptyString:function(){return M},alwaysArray:function(){return O},safeAttr:function(){return T},safeString:function(){return B},toFlatArray:function(){return R},flatten:function(){return L},safeGet:function(){return N}});n(61927).render;var r=["tag","inner","attrs","innerHTML","outerHTML","_","children"],u=["area","base","br","col","command","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],i=["abort","auxclick","beforecopy","beforecut","beforepaste","blur","cancel","canplay","canplaythrough","change","click","close","contextmenu","copy","cuechange","cut","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","ended","error","focus","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadeddata","loadedmetadata","loadstart","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","paste","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointermove","pointerout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","search","seeked","seeking","select","selectstart","stalled","submit","suspend","timeupdate","toggle","touchcancel","touchend","touchmove","touchstart","volumechange","waiting","wheel"].map((function(e){return"on"+e}));function a(e){return e?{__raw__:e}:null}function o(e){return S(e)?e:s(e)}function s(e){if(S(e))return e?{__raw__:e}:null;if(I(e))return e.map(s).join("");if(!P(e))throw"Invalid input, object is expected";if("outerHTML"in e){if(S(t=e.outerHTML))return t;if(y(t))return t.toString();if(t)throw"Invalid outerHTML";return""}if("__raw__"in e){var t;if(S(t=e.__raw__))return t;if(y(t))return t.toString();if(t)throw"Invalid __raw__";return""}var n=c(e),r=l(e),u=f(e);return v(n)?"<"+n+u+" />":"<"+n+u+">"+r+"</"+n+">"}function c(e){if("tag"in e){var t=e.tag;if(S(t)&&/^[\w-]+$/.test(t))return t;throw"Invalid tag name"}return M(e.href)?"a":"div"}function l(e){if("innerHTML"in e){var t=e.innerHTML;if(S(t))return t;if(y(t))return t.toString();if(t)throw"Invalid innerHTML";return""}return"inner"in e?R(e.inner).map(d).join(""):"children"in e?R(e.children).map(d).join(""):""}function D(e,t){return C(e)&&(I(t)||b(t))}function f(e){var t="";P(e.attrs)&&Object.assign(e,e.attrs);var n={className:"class",htmlFor:"for"};for(var r in e)if(e.hasOwnProperty(r)){var u=w(r),i=r;if(n[r]&&(r=n[r]),u&&(r=E(r)),!g(r)){var a=e[r]||e[i];"class"===r?a=_(a):D(r,a)?a=p(a):a&&!u&&(a=h(a)),"style"===r&&(a=A(a));var o=B(r);!0===a?t+=" "+o:y(a)?t+=" "+o+'="'+a+'"':S(a)?t+=" "+o+'="'+B(a)+'"':a&&(a=a.__raw__?a.__raw__:h(a))&&(t+=" "+o+'="'+a+'"')}}return S(e.attrs)&&(t+=" "+T(e.attrs)),t}function d(e){return y(e)?e.toString():S(e)?B(e):P(e)?e.__raw__?e.__raw__:s(e):""}function _(e){return R(e).filter(M).join(" ").trim().replace(/\s+/g," ")}function A(e){return P(e)?Object.entries(e).map((function(e){var t=e[0],n=e[1];return(t=t.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})))+":"+n})).join(";"):e}function p(e,t){void 0===t&&(t=!1);var n=O(e);if(!n.length)return null;var r=n[0];return S(r)?r+"("+n.slice(1).map((function(e){return m(e,t)})).join(", ")+")":e}function m(e,t){if(void 0===t&&(t=!1),y(e)||"this"===e||"event"===e||void 0===e)return e;var n=JSON.stringify(e);return t?n:B(n,!0)}function h(e){return F(e)||y(e)?e:e=S(e)?B(e,!0):P(e)?e.__raw__:B(JSON.stringify(e),!0)}function g(e){return r.includes(e)}function v(e){return u.includes(e.toLowerCase())}function E(e){return(e=e.toLowerCase()).replace("unsafe","")}function C(e){return i.includes(e.toLowerCase())||w(e)}function w(e){return!!(e=e.toLowerCase()).endsWith("unsafe")&&C(E(e))}function b(e){return S(e)&&/^[\w.]+$/.test(e)}function F(e){return"boolean"==typeof e}function y(e){return"number"==typeof e&&!isNaN(e)}function S(e){return"string"==typeof e}function I(e){return Array.isArray(e)}function P(e){return"[object Object]"===Object.prototype.toString.call(e)}function k(e){return"[object Function]"==={}.toString.call(e)}function M(e){return!(!S(e)||!e)}function O(e){return I(e)?e:[e]}function T(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function B(e,t){return void 0===e&&(e=""),void 0===t&&(t=!1),t?e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):(e=e.replace(/&(?!(#\d{0,4};|quot;|lt;|gt;|amp;))/g,"&amp;")).replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function R(e){return I(e)?L(e):[e]}function L(e){var t=[];return e.forEach((function(e){I(e)?t=t.concat(L(e)):t.push(e)})),t}function N(e,t){for(var n=t.split("."),r=n.length,u=e,i=0;i<r;i++)try{u=u[n[i]]}catch(e){return}return u}},72600:function(e,t,n){"use strict";n.d(t,{createElement:function(){return a},Fragment:function(){return o}});var r=n(97316),u=n(60559),i=n(66651);function a(e,t){var n=t.children;return delete t.children,(0,u.isFunction)(e)?e((0,r.__assign)((0,r.__assign)({},t),{inner:n})):(0,r.__assign)((0,r.__assign)({tag:e},t),{inner:n})}function o(e){return(0,i.getChildren)(e,null)}},66651:function(e,t,n){"use strict";n.d(t,{getChildren:function(){return u},processLegacyAttrs:function(){return i}});var r=n(60559);function u(e,t){return t||e.inner}function i(e){return(0,r.getAttrsString)({attrs:e})}},59233:function(e,t,n){"use strict";n.d(t,{handle:function(){return u},handle2:function(){return i}});var r=n(60559);function u(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var u=(0,r.alwaysArray)(e),i=u[0];if(i){(0,r.isString)(i)||console.warn('Invalid handler "'+i+'"');var a=(0,r.safeGet)(window,i);if((0,r.isFunction)(a))return a.apply(null,u.slice(1).concat(t));console.warn("`"+i+"` is not a function")}}function i(e,t){var n=Array.prototype.slice.call(arguments,2),u=e[0];if(u){(0,r.isString)(u)||console.warn('Invalid handler "'+u+'"');var i=(0,r.safeGet)(window,u);if((0,r.isFunction)(i)){for(var a=e.slice(1),o=0,s=a.length;o<s;o++)if("event"===a[o]){a[o]=t;break}i.apply(null,a.concat(n))}else console.warn("`"+u+"` is not a function")}}},11393:function(e,t,n){"use strict";n.d(t,{handle:function(){return u.handle}});var r=n(60559),u=n(59233),i=n(72600),a=n(36548),o=n(20395);t.default={wrap:r.wrap,isFunction:r.isFunction,_preact:o._preact,alwaysArray:r.alwaysArray,createElephizeElement:i.createElement,elem:a.elem,flatten:r.flatten,getAttrsString:r.getAttrsString,getInnerString:r.getInnerString,getTag:r.getTag,handle:u.handle,handle2:u.handle2,html:r.html,hydrate:o.hydrate,innerItemToString:r.innerItemToString,isArray:r.isArray,isAttrHandler:r.isAttrHandler,isBool:r.isBool,isEvent:r.isEvent,isFnGetter:r.isFnGetter,isNonEmptyString:r.isNonEmptyString,isNumber:r.isNumber,isObject:r.isObject,isReservedKey:r.isReservedKey,isSelfClosingTag:r.isSelfClosingTag,isString:r.isString,mountPreactComponent:o.mountPreactComponent,mountPreactTemplate:o.mountPreactTemplate,preact:o.preact,preactElem:o.preactElem,preactElemFromTemplate:o.preactElemFromTemplate,prepareClass:r.prepareClass,prepareGenericAttr:r.prepareGenericAttr,prepareHandler:r.prepareHandler,prepareHandlerArg:r.prepareHandlerArg,prepareStyle:r.prepareStyle,render:r.render,safeAttr:r.safeAttr,safeGet:r.safeGet,safeString:r.safeString,toFlatArray:r.toFlatArray}},20395:function(e,t,n){"use strict";n.d(t,{preactElem:function(){return s},preactElemFromTemplate:function(){return c},mountPreactComponent:function(){return l},mountPreactTemplate:function(){return D},hydrate:function(){return f},preact:function(){return d},_preact:function(){return _}});var r=n(97316),u=n(61927),i=n(60559),a=n(9046),o=n(46950);function s(e,t){var n=document.createElement("div");return D(e,t,n),n.children[0]}function c(e){return s((function(){return e}),{})}function l(e,t,n){n&&(n.innerHTML="",(0,u.render)((0,u.createElement)(e,t),n))}function D(e,t,n){(0,u.render)(d(e,t),n)}function f(e,t,n){return(0,u.hydrate)((0,u.createElement)(e,t),n)}function d(e,t){return _((function(t){return e(t)}))(t)}function _(e){return function(t){var n=(0,i.isFunction)(e)?e(t):e;if(!n)return null;if("string"==typeof n||"number"==typeof n)return n;if((0,i.isArray)(n))return n.map((function(e){return _(e)(e&&e.props)}));var s=n.children||n.inner;n.children=s?(0,i.isArray)(s)?s:[s]:null,delete n.inner,"string"==typeof n.attrs&&(n.attrs=(0,o.parseHTMLAttributes)(n.attrs)),n.attrs=n.attrs||{},(0,i.isArray)(n.children)&&(n.children=(0,a.flatArray)(n.children),n.children=n.children.map((function(e){return e&&e.__raw__?(0,u.createElement)("div",{dangerouslySetInnerHTML:{__html:e.__raw__}}):_(e)(e&&e.props)})));var c=(0,a.flatArray)([n.class,n.className]).reduce((function(e,t){return t&&e.push.apply(e,(0,r.__spreadArray)([],(0,r.__read)(t.split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e}))))),e}),[]),l=Object.assign({},n,{className:c.length?c.join(" "):null},n.attrs);return delete l.class,delete l.tag,delete l.attrs,Object.keys(l).forEach((function(e){var t=l[e],n=(0,i.getEventName)(e);(0,i.isEvent)(e)&&(n!==e&&(delete l[e],e=n),l[e]=(0,o.preactCallback)(t),l["preacted-"+n]=!0),null!==t&&"object"==typeof t&&t.__raw__&&(l[e]=t.__raw__)})),(0,u.createElement)(n.tag||"div",l,n.children)}}},78466:function(e,t,n){"use strict";n.d(t,{getMediaView:function(){return o},fetchMediaView:function(){return s}});var r=n(86900),u=n(27192),i=n(63705),a=n(53502);function o(){return e="MediaView",!window.__chunks||window.__chunks[e]instanceof Promise?null:window.__chunks[e];var e}function s(){return function(e,t,n){void 0===n&&(n=5),window.__chunks||(window.__chunks={});var a=window.__chunks[t];if(a)return a instanceof Promise?a:Promise.resolve(a);var o=1;return window.__chunks[t]=(0,u.retryFn)(e,n,(function(){return o++,1}))().then((function(e){return window.__chunks[t]=e,(0,r.statlogsValueEvent)("mvk_chunks_stat","success",t,o),e})).catch((function(e){throw(0,r.statlogsValueEvent)("mvk_chunks_stat","fail",t,e.name,i.default.getConnectionType()),delete window.__chunks[t],e})),window.__chunks[t]}((function(){return Promise.all([n.e(4736),n.e(4578),n.e(5456),n.e(3898),n.e(1777),n.e(5999),n.e(5273),n.e(9030),n.e(7673)]).then(n.bind(n,37063)).then((function(e){return(0,a.addStatic)(["vkui.css"]).then((function(){return e.init()}))}))}),"MediaView",5)}},71372:function(e,t,n){"use strict";n.d(t,{convertKludgesToAttaches:function(){return l},isUserPeer:function(){return D},isChatPeer:function(){return f},isPinnedSortId:function(){return d},isOnboardingFindFriendsLink:function(){return _}});var r=n(97316),u=n(17999),i=n(95343);function a(e,t){void 0===t&&(t=[]);var n=(0,r.__read)(e.split("_"),2);return[n[0],n[1],t]}function o(e,t,n,u){if(void 0===n&&(n=0),void 0===u&&(u=0),u>50)return[[],e.length];for(var i=[],s="";n<e.length;){var c=e[n];if("id"===c)s=t[n];else if(","===c&&s)i.push(a(s)),s="";else if("("===c){var l=(0,r.__read)(o(e,t,n+1,u+1),2),D=l[0];n=l[1],i.push(a(s,D)),s=""}else if(")"===c)return""!==s&&i.push(a(s)),[i,n];n++}return s&&i.push(a(s)),[i,n]}var s={};function c(e){if(s[e])return s[e];for(var t=e?e.length:0,n=[],u=[],i="",a=0;a<t;a++){var c=e[a],l=c.charCodeAt(0);l>=48&&l<=57||"_"===c||"-"===c?i+=c:"("!==c&&")"!==c&&":"!==c&&","!==c||(""!==i&&(u.push(i),n.push("id"),i=""),u.push(c),n.push(c))}i.length>0&&(u.push(i),n.push("id"));var D=(0,r.__read)(o(n,u),1)[0];return Object.keys(s).length>300&&(s={}),s[e]=D,D}function l(e,t){var n=[];e.fwd_count?n.push({type:"mail",id:-t,object:{fwd_count:e.fwd_count}}):e.fwd&&n.push({type:"mail",id:-t,object:{fwd_count:c(e.fwd).length}});for(var r=1;e["attach"+r+"_type"];++r)"call"===e["attach"+r+"_type"]?n.push({type:e["attach"+r+"_type"],id:e["attach"+r],initiatorId:(0,u.intval)(e["attach"+r+"_call_initiator_id"]),state:e["attach"+r+"_call_state"],duration:(0,u.intval)(e["attach"+r+"_call_duration"]),receiverId:(0,u.intval)(e["attach"+r+"_call_receiver_id"])}):n.push({type:e["attach"+r+"_type"],id:e["attach"+r],kind:e["attach"+r+"_kind"],productId:e["attach"+r+"_product_id"]});return e.geo&&n.push({type:"geo",id:e.geo}),n}function D(e){return e>0&&e<2e9}function f(e){return e>2e9}function d(e){return e>0&&(e|i.PINNED_CONVERSATION_BIT_MASK)===i.PINNED_CONVERSATION_BIT_MASK}function _(e){return/(^(https?:\/\/)?([a-z0-9_\-.]+\.)?vk.com)?\/onboarding_find_friends/.test(decodeURIComponent(e))}},24801:function(e,t,n){"use strict";var r,u;n.d(t,{ModuleNavigationStatMarks:function(){return a},MODULE_THROTTLE_MS:function(){return o}});var i=36e5,a={web2:{PERF_MARK:"__navmark",PERF_MEASURE:"__navmeasure"},mvk:{PERF_MARK:"__navmark_mvk",PERF_MEASURE:"__navmeasure_mvk"}},o="mvk"===(null===(u=null===(r=window.vk)||void 0===r?void 0:r.statsMeta)||void 0===u?void 0:u.platform)?{video:6*i,group:6*i,groups_list:6*i,feed:6*i,audio:6*i,notifications:6*i,profile:6*i,wall:6*i,mail:6*i,search:6*i,menu:6*i,recommended:6*i,join:4*i,photos:4*i,login:4*i,friends:4*i}:{im:6*i,profile:6*i,feed:6*i,audio:6*i,video:6*i,apps:6*i,friends:6*i,groups_list:6*i,groups:4*i,public:4*i}}}]);