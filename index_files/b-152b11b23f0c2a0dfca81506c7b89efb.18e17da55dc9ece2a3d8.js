(self.webpackChunkvk=self.webpackChunkvk||[]).push([[6444],{72539:function(e,t,i){"use strict";var n,a,o,r,s,c,l=i(6272),d=i.n(l),u=i(30712),f=i(57441),_=i(4960),h=i(17999),g=i(29804),m=i(12813);window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);var v,p,w,y=!1,b=[],S=[],C=1,k=2,T={},E={};function O(e,t){e=e.split("_");for(var i=0;i<t.length;i++){var n=t[i].split("_");if(n[0]==e[0]&&n[1]==e[1])return i}return-1}function x(){return document}function j(){return(document.scrollingElement||window.scrollNode||document.body).scrollTop}function L(e){return domQuery('.articleView__social_buttons[data-article-id="'+e+'"] .articleView__footer_btn_bookmark')}function A(e){if(c!=e.raw_id)if(c=e.raw_id,a.isWebView)!function(e){d().send("articleUpdate",{article:W(e),isSubscribedToOwner:e.is_subscribed_to_owner})}(e);else{var t=geByClass1("articleView__owner"),i=geByTag1("img",t);t&&i&&(i.src=e.owner_photo);var n=geByTag1("a",t);t&&n&&(n.href=e.owner_href);var o=geByClass1("articleView__ownerName"),r=geByTag1("a",o);o&&r&&(r.href=e.owner_href,r.innerHTML=e.owner_name);var s=geByClass1("articleView__footer"),l=geByClass1("articleView__footer_views");l&&(l.innerHTML=e.views_formatted);var u=geByClass1("articleView__social_buttons",s);s&&u&&!e.is_blog&&u.setAttribute("data-article-id",e.raw_id);var f=[domQuery1('.articleView__content_misc_block[data-article-id="'+e.raw_id+'"] .articleView__footer_btn_share'),s&&domQuery1(".articleView__footer_btn_share",s)];(0,h.each)(f,(function(t,i){i&&!e.is_blog&&(i.href="/like?act=publish&object=article"+e.raw_id+"&list="+e.access_hash)}));var _=L(e.raw_id),g=JSON.stringify(e.mailru_stats_data);(0,h.each)(_,(function(t,i){i&&(i.setAttribute("onclick","Article.fave(this, '"+e.url+"', '"+e.fave_hash+"', "+g+", '"+e.raw_id+"')"),toggleClass(i,"_active",e.is_faved))}));var v=geByClass1("Unfold__item_name_noted");v&&(v.href="/feed?section=search&q=url:https://vk.com"+e.url);var p=geByClass1("Unfold__item_name_report");p&&(p.href=(0,m.getArticleReportUrl)({ownerId:e.owner_id,articleId:e.id,accessHash:e.access_hash,refrom:"feed"}))}}function V(e,t){void 0===t&&(t=!1),e.has_more||(b=b.concat(e.audios_list));var i=new f.default(e,{notFull:!!a.preloadMoreHash,isWebView:a.isWebView,mobile:!0,width:a.width,getScrollTop:j,getScrollNode:x,trackCode:a.trackCode,onScroll:function(t){if(!e.has_more){var i=S[S.length-1],n=gpeByClass("articleView__content",i.getEl());t>.6&&e.next_article_url&&(S.length<20&&(D(e.next_article_url),addClass(n,"articleView_waitNextArticle")),function(){var e=S[S.length-1];if(e){var t=gpeByClass("articleView__content",e.getEl()),i=geByClass1("articleView__social_buttons",t);i&&show(i)}}()),t>.99&&e.next_article_url&&S.length<20&&D(e.next_article_url,(function(e,t){if(e){for(var i=0;i<S.length;i++)if(S[i].getArticle().raw_id==t.raw_id)return;w||(w=setTimeout((function(){var i=domCreate(e);s.appendChild(i),removeClass(n,"articleView_waitNextArticle"),addClass(i,"articleView_nextPrepared"),requestAnimationFrame((function(){removeClass(i,"articleView_nextPrepared")})),V(t),w=null}),400))}})),this.getScreenVisibilityRatio()>.5&&A(e)}},onImageOpen:function(e,t,n){if(a.isWebView){for(var o=[],r=0;r<e.length;r++){var s=e[r],c=[];for(var l in s)s.hasOwnProperty(l)&&c.push({type:l,src:s[l][0],width:s[l][1],height:s[l][2]});o.push(c)}v=t,p=i,d().send("articlePhotoView",{photos:o,index:n})}}});if(t||i.ready(),S.push(i),N(e),(0,h.each)(geByTag("video"),(function(e,t){domData(t,"auto-pause-inited")||(domData(t,"auto-pause-inited",1),t.addEventListener("play",(function(){(0,h.each)(geByTag("video"),(function(e,i){i!=t&&i.pause()}))})))})),a.isWebView){(0,h.each)(geByTag("figure",i._els.view),(function(e,t){var n=(0,h.intval)(domData(t,"type"));i._onObjectView(!1,n,t)&&domData(t,"done",1)}));var n=document.getElementsByClassName("articleView__educationCloseButton")[0];n&&n.addEventListener("click",(function(e){var t=e.target,i=(0,h.intval)(domData(t,"article-id")),n=(0,h.intval)(domData(t,"course-id")),a=(0,h.intval)(domData(t,"step-id")),o=t.href;d().send("articleClose",{fallback_url:o,payload:{status:"read",data:{author_id:i,course_id:n,step_id:a}}}),e.preventDefault()}))}}function B(e){if(3===e.nodeType)return[e];var t=e.classList.contains("article__info_line");if(!e.childNodes.length||t)return[];var i=[];return e.childNodes.forEach((function(e){i.push.apply(i,B(e))})),i}function P(){var e=geByClass("articleView__ttsHighlight");e.length&&e.forEach((function(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),t.removeChild(e),t.normalize()}))}function I(e,t,i){var n=S.find((function(t){return t.getArticle().raw_id===e}));if(n){for(var a=B(n.getEl()),o=0,r=0,s=function(e){return e.textContent.length};o+s(a[r])-1<t;)o+=s(a[r]),r++;var c=a[r],l=s(c),d=document.createRange(),u=i-o+1,f=u>l;u=f?l:u,d.setStart(c,t-o),d.setEnd(c,u);var _=document.createElement("span");_.className="articleView__ttsHighlight",_.appendChild(d.extractContents()),d.insertNode(_),f&&I(e,o+l,i)}}function N(e){var t=gpeByClass("articleView__content",ge("article_view_"+e.raw_id)),i=geByClass1("articleView__ads_block",t);_.default.init(e,i,S.length,a)}function D(e,t){var i=E[e];i!==k?(0,h.isArray)(i)?t&&t(i[0],i[1]):(T[e]=T[e]||[],t&&T[e].push(t),i!=C&&(E[e]=C,ajax.post("article.php",{act:"view",url:e,scroll_load:1,wall_owner_id:a.wallOwnerId,audio_bridge:(0,h.intval)(a.audioBridge),can_infinite_scroll:(0,h.intval)(a.canInfiniteScroll),web_view:a.isWebView,context:a.context,ref:"scroll",v:a.clientVersion},{onDone:function(t,i){for(var n=T[e],a=0;a<n.length;a++)n[a](t,i);E[e]=[t,i]}}))):t&&t()}function M(e,t){var i=L(e);(0,h.each)(i,(function(e,i){toggleClass(i,"_active",t)}))}function U(){var e=(0,u.getUrlParam)("anchor");e&&function(){var t=document.getElementById(e);if(t){"scrollRestoration"in history&&(history.scrollRestoration="manual");var i=a.isWebView?0:25,n=t.parentNode.offsetTop-i;window.setTimeout((function(){var e;e=n,(document.scrollingElement||window.scrollNode||document.body).scrollTop=e}),0)}}()}function R(e){if(void 0===e&&(e={}),y)U();else{a.deviceInfo=e.deviceInfo;var t=S[0],i=t.getArticle();t.ready(),i.has_more?ajax.post("article.php",{act:"load_more",rev:i.rev,hash:i.has_more_hash,article_owner_id:i.owner_id,article_id:i.id,audio_bridge:(0,h.intval)(a.audioBridge),no_lazy_images:(0,h.intval)(a.noLazyImages),can_infinite_scroll:(0,h.intval)(a.canInfiniteScroll),wall_owner_id:a.wallOwnerId,context:a.context,client_version:a.clientVersion},{onFail:function(){a.failTries>0&&(a.failTries--,setTimeout((function(){R(e)}),2e3))},onDone:function(e,n){y=!0,i.audios_list=n.audios_list,i.next_article_url=n.next_article_url,i.has_more=!1,i.audios_list&&i.audios_list.length&&(b=b.concat(i.audios_list));var a=domCreate(e),o=geByClass1("article_view",a),r=geByClass1("article_view");"figure"!==r.lastElementChild.tagName.toLowerCase()&&r.lastChild.remove();for(var s=r.children.length,c=o.children;s<c.length;)r.appendChild(c[s]);var l=geByClass1("article_preload_spinner");l&&l.parentNode.removeChild(l);var d=geByClass1("articleView__content_misc_block",a);r.parentNode.appendChild(d),function(){for(var e=geByClass1("article").children,t=0;t<e.length;t++){var i=t>0&&e[t-1],n=e[t],a=t+1<e.length&&e[t+1],o=i?i.tagName+"_"+domData(i,"type"):"",r=n?n.tagName+"_"+domData(n,"type"):"",s=a?a.tagName+"_"+domData(a,"type"):"",c=!1,l=!1,d=!1;o&&r==o||(c=!0),s&&r==s||(l=!0),(u.ResizableObjectTypes.includes(+s.type)||s.sep)&&(d=!0),toggleClass(n,"article_decoration_first",c),toggleClass(n,"article_decoration_last",l),toggleClass(n,"article_decoration_before",d)}}(),N(i),U(),t.update()}}):ajax.post("article.php",{act:"next_url",access_hash:i.access_hash,article_owner_id:i.owner_id,article_id:i.id,wall_owner_id:a.wallOwnerId,context:a.context},{onDone:function(e){e&&(i.next_article_url=e,t.update())}});var n=t.getEl();e.paddingTop&&setStyle(n,"marginTop",(0,h.intval)(e.paddingTop)),e.paddingBottom&&setStyle(n,"marginBottom",(0,h.intval)(e.paddingBottom)),e.noDarkModeTransition&&addClass(n,"article_dark_no_transition")}}function H(e){var t=null;return(0,h.each)(S,(function(i,n){var a=n.getArticle();if(a.raw_id==e)return t=a,!1})),t}function W(e){var t="https://"+a.devHost+"vk.com"+e.url,i={id:e.id,owner_id:e.owner_id,owner_name:e.owner_name,state:"available",can_report:e.can_report,title:e.title,subtitle:"",views:e.views,shares:e.shares,is_favorite:e.is_faved,url:t,view_url:t,access_key:e.access_hash,published_date:e.published_date,no_footer:e.no_footer};return e.owner_photo&&0!=e.owner_photo.indexOf("/images/")&&(i.owner_photo=e.owner_photo),i}function $(e,t){void 0===t&&(t="");var i=S[S.length-1];if(t)for(var n=0;n<S.length;n++)if(S[n]._article.raw_id===t){i=S[n];break}i.sendStats({type:e})}window.ArticleView=f.default,window.Article={init:function(e,t){if((a=t).mobile=!0,a.failTries=50,window.cur&&(window.cur.lang=window.cur.lang||{},extend(window.cur.lang,t.lang||{})),s=geByClass1("articleView__content_list"),!a.isWebView){var i,n=j(),c=geByClass1("articleView__header"),l=geByClass1("articleView__footer"),f=geByClass1("articleView__layout");x().addEventListener("scroll",i=function(){var e=f.clientHeight,t=Math.max(0,j()),i=t-n>0,a=t+window.innerHeight+20>e;toggleClass(c,"articleView__header--narrow",i),l&&toggleClass(l,"articleView__footer--hidden",!a&&i),n=t},{passive:!0});var _=geByClass1("articleView__close"),m=geByClass1("articleView__close_mini");_.addEventListener("click",$.bind(window,u.ArticleStatsEvents.close)),m.addEventListener("click",$.bind(window,u.ArticleStatsEvents.close)),window.cur&&cur.destroy.push((function(){document.removeEventListener("scroll",i),removeClass(document.body,"article_body_with_transition")})),a.isStandalone&&(window.al=!1);var w=(0,h.intval)(f.classList.contains("article_dark")),y=document.querySelector(".basis");y&&g.colorScheme.applyScheme(y,w?g.ColorSchemeName.Dark:g.ColorSchemeName.Light)}if(a.preloadMoreHash||show(geByClass1("article_layer_prev_next")),a.isWebView){var C=geByClass1("article");addClass(C,"article_webview")}a.isWebView&&a.audioBridge&&(window.audioplayer={playPause:function(e,t){var i=gpeByClass("audio_item",e.target);if(o&&o!=i&&(removeClass(o,"ai_playing"),o=!1),r&&(removeClass(r,"article_object_audioplaylist_playing"),r=!1),hasClass(i,"ai_playing"))d().send("audioPause",{}),removeClass(i,"ai_playing");else{var n=O(t,b),a=b;-1==n&&(a.unshift(t),n=0),d().send("audioPlay",{audioIds:a,pos:n}),addClass(i,"ai_playing"),o=i}return cancelEvent(e),!1}}),a.isWebView?(d().send("articleReady"),window.addEventListener("VKWebAppEvent",(function(e){var t=e.detail||{};switch(t.type){case"articleOwnerSubscribed":var i=t.ownerId,n=t.isSubscribed;(0,h.each)(S,(function(e,t){var a=t.getArticle();if(a.owner_id==i)return a.is_subscribed_to_owner=n,!1}));break;case"articleBookmarked":var a=t.articleOwnerId+"_"+t.articleId,o=H(a);o&&(o.is_faved=t.isBookmarked);var r=L(a);(0,h.each)(r,(function(e,i){toggleClass(i,"_active",!!t.isBookmarked)}));break;case"articleWebViewShow":R(t);break;case"articleWebViewClose":$(u.ArticleStatsEvents.close);break;case"didShareArticle":var s=t.articleRawId,c=t.shareType;if(!c)break;$(c,s);break;case"articleMentionClick":var l=t.articleRawId;$(u.ArticleStatsEvents.clickOnMentions,l);break;case"articleTtsStart":t.articleRawId,P();break;case"articleTtsHighlight":!function(e,t,i){P(),I(e,t,i)}(t.articleRawId,t.from,t.to);break;case"articleTtsEnd":t.articleRawId,P();break;case"articlePhotoCarouselPositionChanged":default:var d=t.index;if(void 0===d)return;p&&v&&p.changeCarouselPosition(domData(v,"carousel-id"),d,!0,!1)}})),V(e,!0)):V(e,!1)},fave:function(e,t,i,n,o){var r=!hasClass(e,"_active");ajax.post("article.php",{act:"fave",url:t,add:(0,h.intval)(r),hash:i}),S.forEach((function(e){var i=e.getArticle();i.url==t&&(i.is_faved=r)})),(0,u.mailruStatsPixel)(r?"fave":"unfave",n),M(o,r),a.isWebView?function(e){var t=H(e);t&&(JSON.stringify({article:W(t)}),d().send("articleBookmarked",{article:W(t)}))}(o):Share&&Share.setBookmarkState(o,r)},toggleButton:M,share:function(e,t,i){return function(e){var t=H(e),i=a.clientVersion;if(t)if(i){var n={type:"article",data:W(t)};d().send("share",n)}else{var o={article:W(t)};d().send("articleShare",o)}}(t),!1},subscribe:function(e,t,i){ajax.post("article.php",{act:"subscribe",owner_id:t,hash:i},{onDone:function(t,i){toggleClass(e,"articleView__subscribed",t),e.innerHTML=i}})},toggleDarkMode:function(e){n||(n=setTimeout((function(){var t=geByClass1("articleView__layout");toggleClass(t,"article_dark",e),toggleClass(document.body,"article_dark",e);var i=(0,h.intval)(hasClass(t,"article_dark"));n=!1,void 0!==e||a.isWebView||ajax.post("article.php",{act:"set_dark_mode",dark:i});var o=geByClass1("articleMenu");o&&Unfold.setTitle(o,"dark_mode",i?getLang("mobile_articles_menu_dark_disable"):getLang("mobile_articles_menu_dark")),$(i?u.ArticleStatsEvents.nightModeOn:u.ArticleStatsEvents.nightModeOff);var r=document.querySelector(".basis");r&&!a.isWebView&&g.colorScheme.applyScheme(r,i?g.ColorSchemeName.Dark:g.ColorSchemeName.Light)}),e?0:10))},onWebViewShow:R,sendStats:$,audioPlayPlaylist:function(e,t,i){var n=gpeByClass("article_object_audioplaylist_webview",e);if(o&&(removeClass(o,"ai_playing"),o=!1),r){var a=r;if(removeClass(a,"article_object_audioplaylist_playing"),r=!1,a==n)return d().send("audioPause",{}),cancelEvent(i)}var s=O(t,b),c=b;return-1==s&&(c.unshift(t),s=0),d().send("audioPlay",{audioIds:c,pos:s}),addClass(n,"article_object_audioplaylist_playing"),r=n,cancelEvent(i)},onAudioStateChanged:function(e,t){o&&(removeClass(o,"ai_playing"),o=!1),r&&(removeClass(r,"article_object_audioplaylist_playing"),r=!1),e=(e=e.split("_"))[0]+"_"+e[1];var i=ge("audio"+e);i&&toggleClass(i,"ai_playing","play"==t);for(var n=geByClass("_article_object_audioplaylist_webview"),a=0;a<n.length;a++){if((domData(n[a],"ids")||"").split(",").indexOf(e)>=0&&"play"==t){addClass(n[a],"article_object_audioplaylist_playing"),r=n[a];break}}}}},45542:function(e,t,i){"use strict";var n=i(62009);window.isBootstrapInited||(window.cur={destroy:[]},window.lang={},(0,n.setDocumentDomain)(),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),window.isBootstrapInited=!0)},19270:function(e,t){"use strict";var i={_def_opts:{enableHighAccuracy:!0,maximumAge:3e5,timeout:6e4},_provider:null,initW3C:function(){i._provider=navigator.geolocation,i.getCurrentPosition=function(e,t,n){i._provider.getCurrentPosition((function(t){void 0!==t.latitude?e(extend(t,{coords:extend(t.coords||{},{latitude:t.latitude,longitude:t.longitude})})):e(t)}),t,n)}},initGears:function(){var e=window.google;i._provider=e.gears.factory.create("beta.geolocation")},initSymbian:function(){var e=window.device;i._provider=e.getServiceObject("Service.Location","ILocation"),i.getCurrentPosition=function(e,t){i._provider.ILocation.GetLocation({LocationInformationClass:"BasicLocationInformation"},(function(i,n,a){4==n?t({code:2,message:"Position unavailable"}):e({timestamp:null,coords:{latitude:a.ReturnValue.Latitude,longitude:a.ReturnValue.Longitude,altitude:a.ReturnValue.Altitude,heading:a.ReturnValue.Heading}})}))}},initPalm:function(){i.getCurrentPosition=function(e,t,i){var n={};i&&(i.enableHighAccuracy&&1==i.enableHighAccuracy&&(n.accuracy=1),i.maximumAge&&(n.maximumAge=i.maximumAge),i.responseTime&&(i.responseTime<5?n.responseTime=1:i.responseTime<20?n.responseTime=2:n.timeout=3)),new window.Mojo.Service.Request("palm://com.palm.location",{method:"getCurrentPosition",parameters:n,onSuccess:function(t){e({timestamp:t.timestamp,coords:{latitude:t.latitude,longitude:t.longitude,heading:t.heading}})},onFailure:function(e){1==e.errorCode?t({code:3,message:"Timeout"}):2==e.errorCode?t({code:2,message:"Position unavailable"}):t({code:0,message:"Unknown Error: webOS-code"+e.errorCode})}})}},getCurrentPosition:function(e,t,n){i._provider.getCurrentPosition(e,t,extend(i._def_opts,n||{}))},init:function(){var e=window,t=e.google,n=e.device,a=e.Mojo;try{var o="undefined";if(typeof navigator.geolocation!==o)i.initW3C();else if(typeof window.google!==o&&typeof t.gears!==o)i.initGears();else if(typeof n!==o&&typeof n.getServiceObject!==o)i.initSymbian();else{if(typeof a===o||"Mojo.Service.Request"==typeof a.Service.Request)return!1;i.initPalm()}}catch(e){return!1}return!0}};window.geo=i,t.default=i},62561:function(e,t,i){"use strict";var n=i(8805);i(50087),i(60433),i(31452),i(91378);t.default=n.default,window.q=n.default},60433:function(e,t,i){"use strict";var n=i(8805);function a(e,t){return e+'="'+t+'"'}function o(e){return function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return a(e,r(i))}}function r(e){return e[0]+"("+e.slice(1).map(s).join(", ")+")"}function s(e){return"number"==typeof e||"event"===e||"this"===e?e:JSON.stringify(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39").replace(/</g,"&lt;").replace(/>/g,"&gt;")}Object.assign(n.default,{attr:a,onBlur:o("onblur"),onClick:o("onclick"),onFocus:o("onfocus"),onInput:o("oninput"),onKeyDown:o("onkeydown"),onKeyPress:o("onkeypress"),onKeyUp:o("onkeyup"),onMouseDown:o("onmousedown"),onMouseUp:o("onmouseup"),onScroll:o("onscroll"),onSubmit:o("onsubmit"),onTouchEnd:o("ontouchend"),onTouchMove:o("ontouchmove"),onTouchStart:o("ontouchstart"),onWheel:o("onwheel"),onChange:o("onchange")})},91378:function(e,t,i){"use strict";var n=i(8805);function a(e,t){var i,n=[];"string"==typeof t&&((i={})[t]=!0,t=i);return Object.keys(t).forEach((function(i){var a=t[i];!0===a?n.push(e+"_"+i):a&&n.push(e+"_"+i+"_"+a)})),n}Object.assign(n.default,{class:function(){for(var e=[],t=null,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return n.forEach((function(i){"string"==typeof i?(e.push(i),t=i):i&&(e=e.concat(a(t,i)))})),e.join(" ")},parseClass:function(e,t){var i={};return t.trim().split(/\s+/).forEach((function(t){if(t!==e){var n=t.replace(e+"_","").split("_");i[n[0]]=!(n.length>1)||n[1]}})),i}})},50087:function(e,t,i){"use strict";var n=i(8805);Object.assign(n.default,{html:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var a="";return e.forEach((function(e,t){var n=i[t];a+=e+(n||0===n?n:"")})),a}})},8805:function(e,t){"use strict";t.default={}},31452:function(e,t,i){"use strict";var n=i(8805);Object.assign(n.default,{list:function(e,t){void 0===t&&(t=null);Array.isArray(e)||(e=[e]);return t?e.map(t).join(""):e.join("")}})},27635:function(e,t,i){"use strict";var n=i(13725),a=i(62561);function o(){var e=(0,n.default)(["\n    <",' class="','" '," ",">\n      ","\n    </",">\n  "]);return o=function(){return e},e}t.default=function(e){void 0===e&&(e={});var t,i,n=a.default.list(e.inner);e.url?(t="a",i=a.default.attr("href",e.url)):(t=e.tag||"div",i="");return a.default.html(o(),t,e.mix,i,e.attrs,n,t)}},72592:function(e,t,i){"use strict";var n=i(27635);t.default=n.default,window.Brick=n.default},87548:function(e,t,i){"use strict";function n(e){return"empty"!==e&&(!e||e<=0)}i.d(t,{OvalIsHidden:function(){return n}}),t.default=function(e){return Wd.html({inner:["empty"===e.value?" ":e.value],class:[Bem.class("Oval",{type:e.gray?"minor":e.type,hidden:n(e.value)},"_"),e.mix],tag:"div"})}},42333:function(e,t,i){"use strict";var n=i(87548);Object.assign(n.default,{setValue:function(e,t){if(!e)return;var i=(0,n.OvalIsHidden)(t);e.innerText="empty"===t?" ":t,e.classList.toggle(a,i)}});var a="Oval_hidden"},60767:function(e,t,i){"use strict";var n=i(87548);i(42333);t.default=n.default,Object.assign(window,{Oval:n.default,Oval_isHidden:n.OvalIsHidden})},69131:function(e,t,i){"use strict";var n=i(62561),a=i(72592),o=i(39423),r=i(60767),s=i(35909),c=i(76068),l=i(46950),d=i(11393);function u(e){var t,i=e.title;if(e.icon)t=d.default.html((0,o.default)({icon:e.icon}));else if(e.icon_html)t=e.icon_html;else{for(var r=e.items,c=r.length,u="",f="",_=0;_<c;_++){var h=r[_];if(h&&h.active){u=h.text,f=h.activeCount;break}}t=[(0,a.default)({mix:"Unfold__triggerText",tag:"div",inner:d.default.html({inner:[i?[{inner:[i],class:"Unfold__triggerContentTitle",tag:"div"},{inner:[u],class:"Unfold__triggerContentSubTitle",tag:"div"}]:[u]],class:"Unfold__triggerContent",tag:"div"})}),!i&&f?(0,a.default)({mix:"Unfold__triggerTextCount",inner:f}):"",d.default.html({inner:[(0,s.Icon16Dropdown)()],class:"Unfold__triggerIcon",tag:"div"})],t=n.default.list(t)}var g=e.opened?e.close_url:e.open_url,m=(0,l.mergeObjects)({},e.trigger_attrs);return e.isDisabled&&(m.disabled=!0),{inner:[d.default.wrap(t)],type:"button","aria-haspopup":"true","aria-expanded":"false","aria-controls":e.uniqueId,href:g,class:"Unfold__trigger",onclick:["Unfold._onTriggerClick","this"],attrs:m,tag:"button"}}function f(e){if(!e)return"";var t="";e.svgIcon?t=d.default.html({inner:[e.svgIcon],class:"Unfold__itemIcon",tag:"div"}):e.icon&&(t="string"==typeof e.icon?d.default.html((0,o.default)({mix:"Unfold__itemIcon",icon:e.icon})):(0,a.default)({mix:n.default.class("Unfold__itemIcon"),inner:d.default.html(e.icon)})),e.attrs+=' data-name="'+e.name+'" role="menuitem" tabindex="-1"',e.active&&(e.attrs+=' aria-current="true"'),e.preventNavigation&&(e.attrs+=' data-prevent-navigation="1"');var i=0===e.count||e.count;return(0,a.default)({inner:[t,(0,a.default)({inner:[e.text,i?(0,a.default)({mix:"Unfold__itemCountHidden",inner:e.count}):""],mix:"Unfold__itemText"}),i?(0,r.default)({mix:"Unfold__itemCount",gray:!0,value:e.count}):""],mix:n.default.class(e.mix,"_touched","replaceState","Unfold__item",{active:e.active,name:e.name,disabled:e.disabled,replaceState:e.replaceState}),url:e.url,tag:e.tag,attrs:e.attrs})}t.default=function(e){var t="unfold-"+Date.now()+"-"+Math.round(9999*Math.random());e.uniqueId=t;var i=n.default.class(e.mix,"Unfold",{position:e.position,asIcon:!!e.icon||!!e.icon_html,open:e.opened,withTitle:!!e.title}),a=n.default.list(e.items,f);return d.default.html({inner:[(0,c.CustomTag)({inner:[u(e)],tag:e.triggerWrapperTag,class:"Unfold__trigger"}),{inner:[d.default.wrap(a)],id:t,class:["Unfold__popup","ScrollView",e.popup_class].filter((function(e){return e})).join(" "),role:"menu",tag:"div"}],class:i,"data-name":e.name,onclick:e.onclick,tag:"div"})}},82425:function(e,t,i){"use strict";var n=i(9046),a=i(1730),o=i(62691),r=i(60767),s=i(69131),c=i(22770);Object.assign(s.default,{onOpen:befall.kind("unfoldName"),getByName:function(e){return(0,a.$)(v.unfoldByName(e))},setActive:p,setCount:function(e,t,i){var n=e.$(v.itemCountByName(t));r.default.setValue(n,i)},setTitle:function(e,t,i){e.$(v.itemByName(t)).$(v.itemText).innerText=i},toggleItemEnabled:function(e,t,i){void 0===i&&(i=!0);if(!e)return;var n=e.$(v.itemByName(t));n&&n.classList.toggle(d,!i)},changePosition:function(e,t,i){void 0===t&&(t=!1);void 0===i&&(i=!1);var n;e.classList.remove(f,_,h,g),n=t?i?f:h:i?_:g;e.classList.add(n)}}),s.default._onTriggerClick=w;var l="Unfold__item_active",d="Unfold__item_disabled",u="Unfold_open",f="Unfold_position_topLeft",_="Unfold_position_topRight",h="Unfold_position_bottomLeft",g="Unfold_position_bottomRight",m="Unfold__item_replaceState",v={unfold:".Unfold",unfoldByName:function(e){return'.Unfold[data-name="'+e+'"]'},itemActive:"."+l,itemByName:function(e){return".Unfold__item_name_"+e},itemCountByName:function(e){return v.itemByName(e)+" .Unfold__itemCount"},item:".Unfold__item",itemDisabled:"."+d,triggerText:".Unfold__triggerText",itemText:".Unfold__itemText",popup:".Unfold__popup"};function p(e,t){var i,n;if(1===arguments.length?e=(n=e).closest(v.unfold):n=e.$(v.itemByName(t)),(i=e.$(v.itemActive))&&n){i.classList.remove(l),n.classList.add(l);var a=e.$(v.triggerText),o=n.$(v.itemText);a.innerText=o.textContent.trim()}}function w(e){var t=e.closest(v.unfold),i=o.isTouch?"touchend":"mousedown",r=o.isTouch?"touchend":"mouseup",l=!o.isTouch&&window.innerWidth<882,d=t.getAttribute("data-name"),f=!1;d&&s.default.onOpen(d)(),t.classList.add(u),document.addEventListener("touchmove",y),o.default.msie_mobile?document.addEventListener(r,b,!0):document.addEventListener(i,S,!0);var _=function(){},h=function(){},g=(0,a.$)(v.popup,t);function w(){t.classList.remove(u),document.removeEventListener("touchmove",y),document.removeEventListener(i,S,!0),document.removeEventListener(r,b,!0),(0,c.onTransitionEnd)(g).then((function(){h&&h(),_&&_()}))}function y(e){e.target.closest(v.popup)||w(),f=!0}function b(){document.addEventListener(i,S,!0)}function S(e){if(f)f=!1;else{var t=e.target.closest(v.itemDisabled);if(!t){var i=e.target.closest(v.item+"[href]");if(i){if(o.default.safari&&o.default.safari_mobile&&o.default.version<9)setTimeout(w,500);else{(0,n.cancelEvent)(e);var a=(0,n.domData)(i,"prevent-navigation");if(a||nav.onBeforeGo((function(){w()})),i.classList.contains(m))p(i.closest(v.unfold),(0,n.domData)(i,"name"));a?w():nav.go(i)}return}if(i=e.target.closest(v.item+"[onclick]")||e.target.closest(v.item+"[onmousedown]"))return void setTimeout(w);if(i=e.target.closest("label"+v.item))return void(o.default.safari&&o.default.safari_mobile&&o.default.version<9?setTimeout(w,500):setTimeout(w));if(i=e.target.closest("input[onchange]"))return void(o.default.safari&&o.default.safari_mobile&&o.default.version<9?setTimeout(w,500):setTimeout(w))}(o.isTouch||l||t)&&(e.preventDefault(),e.stopImmediatePropagation()),(l||!o.isTouch&&t)&&document.addEventListener("click",C,!0),t||w()}}function C(e){e.preventDefault(),e.stopImmediatePropagation(),document.removeEventListener("click",C,!0)}g&&(0,c.onTransitionEnd)(g).then((function(){(h=(0,c.expandPopup)(e)).exitIntent=function(){return!1},(_=(0,c.setMenuNavigation)(g))&&(_.exitIntent=function(){return w(),!1})}))}},54440:function(e,t,i){"use strict";var n=i(69131);i(82425);t.default=n.default,window.Unfold=n.default},74489:function(e,t,i){"use strict";var n=i(1730),a=i(11393),o=i(3226);window.Voting={cls:"Voting",setLoading:v,setHtml:function(e,t){h(e).forEach((function(e){e.outerHTML=t})),h(e).forEach((function(e){e.classList.add(c)})),setTimeout((function(){h(e).forEach((function(e){e.classList.remove(c),Voting.onHtmlUpdate(e)}))}),30)},getVotingsById:h,onHtmlUpdate:(0,o.default)("$voting")},Voting._onSubmit=p,Voting._onSingleAnswerClick=m,Voting._onCheckboxClick=g,Voting._onRevoteClick=w;var r="_Voting_singleAnswerAction",s="Voting_loading",c="Voting_beforeAnimation",l="Voting_hasCheckedOptions",d=".Voting",u=function(e){return'.Voting[data-id="'+e+'"]'},f=".Voting__option",_=".Voting__optionControl";function h(e){return(0,n.$$)(u(e))}function g(e){var t=e.closest(d),i=Array.from((0,n.$$)(_)).some((function(e){return e.checked}));e.closest(f).setAttribute("aria-checked",e.checked),t.classList.toggle(l,i)}function m(e){var t=e.name,i=e.value,n=e.closest("form"),a=n.getAttribute("action");n[r]=a+"&"+t+"="+encodeURIComponent(i)}function v(e){e.classList.add(s)}function p(e,t,i){var n;if(e.preventDefault(),t[r])n=t[r],v(t);else{var o=Array.from(t.$$("input:checked"));if(0===o.length)return;var s=o[0].name,c=o.map((function(e){return e.value})).join(","),l=t.getAttribute("action"),d=l.includes("?")?"&":"?";v(t),n=""+l+d+s+"="+c+"&is_board="+t.$('input[name="is_board"]').value}a.default.handle(i,{$voting:t,url:n})}function w(e,t){var i=e.closest(d);a.default.handle(t,{$voting:i})}},4994:function(e,t,i){"use strict";var n=i(9046),a=(0,n.need)("Voting");function o(e){s(e.$voting,e.url)}function r(e,t){s(t.$voting,e,!0)}function s(e,t,i){var o=setTimeout((function(){a.setLoading(e)}),140);window.ajax.post(t,{_ajax:1},{onDone:function(t,r){(0,n.domData)(e,"is-web-view")&&a._onPollChanged&&a._onPollChanged(e,i),clearTimeout(o),a.setHtml(t,r)}})}window.uVoting={},window.uVoting._onSubmit=o,window.uVoting._onRevoteClick=r},4960:function(e,t,i){"use strict";i.d(t,{default:function(){return r}});var n,a=[],o=!1,r=function(){function e(){}return e.init=function(e,t,i,n){if(void 0===i&&(i=0),void 0===n&&(n={}),o=n.mobile||n.isWebView,t&&e.ads&&!isEmpty(e.ads)&&!(e.has_more||isArray(e.ads)&&0==e.ads.length)){var a=ce("ins");addClass(a,"mrg-tag"),addClass(a,"article_adsblock"),n.mobile&&addClass(a,"article_adsblock_mobile"),setStyle(a,{display:"block","text-decoration":"none"});var r="";if(isObject(n.deviceInfo))for(var c in n.deviceInfo)n.deviceInfo.hasOwnProperty(c)&&(r+="&"+c+"="+n.deviceInfo[c]);for(var l in e.ads.data["ad-query"]=e.ads.data["ad-query"].replace("%device_info%",r),e.ads.data["ad-query"]+="&place="+i,e.ads.data)e.ads.data.hasOwnProperty(l)&&domData(a,l,""+e.ads.data[l]);t.appendChild(a),window.MRGtag||(window.MRGtag=[]);var d=n.isWebView?{iframeMode:!0}:{},u=e.ads.eventsHash;if(s(e,n,"requested",u),d.onNoAds=function(){s(e,n,"no_ads",u)},d.onAdsLoaded=function(){s(e,n,"ads_loaded",u)},d.onAdsClosed=function(){s(e,n,"ads_closed",u)},d.onAdsSuccess=function(){s(e,n,"ads_success",u)},d.onAdsClicked=function(){s(e,n,"ads_clicked",u)},d.onScriptError=function(){s(e,n,"script_error",u)},window.MRGtagOnAdsImpression=function(){s(e,n,"ads_impression",u)},window.MRGtag.push(d),!window.mailRuSdsScriptLoaded){var f=document.createElement("script");f.setAttribute("src",e.ads.script),f.setAttribute("async","true"),document.head.appendChild(f),window.mailRuSdsScriptLoaded=!0}}},e.wasShown=function(){return false},e}();function s(e,t,i,r){a.push(i+"/"+e.owner_id+"_"+e.id+"/"+r),clearTimeout(n),n=setTimeout((function(){var e=o?"article.php":"al_articles.php";ajax.post(e,{act:"ads_event",events:a.join(","),is_web_view:intval(t.isWebView)}),a=[]}),200)}},57441:function(e,t,i){"use strict";i.d(t,{default:function(){return d}});var n,a,o=i(46684),r=i(63197),s=i(30712),c=i(17999),l={};window._articleCarouselGlobalId=window._articleCarouselGlobalId||1;var d=function(){function e(e,t,i){var n=this;this._handleClick=function(e){if(e.target.href)try{var t=new URL(e.target.href);window.location.pathname===t.pathname&&t.search.match(/\?|&anchor=/)&&(e.preventDefault(),n.scrollToAnchor(null,t.search),window.history.replaceState({},document.title,""+t.pathname+t.search))}catch(e){console.error(e)}},this._article=e,this._options=t,this._readTO=null,this._scrollStatEvent=!1,this._openTime=0,this._els={view:ge("article_view_"+e.raw_id)},window.cur&&cur.destroy&&cur.destroy.push((function(){n.deinit()})),i&&this.ready()}var t=e.prototype;return t.getEl=function(){return this._els.view},t.getArticle=function(){return this._article},t.getScrollNode=function(){return this._options.getScrollNode?this._options.getScrollNode():document},t._getScrollTop=function(){return this._options.getScrollTop?this._options.getScrollTop():window.scrollNode?window.scrollNode.scrollTop:window.document.documentElement.scrollTop},t.getTimeSpent=function(){return Math.round((Date.now()-this._openTime)/1e3)},t.changeCarouselPosition=function(e,t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!0);var a=l[e];(0,c.isFunction)(a)&&a(0,!1,t,i,n)},t.deinit=function(){this._scrollEvent&&(this.getScrollNode().removeEventListener("scroll",this._scrollEvent),this._scrollEvent=!1),this._scrollStatEvent&&(this.getScrollNode().removeEventListener("scroll",this._scrollStatEvent),this._scrollStatEvent=!1),document.removeEventListener("click",this._handleClick),clearTimeout(this._readTO)},t._onViewScroll=function(){var e=this,t=scrollGetY(),i=window.innerHeight;(0,c.each)(geByTag("figure",this._els.view),(function(n,a){var o=(0,c.intval)(domData(a,"done"));if(!o){var r=getH(a),s=getXY(a)[1],l=(0,c.intval)(domData(a,"type")),d=101==l?-200:100,u=s<=t+i-d&&t+d<=s+r;(o=e._onObjectView(u,l,a))&&domData(a,"done",1)}})),(0,c.each)(geByTag("figure",this._els.view),(function(n,a){var o,r=getH(a),s=getXY(a)[1],l=(0,c.intval)(domData(a,"type")),d=s,u=s+r,f=t,_=t+i;if(d>_||f>u)o=!1;else{var h=Math.max(d,f);o=(Math.min(u,_)-h)/r>.7}e._onObjectPartialView(o,l,a)}))},t._initObjects=function(){var e=this;this._initedObjects=this._initedObjects||{},(0,c.each)(geByClass("_article_unmute_button",this._els.view),(function(t,i){e._initedObjects[t]||(e._initedObjects[t]=!0,i.addEventListener("click",(function(){var e=i.parentNode,t=geByTag1("video",e);t.muted=!t.muted,toggleClass(e,"article_object_unmuted",!t.muted)})))})),(0,c.each)(geByTag("figure",this._els.view),(function(t,i){if(!e._initedObjects[t])switch(e._initedObjects[t]=!0,parseInt(domData(i,"type"))){case s.ParagraphType.ObjectPhoto:var n=(0,o.initPhotoCarousel)(i,{mobile:e._options.mobile,moderDeletePhoto:e._options.moderDeletePhoto,onClick:function(t){e.sendStats({type:t})}});if(e._initPhoto(i),n){var a=window._articleCarouselGlobalId++;i.setAttribute("data-carousel-id",a),l[a]=n}break;case s.ParagraphType.ObjectAudio:case s.ParagraphType.ObjectAudioPlaylist:geByClass1("article_figure_content",i).addEventListener("click",(function(){e.sendStats({type:s.ArticleStatsEvents.clickOnAudio})}),!0);break;case s.ParagraphType.ObjectMarketItem:case s.ParagraphType.ObjectAliExpressProduct:break;case s.ParagraphType.ObjectGIF:case s.ParagraphType.ObjectVideo:if(e._options.mobile){var r=geByTag1("video",i);r&&(r.addEventListener("play",(function(){e.sendStats({type:s.ArticleStatsEvents.clickOnVideo})})),r.addEventListener("pause",(function(){e.sendStats({type:s.ArticleStatsEvents.clickOnVideo})})))}else{geByClass1("article_figure_content",i).addEventListener("click",(function(){e.sendStats({type:s.ArticleStatsEvents.clickOnVideo})}),!0)}}})),this._els.view&&this._els.view.addEventListener("click",(function(t){var i=t.target;if(matchesSelector(i,'a[href^="/away"]')){var n=decodeURIComponent(unescape(i.href)).split("vk.com/away.php?to=")[1];n&&e.sendStats({type:s.ArticleStatsEvents.clickOnExternalLink,domain:encodeURIComponent(e._getUrlDomain(n))})}}))},t._initPhoto=function(e){var t=this;geByClass1("article_figure_content",e).addEventListener("click",(function(){var i=domQuery1("[data-sizes]",e),n=JSON.parse(domData(i,"sizes")),a=(0,c.intval)(domData(e,"photo-carousel-index"));t._options.onImageOpen&&t._options.onImageOpen.call(t,n,e,a),t.sendStats({type:s.ArticleStatsEvents.clickOnPhoto})}))},t._initStats=function(){if(this._statsInited)this._scrollStatEvent&&this._scrollStatEvent();else{this._statsInited=!0,this._openTime=Date.now();var e,t=-1,i=[];this._scrollStatEvent&&this.getScrollNode().removeEventListener("scroll",this._scrollStatEvent),clearTimeout(this._readTO);var n=this;this.getScrollNode().addEventListener("scroll",this._scrollStatEvent=function(){var o=n.getCurrentScrollRatio();if(!(o<0)){var r=1;o>=.95?r=4:o>.66?r=3:o>.33&&(r=2),function(o){if(n._isReady&&(n._article.has_more&&(o=Math.min(o,1)),!(t>=o))){for(var r=t+1;r<=o;r++)i.push(r);if(t=o,clearTimeout(e),e=setTimeout(a,300),3==o&&n._article.ttr){var s=n._article.ttr-n.getTimeSpent();s>0&&(n._readTO=setTimeout((function(){if(!document.hidden){var e=n.getCurrentScrollRatio();if(!(e<0||e>1.3)){var o=4==t;i=[t=4],a(o)}}}),1e3*s))}}}(r),4!=r||n._article.has_more||(n.getScrollNode().removeEventListener("scroll",n._scrollStatEvent),n._scrollStatEvent=!1)}},{passive:!0}),this._scrollStatEvent&&this._scrollStatEvent()}function a(e){if(i.length){var t=n._article,a=n._options,o="";if(t.ref)o=t.ref;else if(window.cur){if("feed"===(o=window.cur.module)&&cur.articlePrevLoc&&!a.mobile)"search"===nav.fromStr(cur.articlePrevLoc).section&&(o="feed_search")}var r={act:"stats",scroll:i.join(","),spent:n.getTimeSpent(),hash:t.access_hash,article_owner_id:t.owner_id,article_id:t.id,is_web_view:a.isWebView?1:0,post_id:a.sourcePostId,is_widget:a.isWidget,is_delayed_scroll_4:(0,c.intval)(e),track_code:a.trackCode,ref:o};ajax.post(a.mobile?"article.php":"al_articles.php",r),t.mailru_stats_data&&i.forEach((function(e){(0,s.mailruStatsPixel)("scroll_"+e,t.mailru_stats_data)})),i=[]}}},t._initGoogleAnalytics=function(){var e=this._options.googleAnalyticsId;if(e)if(window.dataLayer=window.dataLayer||[],window.gtag)window.gtag("config",e,{page_location:window.location.href});else{var t=document.createElement("script");t.setAttribute("src","https://www.googletagmanager.com/gtag/js?id="+e),t.setAttribute("async","true"),document.head.appendChild(t),window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",e)}},t._onObjectPartialView=function(e,t,i){var o=domQuery1("[data-sizes]",i),r=Boolean(Number(domData(o,"should-disable-carousel-animation")));if(t==s.ParagraphType.ObjectPhoto&&!r&&JSON.parse(domData(o,"sizes")).length>1){var c=i.getAttribute("data-carousel-id");e?a!=c&&(clearTimeout(n),n=setTimeout((function(){var e=l[c];e&&e(1,!0)}),400),a=c):c==a&&(a=-1,clearTimeout(n))}},t._onObjectView=function(e,t,i){var n=!1;switch(t){case s.ParagraphType.ObjectPhoto:if(e){var a=geByTag1("img",i),o=getW(a)||this._options.width,r=domQuery1("[data-sizes]",i),c=JSON.parse(domData(r,"sizes")),l=geByTag("img",i);c.forEach((function(e,t){var i=(0,s.getAppropriateImage)(c[t],o,!0)[0];(0,s.preloadImage)(i,(function(){var e=l[t];removeClass(e,"article_object_photo__image_blur"),e.src=i}))})),n=!0}break;case s.ParagraphType.ObjectGIF:if(!this._options.mobile){var d=geByTag1("video",i);if(d)if(e){if(d.hasAttribute("autoplay")){var u=d.play();u&&u.catch((function(){}))}}else d.pause();else n=!0}break;case s.ParagraphType.ObjectTwitter:case s.ParagraphType.ObjectFacebook:case s.ParagraphType.ObjectInstagram:case s.ParagraphType.ObjectVK:case s.ParagraphType.ObjectTelegram:this.initEmbed(t,i),n=!0}return n},t.initEmbed=function(e,t){var i=this;switch(e){case s.ParagraphType.ObjectTwitter:var n=domQuery1("[data-tweet-id]",t),a=domData(n,"tweet-id");(0,r.loadScript)("https://platform.twitter.com/widgets.js",{onLoad:function(){window.twttr.widgets.createTweet(a,n,{align:"center",lang:window.vk&&0==window.vk.lang?"ru":"en",dnt:!0})}});break;case s.ParagraphType.ObjectFacebook:var o=window.vk&&0==window.vk.lang?"ru_RU":"en_US";(0,r.loadScript)("https://connect.facebook.net/"+o+"/all.js#xfbml=1&amp;version=v2.8",{onLoad:function(){window.FB.XFBML.parse()}});break;case s.ParagraphType.ObjectInstagram:(0,r.loadScript)("https://www.instagram.com/embed.js",{onLoad:function(){window.instgrm.Embeds.process(),addEvent(window,"message",s.changeHeightInstagramEmbed)}});break;case s.ParagraphType.ObjectVK:var c=domQuery1("[data-raw-id]",t),l=domData(c,"raw-id"),d=domData(c,"index"),u=l.split(";"),f=u[0],_=u[1];(0,r.loadScript)("/js/api/openapi.js",{onLoad:function(){ajax.post("dev.php",{act:"a_get_post_hash",post:f+"_"+_},{onDone:function(e){e&&window.VK&&window.VK.Widgets&&window.VK.Widgets.Post("vk_post_"+l+"_"+d,f,_,e,{from:i._options.isWebView?"article_webview":""})}})}});break;case s.ParagraphType.ObjectTelegram:(0,r.loadScript)("https://telegram.org/js/telegram-widget.js?5",{})}},t.getCurrentScrollRatio=function(){var e=getH(this._els.view),t=getXY(this._els.view)[1]-getXY(this.getScrollNode().firstElementChild)[1];return(this._getScrollTop()+window.innerHeight-t)/e},t.getScreenVisibilityRatio=function(){var e=getH(this._els.view),t=getXY(this._els.view)[1]-getXY(this.getScrollNode().firstElementChild)[1],i=this._getScrollTop(),n=window.innerHeight,a=t,o=t+e,r=i,s=i+n;if(r>o||a>s)return 0;var c=Math.max(a,r);return(Math.min(o,s)-c)/n},t.update=function(){this._initObjects(),this._initStats(),this._options.onScroll&&this._options.onScroll.call(this,this.getCurrentScrollRatio())},t.ready=function(){var e=this;(this._isReady=!0,this._initObjects(),this._initStats(),this._initGoogleAnalytics(),setTimeout((function(){var t=(0,s.getUrlParam)("anchor");if(t){e._options.isWebView||e.scrollToAnchor(t);var i=e.getScrollNode();i===document&&(i=document.scrollingElement||window.scrollNode||document.body),i.click&&i.click(),i.focus()}}),0),!this._options.mobile&&window.AudioPlaylist)&&(this._article.audios_list&&this._article.audios_list.length>0&&new AudioPlaylist(AudioPlaylist.TYPE_TEMP,this._article.owner_id,"article_"+this._article.id).mergeWith({list:this._article.audios_list}));this.getScrollNode().addEventListener("scroll",this._scrollEvent=function(){e._onViewScroll(),e._options.onScroll&&e._options.onScroll.call(e,e.getCurrentScrollRatio())}),document.addEventListener("click",this._handleClick),setTimeout((function(){e._scrollEvent()}),this._options.objectsInitDelay||0)},t.scrollToAnchor=function(e,t){e=e||(0,s.getUrlParam)("anchor",t);var i=this._options,n=this.getScrollNode();n===document&&(n=document.scrollingElement||window.scrollNode||document.body);e&&function(){var t=document.getElementById(e);if(t){"scrollRestoration"in history&&(history.scrollRestoration="manual");var a=i.isWebView?0:25,o=t.parentNode.offsetTop-a;window.setTimeout((function(){n.scrollTo?n.scrollTo(0,o):n.scrollTop=o}),10)}}()},t.sendStats=function(e){var t=this._article,i=this._options,n={act:"stats",spent:this.getTimeSpent(),article_id:t.id,article_owner_id:t.owner_id,hash:t.access_hash,is_web_view:i.isWebView?1:0};Object.assign(n,e),ajax.post(i.mobile?"article.php":"al_articles.php",n)},t._getUrlDomain=function(e){var t=document.createElement("a");return t.href=e,t.hostname},e}()},46684:function(e,t,i){"use strict";i.d(t,{initPhotoCarousel:function(){return o}});var n=i(17999),a=i(30712);function o(e,t){var i=domQuery1("[data-sizes]",e),o=JSON.parse(domData(i,"sizes"));(domData(i,"media-links")||"").split(",");if(!(o.length<=1||domData(e,"carousel-inited"))){if(domData(e,"carousel-inited",1),t.mobile)return function(e,t,i){void 0===i&&(i={});var o,s,c,l=geByClass1("article_photo_carousel__controls",t),d=geByClass1("article_photo_carousel__counter",t),u=domData(d,"counter-lang")||getLang("global_article_carousel_counter"),f=getSize(geByClass1("article_figure_content",t)),_=geByClass1("article_photo_carousel_inner",t),h=i.onClick,g=0,m=0,v=!1,p=0,w=0,y=!1,b=!1;l.addEventListener("touchstart",(function(e){s=e.touches[0].pageX,o=e.touches[0].pageY,addClass(_,"--no_trans"),v=!0,clearTimeout(c)}));var S,C=!1;l.addEventListener("touchmove",(function(t){if(b||!(Math.abs(t.touches[0].pageY-o)>5||y)){if(m=t.touches[0].pageX-s,!(Math.abs(m)<10)||C){b||window.addEventListener("touchmove",S=function(e){return cancelEvent(e)},{passive:!1}),b=!0,C=!0;var i=Math.min(e.length-1,Math.max(0,g+(m<0?1:-1))),n=0===i&&0===g,a=i===e.length-1&&g===e.length-1;p=i;var r=-g*f[0];r+=n||a?.2*m:m,_.style.transform="translateX("+r+"px)"}}else y=!0})),l.addEventListener("touchend",(function(){C=!1,y=!1,b=!1,w=g,removeClass(_,"--no_trans"),S&&window.removeEventListener("touchmove",S),Math.abs(m)<50||(g=p),T(0,!1,p,!0)})),window.addEventListener("resize",k),window.cur&&window.cur.destroy&&window.cur.destroy.push((function(){window.removeEventListener("resize",k)}));function k(){f=getSize(geByClass1("article_figure_content",t)),T(0,!1,g,!1,!1)}function T(i,o,s,l,m){if(void 0===l&&(l=!1),void 0===m&&(m=!0),!o||!v){if(v=!0,o)return _.style.transform="translateX(-50px)",void(c=setTimeout((function(){_.style.transform="translateX(0px)"}),700));clearTimeout(c),g=void 0===g?Math.min(e.length-1,Math.max(0,g+i)):s,l&&(0,n.isFunction)(h)&&w!==g&&h(w<g?a.ArticleStatsEvents.clickOnCarouselNext:a.ArticleStatsEvents.clickOnCarouselPrev),domData(t,"photo-carousel-index",g),r(g,t),d.innerHTML=u.replace("{counter}",g+1).replace("{total}",e.length),m||addClass(_,"--no_trans"),_.style.transform="translateX(-"+g*f[0]+"px)",m||(_.offsetWidth,removeClass(_,"--no_trans"))}}return function(e,t,i,n,a){void 0===n&&(n=!1),void 0===a&&(a=!0),t||(p=i),w=g,T(e,t,i,n,a)}}(o,e,t);var s=function(e,t,i,n){var o,s=0,c=geByClass1("article_photo_carousel__controls",t),l=geByClass1("article_photo_carousel__counter",t),d=domData(l,"counter-lang")||getLang("global_article_carousel_counter"),u=getSize(geByClass1("article_figure_content",t)),f=geByClass1("article_photo_carousel_inner",t),_=geByClass1("article_photo_carousel__left",t),h=geByClass1("article_photo_carousel__right",t),g=i.onClick,m=!1;function v(i,n){if(!n||!m){if(m=!0,n)return f.style.transform="translateX(-50px)",void(o=setTimeout((function(){f.style.transform="translateX(0px)"}),700));clearTimeout(o),s=Math.min(e.length-1,Math.max(0,s+i)),f.style.transform="translateX(-"+s*u[0]+"px)",l.innerHTML=d.replace("{counter}",s+1).replace("{total}",e.length),toggle(_,s>0),toggle(h,s<e.length-1),domData(t,"photo-carousel-index",s),r(s,t)}}return h.addEventListener("click",(function(e){return v(1),g&&g(a.ArticleStatsEvents.clickOnCarouselNext),cancelEvent(e)})),_.addEventListener("click",(function(e){return v(-1),g&&g(a.ArticleStatsEvents.clickOnCarouselPrev),cancelEvent(e)})),t.addEventListener("mousemove",(function(){c.style.opacity=1})),t.addEventListener("mouseleave",(function(){c.style.opacity=0})),v}(o,e,t);return window.data(e,"changePhotoFunction",s),s}}function r(e,t){var i=geByTag1("figcaption",t),n=[];i&&((n=domData(i,"captions"))&&(n=JSON.parse(n)),i.innerHTML=n[e]||"")}},12813:function(e,t,i){"use strict";i.d(t,{getStoryReportUrl:function(){return c},getStoryQuestionReportUrl:function(){return l},getArticleReportUrl:function(){return d}});var n=i(97316),a=i(86353),o=i(82408);function r(){return(0,a.partConfigEnabled)("mvk_vkui_reports")}function s(e,t){return"/vkui/reports/?"+(0,o.toQueryString)((0,n.__assign)((0,n.__assign)({},e),{back_url:t||window.location.href.replace(window.location.origin,"")}))}function c(e){var t=e.type,i=e.rawId,a=e.refrom;if(r()){var o=(0,n.__read)(i.split("_"),2);return s({type:t,owner_id:o[0],item_id:o[1]},a)}return"/reports?act=add&object="+(""+t+i)+"&refrom="+a}function l(e){var t=e.storyOwnerId,i=e.questionId,n=e.refrom;return r()?s({type:"story_question",owner_id:t,item_id:i},n):"/reports?act=add&object="+("story_question"+t+"_"+i)+"&refrom="+n}function d(e){var t=e.ownerId,i=e.articleId,n=e.accessHash,a=e.refrom;return r()?s({type:"article",owner_id:t,item_id:i},a):"/reports?act=add&object=article"+t+"_"+i+"_"+n+"&refrom="+a}},30712:function(e,t,i){"use strict";i.d(t,{ParagraphType:function(){return a},ResizableObjectTypes:function(){return o},ArticleStatsEvents:function(){return r},getAppropriateImage:function(){return s},preloadImage:function(){return l},mailruStatsPixel:function(){return d},getUrlParam:function(){return u},changeHeightInstagramEmbed:function(){return f}});var n=i(17999),a={Text:1,Header1:2,Header2:3,Header3:4,Code:5,NumericList:6,BulletList:7,Quote:8,Quote2:9,ObjectAudioPlaylist:100,ObjectPhoto:101,ObjectVideo:102,ObjectGIF:103,ObjectPodcast:104,ObjectAudio:105,ObjectTwitter:106,ObjectFacebook:107,ObjectInstagram:108,ObjectVK:109,ObjectTelegram:110,ObjectPoll:111,ObjectMarketItem:112,ObjectAliExpressProduct:113},o=[a.ObjectPhoto,a.ObjectGIF,a.ObjectVideo,a.ObjectTwitter,a.ObjectFacebook,a.ObjectInstagram,a.ObjectVK,a.ObjectTelegram],r={clickOnVideo:"click_on_video",clickOnAudio:"click_on_audio",clickOnPhoto:"click_on_photo",clickOnExternalLink:"external_link_click",clickOnCarouselNext:"click_on_carousel_next",clickOnCarouselPrev:"click_on_carousel_prev",clickOnMentions:"click_on_mentions",nightModeOn:"night_mod_on",nightModeOff:"night_mod_off",close:"close"};function s(e,t,i){var a=[];if((0,n.each)(e,(function(e,t){i&&!["w","z","y","x","m","s"].includes(e)||a.push(t)})),!a.length)return[!1];a.sort((function(e,t){return e[1]-t[1]})),t*=window.devicePixelRatio>=2?2:1;var o=a[a.length-1];return(0,n.each)(a,(function(e,i){if(i[1]>=t)return o=i,!1})),o}var c={};function l(e,t){if(!0===c[e])return t&&t(),!0;if(Array.isArray(c[e]))return c[e].push(t),!1;c[e]=[t];var i=new Image;return i.onload=function(){var t=c[e];c[e]=!0,(0,n.each)(t,(function(e,t){t&&t()}))},i.src=e,!1}function d(e,t){if((0,n.isObject)(t)&&!(0,n.isEmpty)(t)){var i="https://vk-callback.go.mail.ru/longread_pxl?action="+e;(0,n.each)(t,(function(e,t){i+="&"+e+"="+t})),(new Image).src=i}}function u(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t||location.search);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))}function f(e){if(/^https?:\/\/([\w-]+\.)*(instagram\.com|instagr\.am)$/.test(e.origin)){var t=function(e){for(var t,i=document.getElementsByTagName("iframe"),n=i.length-1;n>=0;n--){var a=i[n];if(a.contentWindow===e.source){t=a;break}}return t}(e);if(t){try{e=JSON.parse(e.data)}catch(e){}"object"==typeof e&&"string"==typeof e.type&&"object"==typeof e.details&&setTimeout((function(){if("MEASURE"===e.type){var i=e.details.height;t.setAttribute("height",i)}}),100)}}}},29804:function(e,t,i){"use strict";i.d(t,{ColorSchemeMode:function(){return n},ColorSchemeName:function(){return a},ColorScheme:function(){return c},colorScheme:function(){return s}});var n,a,o=i(27813),r=i(36557);!function(e){e.Light="light",e.Dark="dark",e.Auto="auto"}(n||(n={})),function(e){e.Dark="space_gray",e.Light="bright_light"}(a||(a={}));var s,c=function(){function e(){this.currentMode="",this.subscribers=[],this.initSubscribers=[],this.isExecuted=!1,this.isModeSavingAllowed=!0,this.isSchemeSavingAllowed=!0}return e.prototype.init=function(t){var i=this;this.isExecuted||(this.schemesMap=t.schemesMap,this.setMode(t.mode),this.initSubscribers.forEach((function(e){e()})),e.isSchemesAutoSwitchingSupported()&&(window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(e){i.currentMode===n.Auto&&i.setScheme(e.matches)})),this.isExecuted=!0))},e.prototype.setScheme=function(t){e.isSchemesSupported()&&(this.applyScheme(document.body,t?a.Dark:a.Light),this.currentIsDark=t,this.isSchemeSavingAllowed&&(0,o.setCookie)("remixdark_color_scheme",Number(t),365),this.subscribers.forEach((function(e){e()})))},e.prototype.isDarkScheme=function(){return this.currentIsDark},e.prototype.getMode=function(){return this.currentMode},e.prototype.setMode=function(t){this.currentMode=t;var i=!1;switch(t){case n.Light:i=!1;break;case n.Dark:i=!0;break;case n.Auto:if(e.isSchemesAutoSwitchingSupported())i=window.matchMedia("(prefers-color-scheme: dark)").matches}this.setScheme(i),this.isModeSavingAllowed&&(0,o.setCookie)("remixcolor_scheme_mode",t,365)},e.prototype.applyScheme=function(e,t){var i,n=(null===(i=this.schemesMap)||void 0===i?void 0:i[t])||t;e.setAttribute("scheme",n)},e.prototype.subscribe=function(e){var t=this;return this.subscribers.push(e),function(){t.subscribers=t.subscribers.filter((function(t){return e!==t}))}},e.prototype.onInit=function(e){var t=this;return this.initSubscribers.push(e),function(){t.initSubscribers=t.initSubscribers.filter((function(t){return e!==t}))}},e.isSchemesSupported=function(){return(!(0,r.isMvk)()||window.isNewMail)&&window.CSS&&CSS.supports&&CSS.supports("color","var(--custom-property)")},e.isSchemesAutoSwitchingSupported=function(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme)").matches},e}();s=window.colorScheme?window.colorScheme:new c,window.colorScheme=s,window.isSchemesSupported=c.isSchemesSupported.bind(null)},63197:function(e,t,i){"use strict";function n(e,t){var i,n=t.timeout,a=t.onLoad,o=t.onError,r=document.createElement("script");function s(){r.readyState&&"loaded"!==r.readyState&&"complete"!==r.readyState||(l(),a&&a())}function c(){l(),o&&o()}function l(){clearTimeout(i),r.removeEventListener("load",s),r.removeEventListener("readystatechange",s),r.removeEventListener("error",c)}return r.addEventListener("load",s),r.addEventListener("readystatechange",s),r.addEventListener("error",c),r.src=e,document.head.appendChild(r),n&&(i=setTimeout(c,n)),{destroy:function(){l()}}}i.d(t,{loadScript:function(){return n}})}}]);